[
  {
    "objectID": "syllabus.html",
    "href": "syllabus.html",
    "title": "Time Series Applications",
    "section": "",
    "text": "Instructor\nDr. Tyler George\n   Cornell College, West 311\n    tgeorge@cornellcollege.edu \n\n\n\nClass Meetings\nJanuary 13th to February 5th\n   9:00 am - 11:00 am and 1:00 pm - 3:00 pm\n   West 213\n\n\n\nOffice Hours\n   MWTh 3:05pm-4:05pm and by appt.\n   West 311\n   Optional Appointment\n\n\n\n\nYou Are A Priority\nMy goal for this block is to help you learn the material. I want to first and foremost recognize that you are an individual and thus are unique and may learn uniquely. Additionally, your health and well-being are priority one. Learning cannot happen effectively if you don’t meet your other personal needs. That all being said, I have structured the class in a way that I, from experience teaching and learning myself, think will be most beneficial for most students. I promise to do my best to create an inclusive and engaging learning environment. I ask that you keep an open line of communication between us when you need help and/or flexibility. You and your learning are why I am here.\n\n\nCourse Description\nTime series analysis is a vital tool for investigating data from many fields, such as business, economics, engineering, biology, medicine, social sciences, and politics. Understanding and anticipating a variable’s change over time is valuable. This class will cover an array of time series methods, including those for correlation analysis and forecasting, stochastic models, regression analysis with time-related variables, and stationary/nonstationary models.\n\n\nLearning Objectives\nThis course supports the Educational Priorities and Outcomes of Cornell College, emphasizing knowledge, communication, and reasoning. Specifically, the learning objectives of this course are:\n\nAbility to communicate statistical ideas clearly and accurately (communication).\nUnderstand what a time series is (knowledge, reasoning).\nUnderstand forecasting strategies (knowledge, reasoning).\nUnderstand regression with time-related variables (knowledge, reasoning).\nLearn and apply some advanced time series methods (knowledge, reasoning).\nAbility to ascertain which type of analysis is appropriate for a particular data set and question (reasoning, ethical behavior).\nBecome more adept at following the statistical process of starting with a question, collecting the requisite data, analyzing the data, and reporting on the results (reasoning, communication).\n\n\n\nPrerequisite\nTo be successful in this class, you should have completed STA 201 and STA 202.\n\n\nCourse Materials\nAll of the materials for this class are free.\nThe textbook is: Forecasting: Principles and Practice by Rob J Hyndman and George Athanasopoulos – it is freely available online. Chapters 1-9.\n\n\nCourse Site and Moodle\nOur course will run from a combination of Moodle and the course website at https://stats-tgeorge.github.io/STA364_TSApps/.\n\n\nSoftware\nIn this course, we will use a combination of technologies, including R and RStudio (server). I have set up an RStudio server that you will access with a web browser. You don’t need to install any software (in fact, for a while, I prefer you don’t). If you are an off-campus student, please let me know right away.\nYou can access the RStudio Server at: http://turing.cornellcollege.edu:8787/.\nIf you have any technical problems you should contact IT as soon as possible. Submit a Work Order!\n\n\nGrades\nYou will find your grades in the course Moodle Gradebook.\n\nGrade Category Descriptions\n\nHomework:\nYour homework will be graded for correctness. I will generally evaluate a random subset of the assigned questions. Your goal is to practice the application of the method and be able to interpret the result. You will find your homework and due dates on the course website’s homepage.\n\n\nParticipation\nThis will be measured by your class attendance and your work on labs and class examples. With class work, please save your script files in the folder provided on the RServer. I will look at these files to see if you are following along and participating.\n\n\n\nProject\nYour project will entail multiple submission stages with details accessed through “Project” on the left side of the course website (once available). Some class time will be used for discussing projects, but not enough to complete the project. I do not anticipate we will start these until week 3. You must use time series analysis and write a scrollytelling article about your results. If you have never heard of scrollytelling, check out this NYT article and this shorthand website.\n\nExams\nYou will have two exams this block, 1/23 and 2/4-2/5. Each exam will have two components. Component 1 will be on these dates and be in a written format. Component 2 will be a take-home, open-book, open-note, exam that you will have 12 hours or more to complete.\n\n\n\n\n\n\n\n\nAssignment\nPoints\n\n\n\n\nHomework\n300\n\n\nParticipation\n100\n\n\nProject\n200\n\n\nExams, two 200pts exams\n400\n\n\nTotal\n1000\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nGrade\nRange\nGrade\nRange\n\n\n\n\nA\n93-100%\nC\n73-76%\n\n\nA-\n90–92%\nC-\n70-72%\n\n\nB+\n87–89%\nD+\n67-69%\n\n\nB\n83-86%\nD\n63-66%\n\n\nB-\n80-82%\nD-\n60-62%\n\n\nC+\n77-79%\nF\n&lt;60%\n\n\n\n\n\n\n\n\nCourse Policies\n\n\nAI Policy\nThe beta release of Dall-E-Mini in July 2022 and ChatGPT in November 2022 are among many tools using artificial intelligence. It is likely that using tools like these will become an important skill for careers in the not-too-distant future (https://www.theguardian.com/commentisfree/2023/jan/07/chatgpt-bot-excel-ai-chatbot-tech).\nIn the meantime, though, society will have to figure out when using these tools is acceptable.\nWork created by AI tools may not be considered original work and, instead, considered automated plagiarism. It is derived from previously created texts from other sources the models were trained on, yet doesn’t cite sources. AI models have built-in biases (ie, they are trained on limited underlying sources; they reproduce, rather than challenge, errors in the sources) AI tools have limitations (ie, they lack critical thinking to evaluate and reflect on criteria; they lack deductive reasoning to make judgments with incomplete information at hand; they make up or use inaccurate information and may “hallucinate” sources that do not exist)\nIn this course, all informal writing should be written without AI. The purpose of informal writing is to help you think through your ideas, connect with your lived experiences, and figure out your thoughts and opinions. Using AI here subverts that process.\nA final note: Other courses may have different AI policies, and it is important to be aware of each class’s policy.\n\n\nDISABILITIES AND ACCOMMODATIONS POLICY\nCornell College makes reasonable accommodations for persons with disabilities. Students should notify the Office of Academic Support and Advising and their course instructor of any disability-related accommodations within the first three days of the term for which the accommodations are required due to the fast pace of the block format. For more information on the documentation required to establish the need for accommodations and the process of requesting the accommodations.\n\n\nACADEMIC HONESTY POLICY\nCornell College expects all members of the Cornell community to act with academic integrity. An important aspect of academic integrity is respecting the work of others. A student is expected to explicitly acknowledge ideas, claims, observations, or data of others, unless generally known. When a piece of work is submitted for credit, a student is asserting that the submission is her or his work unless there is a citation of a specific source. If there is no appropriate acknowledgment of sources, whether intended or not, this may constitute a violation of the College’s requirement for honesty in academic work and may be treated as a case of academic dishonesty. The procedures regarding how the College deals with cases of academic dishonesty appear in The Catalog, under the heading “Academic Honesty.”\n\n\nIllness Policy\nIf you become unable to attend class for any other health reason, contact me as soon as possible.\n\n\nMandatory Reporter Reminder\nIt is my goal that you feel supported and able to share information related to your life experiences during classroom discussions, in your written work, and in any one-on-one meetings with me. You should also know that all Cornell College faculty and staff are mandatory reporters. This means that I will keep information you share with me private to the greatest extent possible. However, I am required to share information regarding sexual assault, abuse, criminal behavior, or about a student who may be a danger to themselves or to others. If you wish to speak to someone confidentially who is not a mandatory reporter, you can schedule an appointment with one of the counselors in the Ebersole Health and Wellbeing Center or contact the College Chaplain, Rev. Melea White, at mwhite@cornelllcollege.edu.",
    "crumbs": [
      "Course information",
      "Syllabus"
    ]
  },
  {
    "objectID": "slides/7-tslm.html#setup",
    "href": "slides/7-tslm.html#setup",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Setup",
    "text": "Setup\n\nlibrary(fpp3)"
  },
  {
    "objectID": "slides/7-tslm.html#multiple-regression-and-forecasting",
    "href": "slides/7-tslm.html#multiple-regression-and-forecasting",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Multiple regression and forecasting",
    "text": "Multiple regression and forecasting\n\\[y_t = \\beta_0 + \\beta_1 x_{1,t} + \\beta_2 x_{2,t} + \\cdots + \\beta_kx_{k,t} + \\varepsilon_t.\\]\n\n\\(y_t\\) is the variable we want to predict: the “response” variable\nEach \\(x_{j,t}\\) is numerical and is called a “predictor”. They are usually assumed to be known for all past and future times.\nThe coefficients \\(\\beta_1,\\dots,\\beta_k\\) measure the effect of each predictor after taking account of the effect of all other predictors in the model.\n\n\nThat is, the coefficients measure the .\n\n\\(\\varepsilon_t\\) is a white noise error term"
  },
  {
    "objectID": "slides/7-tslm.html#example-us-consumption-expenditure",
    "href": "slides/7-tslm.html#example-us-consumption-expenditure",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Example: US consumption expenditure",
    "text": "Example: US consumption expenditure\n\nus_change |&gt; autoplot(Consumption) +\n  geom_line(aes(y = Income, color = \"Income\")) +\n  geom_line(aes(y = Consumption, color = \"Consumption\")) +\n  scale_color_manual(values = c(\"Income\" = \"blue\", \"Consumption\" = \"red\")) +\n  labs(y = \"% change\", color = \"Legend\")"
  },
  {
    "objectID": "slides/7-tslm.html#example-us-consumption-expenditure-1",
    "href": "slides/7-tslm.html#example-us-consumption-expenditure-1",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Example: US consumption expenditure",
    "text": "Example: US consumption expenditure\n\nus_change |&gt; ggplot(aes(x=Income, y=Consumption)) +\n  labs(y = \"Consumption (quarterly % change)\",\n       x = \"Income (quarterly % change)\") +\n  geom_point() + geom_smooth(method=\"lm\", se=FALSE)"
  },
  {
    "objectID": "slides/7-tslm.html#example-us-consumption-expenditure-2",
    "href": "slides/7-tslm.html#example-us-consumption-expenditure-2",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Example: US consumption expenditure",
    "text": "Example: US consumption expenditure\n\nfit_cons &lt;- us_change |&gt;\n  model(lm = TSLM(Consumption ~ Income))\nreport(fit_cons)\n\nSeries: Consumption \nModel: TSLM \n\nResiduals:\n     Min       1Q   Median       3Q      Max \n-2.58236 -0.27777  0.01862  0.32330  1.42229 \n\nCoefficients:\n            Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept)  0.54454    0.05403  10.079  &lt; 2e-16 ***\nIncome       0.27183    0.04673   5.817  2.4e-08 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 0.5905 on 196 degrees of freedom\nMultiple R-squared: 0.1472, Adjusted R-squared: 0.1429\nF-statistic: 33.84 on 1 and 196 DF, p-value: 2.4022e-08"
  },
  {
    "objectID": "slides/7-tslm.html#example-us-consumption-expenditure-3",
    "href": "slides/7-tslm.html#example-us-consumption-expenditure-3",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Example: US consumption expenditure",
    "text": "Example: US consumption expenditure\n\nus_change |&gt;\n  gather(\"Measure\", \"Change\", Consumption, Income, Production, Savings, Unemployment) |&gt;\n  ggplot(aes(x = Quarter, y = Change, colour = Measure)) +\n  geom_line() +\n  facet_grid(vars(Measure), scales = \"free_y\") +\n  labs(y = \"\") +\n  guides(colour = \"none\")"
  },
  {
    "objectID": "slides/7-tslm.html#example-us-consumption-expenditure-4",
    "href": "slides/7-tslm.html#example-us-consumption-expenditure-4",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Example: US consumption expenditure",
    "text": "Example: US consumption expenditure\n\nus_change |&gt;\n  as_tibble() |&gt;\n  select(-Quarter) |&gt;\n  GGally::ggpairs()"
  },
  {
    "objectID": "slides/7-tslm.html#assumptions-for-the-linear-model",
    "href": "slides/7-tslm.html#assumptions-for-the-linear-model",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Assumptions for the linear model",
    "text": "Assumptions for the linear model\nFor forecasting purposes, we require the following assumptions:\n\n\\(\\varepsilon_t\\) have mean zero and are uncorrelated.\n\\(\\varepsilon_t\\) are uncorrelated with each \\(x_{j,t}\\).\n\n\nIt is useful to also have \\(\\varepsilon_t \\sim \\text{N}(0,\\sigma^2)\\) when producing prediction intervals or doing statistical tests."
  },
  {
    "objectID": "slides/7-tslm.html#least-squares-estimation",
    "href": "slides/7-tslm.html#least-squares-estimation",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Least squares estimation",
    "text": "Least squares estimation\n\nIn practice we need to estimate the coefficients: \\(\\beta_0,\\beta_1, \\dots, \\beta_k\\).\n\n\n\\[\\sum_{t=1}^T \\varepsilon_t^2 = \\sum_{t=1}^T (y_t -\n  \\beta_{0} - \\beta_{1} x_{1,t} - \\beta_{2} x_{2,t} - \\cdots - \\beta_{k} x_{k,t})^2\\]\n\n\nmodel(TSLM(y ~ x_1 + x_2 + ... + x_k))\n\nEstimated coefficients: \\(\\hat\\beta_0, \\dots, \\hat\\beta_k\\)"
  },
  {
    "objectID": "slides/7-tslm.html#example-us-consumption-expenditure-5",
    "href": "slides/7-tslm.html#example-us-consumption-expenditure-5",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Example: US consumption expenditure",
    "text": "Example: US consumption expenditure\n\nfit_consMR &lt;- us_change |&gt;\n  model(lm = TSLM(Consumption ~ Income + Production + Unemployment + Savings))\nreport(fit_consMR)\n\nSeries: Consumption \nModel: TSLM \n\nResiduals:\n     Min       1Q   Median       3Q      Max \n-0.90555 -0.15821 -0.03608  0.13618  1.15471 \n\nCoefficients:\n              Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept)   0.253105   0.034470   7.343 5.71e-12 ***\nIncome        0.740583   0.040115  18.461  &lt; 2e-16 ***\nProduction    0.047173   0.023142   2.038   0.0429 *  \nUnemployment -0.174685   0.095511  -1.829   0.0689 .  \nSavings      -0.052890   0.002924 -18.088  &lt; 2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 0.3102 on 193 degrees of freedom\nMultiple R-squared: 0.7683, Adjusted R-squared: 0.7635\nF-statistic:   160 on 4 and 193 DF, p-value: &lt; 2.22e-16"
  },
  {
    "objectID": "slides/7-tslm.html#fitted-values",
    "href": "slides/7-tslm.html#fitted-values",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Fitted values",
    "text": "Fitted values\n\\[\\hat{y}_t = \\hat\\beta_{0} + \\hat\\beta_{1} x_{1,t} + \\hat\\beta_{2} x_{2,t} + \\cdots + \\hat\\beta_{k} x_{k,t}\\]\n\nCodePlot\n\n\n\naugment(fit_consMR) |&gt;\n  ggplot(aes(x = Quarter)) +\n  geom_line(aes(y = Consumption, colour = \"Data\")) +\n  geom_line(aes(y = .fitted, colour = \"Fitted\")) +\n  labs(y = NULL, title = \"Percent change in US consumption expenditure\") +\n  scale_colour_manual(values = c(Data = \"black\", Fitted = \"#D55E00\")) +\n  guides(colour = guide_legend(title = NULL))"
  },
  {
    "objectID": "slides/7-tslm.html#example-us-consumption-expenditure-6",
    "href": "slides/7-tslm.html#example-us-consumption-expenditure-6",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Example: US consumption expenditure",
    "text": "Example: US consumption expenditure\n\nCodePlot\n\n\n\naugment(fit_consMR) |&gt;\n  ggplot(aes(y = .fitted, x = Consumption)) +\n  geom_point() +\n  labs(\n    y = \"Fitted (predicted values)\",\n    x = \"Data (actual values)\",\n    title = \"Percentage change in US consumption expenditure\"\n  ) +\n  geom_abline(intercept = 0, slope = 1)"
  },
  {
    "objectID": "slides/7-tslm.html#goodness-of-fit",
    "href": "slides/7-tslm.html#goodness-of-fit",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Goodness of fit",
    "text": "Goodness of fit\nCoefficient of determination\n\\[R^2 = \\frac{\\sum(\\hat{y}_{t} - \\bar{y})^2}{\\sum(y_{t}-\\bar{y})^2}\\]\n\nStandard error of the regression\n\\[\\hat{\\sigma}_e=\\sqrt{\\frac{1}{T-k-1}\\sum_{t=1}^{T}{e_t^2}}\\]\nwhere \\(k\\) is the number of predictors in the model."
  },
  {
    "objectID": "slides/7-tslm.html#multiple-regression-and-forecasting-1",
    "href": "slides/7-tslm.html#multiple-regression-and-forecasting-1",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Multiple regression and forecasting",
    "text": "Multiple regression and forecasting\nFor forecasting purposes, we require the following assumptions:\n\n\\(\\varepsilon_t\\) are uncorrelated and zero mean\n\\(\\varepsilon_t\\) are uncorrelated with each \\(x_{j,t}\\).\n\n\nIt is useful to also have \\(\\varepsilon_t \\sim \\text{N}(0,\\sigma^2)\\) when producing prediction intervals or doing statistical tests."
  },
  {
    "objectID": "slides/7-tslm.html#residual-plots",
    "href": "slides/7-tslm.html#residual-plots",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Residual plots",
    "text": "Residual plots\nUseful for spotting outliers and whether the linear model was appropriate.\n\nScatterplot of residuals \\(\\varepsilon_t\\) against each predictor \\(x_{j,t}\\).\nScatterplot residuals against the fitted values \\(\\hat y_t\\)\nExpect to see scatterplots resembling a horizontal band with no values too far from the band and no patterns such as curvature or increasing spread."
  },
  {
    "objectID": "slides/7-tslm.html#residual-patterns",
    "href": "slides/7-tslm.html#residual-patterns",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Residual patterns",
    "text": "Residual patterns\n\nIf a plot of the residuals vs any predictor in the model shows a pattern, then the relationship is nonlinear.\nIf a plot of the residuals vs any predictor not in the model shows a pattern, then the predictor should be added to the model.\nIf a plot of the residuals vs fitted values shows a pattern, then there is heteroscedasticity in the errors. (Could try a transformation.)"
  },
  {
    "objectID": "slides/7-tslm.html#trend",
    "href": "slides/7-tslm.html#trend",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Trend",
    "text": "Trend\nLinear trend\n\\[x_t = t\\]\n\n\\(t=1,2,\\dots,T\\)\nStrong assumption that trend will continue."
  },
  {
    "objectID": "slides/7-tslm.html#dummy-variables",
    "href": "slides/7-tslm.html#dummy-variables",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Dummy variables",
    "text": "Dummy variables\nIf a categorical variable takes only two values (e.g., Yes, or No), then an equivalent numerical variable can be constructed taking value 1 if yes and 0 if no. This is called a dummy variable.\n\n\n\nVariable\ndummy\n\n\n\n\nYes\n1\n\n\nYes\n1\n\n\nNo\n0\n\n\nYes\n1\n\n\nNo\n0\n\n\nNo\n0\n\n\nYes\n1\n\n\nYes\n1\n\n\nNo\n0\n\n\nNo\n0"
  },
  {
    "objectID": "slides/7-tslm.html#dummy-variables-1",
    "href": "slides/7-tslm.html#dummy-variables-1",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Dummy variables",
    "text": "Dummy variables\nIf there are more than two categories, then the variable can be coded using several dummy variables (one fewer than the total number of categories).\n\n\n\nDay\nd1\nd2\nd3\nd4\n\n\n\n\nMonday\n1\n0\n0\n0\n\n\nTuesday\n0\n1\n0\n0\n\n\nWednesday\n0\n0\n1\n0\n\n\nThursday\n0\n0\n0\n1\n\n\nFriday\n0\n0\n0\n0\n\n\nMonday\n1\n0\n0\n0\n\n\nTuesday\n0\n1\n0\n0\n\n\nWednesday\n0\n0\n1\n0\n\n\nThursday\n0\n0\n0\n1\n\n\nFriday\n0\n0\n0\n0"
  },
  {
    "objectID": "slides/7-tslm.html#beware-of-the-dummy-variable-trap",
    "href": "slides/7-tslm.html#beware-of-the-dummy-variable-trap",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Beware of the dummy variable trap!",
    "text": "Beware of the dummy variable trap!\n\nUsing one dummy for each category gives too many dummy variables!\nThe regression will then be singular and inestimable.\nEither omit the constant, or omit the dummy for one category.\nThe coefficients of the dummies are relative to the omitted category."
  },
  {
    "objectID": "slides/7-tslm.html#uses-of-dummy-variables",
    "href": "slides/7-tslm.html#uses-of-dummy-variables",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Uses of dummy variables",
    "text": "Uses of dummy variables\nSeasonal dummies\n\nFor quarterly data: use 3 dummies\nFor monthly data: use 11 dummies\nFor daily data: use 6 dummies\nWhat to do with weekly data?\n\n\nOutliers\n\nIf there is an outlier, you can use a dummy variable to remove its effect.\n\n\n\nPublic holidays\n\nFor daily data: if it is a public holiday, dummy=1, otherwise dummy=0."
  },
  {
    "objectID": "slides/7-tslm.html#beer-production-revisited-16",
    "href": "slides/7-tslm.html#beer-production-revisited-16",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Beer production revisited (1/6)",
    "text": "Beer production revisited (1/6)\n\nrecent_production &lt;- aus_production |&gt; filter(year(Quarter) &gt;= 1992)\nrecent_production |&gt; autoplot(Beer) +\n  labs(y = \"Megalitres\", title = \"Australian quarterly beer production\")\n\n\n\nRegression model\n\\[y_t = \\beta_0 + \\beta_1 t + \\beta_2d_{2,t} + \\beta_3 d_{3,t} + \\beta_4 d_{4,t} + \\varepsilon_t\\]\n\n\\(d_{i,t} = 1\\) if \\(t\\) is quarter \\(i\\) and 0 otherwise."
  },
  {
    "objectID": "slides/7-tslm.html#beer-production-revisited-26",
    "href": "slides/7-tslm.html#beer-production-revisited-26",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Beer production revisited (2/6)",
    "text": "Beer production revisited (2/6)\n\nfit_beer &lt;- recent_production |&gt; model(TSLM(Beer ~ trend() + season()))\nreport(fit_beer)\n\nSeries: Beer \nModel: TSLM \n\nResiduals:\n     Min       1Q   Median       3Q      Max \n-42.9029  -7.5995  -0.4594   7.9908  21.7895 \n\nCoefficients:\n               Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept)   441.80044    3.73353 118.333  &lt; 2e-16 ***\ntrend()        -0.34027    0.06657  -5.111 2.73e-06 ***\nseason()year2 -34.65973    3.96832  -8.734 9.10e-13 ***\nseason()year3 -17.82164    4.02249  -4.430 3.45e-05 ***\nseason()year4  72.79641    4.02305  18.095  &lt; 2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 12.23 on 69 degrees of freedom\nMultiple R-squared: 0.9243, Adjusted R-squared: 0.9199\nF-statistic: 210.7 on 4 and 69 DF, p-value: &lt; 2.22e-16"
  },
  {
    "objectID": "slides/7-tslm.html#beer-production-revisited-36",
    "href": "slides/7-tslm.html#beer-production-revisited-36",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Beer production revisited (3/6)",
    "text": "Beer production revisited (3/6)\n\naugment(fit_beer) |&gt;\n  ggplot(aes(x = Quarter)) +\n  geom_line(aes(y = Beer, colour = \"Data\")) +\n  geom_line(aes(y = .fitted, colour = \"Fitted\")) +\n  labs(y = \"Megalitres\", title = \"Australian quarterly beer production\") +\n  scale_colour_manual(values = c(Data = \"black\", Fitted = \"#D55E00\"))"
  },
  {
    "objectID": "slides/7-tslm.html#beer-production-revisited-46",
    "href": "slides/7-tslm.html#beer-production-revisited-46",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Beer production revisited (4/6)",
    "text": "Beer production revisited (4/6)\n\naugment(fit_beer) |&gt;\n  ggplot(aes(x = Beer, y = .fitted, colour = factor(quarter(Quarter)))) +\n  geom_point() +\n  labs(y = \"Fitted\", x = \"Actual values\", title = \"Quarterly beer production\") +\n  scale_colour_brewer(palette = \"Dark2\", name = \"Quarter\") +\n  geom_abline(intercept = 0, slope = 1)"
  },
  {
    "objectID": "slides/7-tslm.html#beer-production-revisited-56",
    "href": "slides/7-tslm.html#beer-production-revisited-56",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Beer production revisited (5/6)",
    "text": "Beer production revisited (5/6)\n\nfit_beer |&gt; gg_tsresiduals()"
  },
  {
    "objectID": "slides/7-tslm.html#beer-production-revisited-66",
    "href": "slides/7-tslm.html#beer-production-revisited-66",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Beer production revisited (6/6)",
    "text": "Beer production revisited (6/6)\n\nfit_beer |&gt;\n  forecast() |&gt;\n  autoplot(recent_production)"
  },
  {
    "objectID": "slides/7-tslm.html#intervention-variables",
    "href": "slides/7-tslm.html#intervention-variables",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Intervention variables",
    "text": "Intervention variables\nSpikes\n\nEquivalent to a dummy variable for handling an outlier.\n\n\nSteps\n\nVariable takes value 0 before the intervention and 1 afterwards.\n\n\n\nChange of slope\n\nVariables take values 0 before the intervention and values \\(\\{1,2,3,\\dots\\}\\) afterwards."
  },
  {
    "objectID": "slides/7-tslm.html#holidays",
    "href": "slides/7-tslm.html#holidays",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Holidays",
    "text": "Holidays\nFor monthly data\n\nChristmas: always in December so part of monthly seasonal effect\nEaster: use a dummy variable \\(v_t=1\\) if any part of Easter is in that month, \\(v_t=0\\) otherwise.\nRamadan and Chinese new year similar."
  },
  {
    "objectID": "slides/7-tslm.html#distributed-lags",
    "href": "slides/7-tslm.html#distributed-lags",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Distributed lags",
    "text": "Distributed lags\nLagged values of a predictor.\nExample: \\(x\\) is advertising which has a delayed effect\n\\[\\begin{align*}\n  x_{1} &= \\text{advertising for previous month;} \\\\\n  x_{2} &= \\text{advertising for two months previously;} \\\\\n        & \\vdots \\\\\n  x_{m} &= \\text{advertising for $m$ months previously.}\n\\end{align*}\\]"
  },
  {
    "objectID": "slides/7-tslm.html#fourier-series",
    "href": "slides/7-tslm.html#fourier-series",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Fourier series",
    "text": "Fourier series\nPeriodic seasonality can be handled using pairs of Fourier terms:\n\\[s_{k}(t) = \\sin\\left(\\frac{2\\pi k t}{m}\\right)\\qquad c_{k}(t) = \\cos\\left(\\frac{2\\pi k t}{m}\\right)\\]\n\\[y_t = a + bt + \\sum_{k=1}^K \\left[\\alpha_k s_k(t) + \\beta_k c_k(t)\\right] + \\varepsilon_t\\] where \\(m\\) is the seasonal period.\n\nEvery periodic function can be approximated by sums of sin and cos terms for large enough \\(K\\).\nChoose \\(K\\) by minimizing AICc.\nCalled “harmonic regression”\n\n\nTSLM(y ~ trend() + fourier(K))"
  },
  {
    "objectID": "slides/7-tslm.html#harmonic-regression-beer-production",
    "href": "slides/7-tslm.html#harmonic-regression-beer-production",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Harmonic regression: beer production",
    "text": "Harmonic regression: beer production\n\nfourier_beer &lt;- recent_production |&gt; model(TSLM(Beer ~ trend() + fourier(K = 2)))\nreport(fourier_beer)\n\nSeries: Beer \nModel: TSLM \n\nResiduals:\n     Min       1Q   Median       3Q      Max \n-42.9029  -7.5995  -0.4594   7.9908  21.7895 \n\nCoefficients:\n                    Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept)        446.87920    2.87321 155.533  &lt; 2e-16 ***\ntrend()             -0.34027    0.06657  -5.111 2.73e-06 ***\nfourier(K = 2)C1_4   8.91082    2.01125   4.430 3.45e-05 ***\nfourier(K = 2)S1_4 -53.72807    2.01125 -26.714  &lt; 2e-16 ***\nfourier(K = 2)C2_4 -13.98958    1.42256  -9.834 9.26e-15 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 12.23 on 69 degrees of freedom\nMultiple R-squared: 0.9243, Adjusted R-squared: 0.9199\nF-statistic: 210.7 on 4 and 69 DF, p-value: &lt; 2.22e-16"
  },
  {
    "objectID": "slides/7-tslm.html#harmonic-regression-eating-out-expenditure",
    "href": "slides/7-tslm.html#harmonic-regression-eating-out-expenditure",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Harmonic regression: eating-out expenditure",
    "text": "Harmonic regression: eating-out expenditure\n\naus_cafe &lt;- aus_retail |&gt;\n  filter(Industry == \"Cafes, restaurants and takeaway food services\",\n         year(Month) %in% 2004:2018) |&gt;\n  summarise(Turnover = sum(Turnover))\naus_cafe |&gt; autoplot(Turnover)"
  },
  {
    "objectID": "slides/7-tslm.html#harmonic-regression-eating-out-expenditure-17",
    "href": "slides/7-tslm.html#harmonic-regression-eating-out-expenditure-17",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Harmonic regression: eating-out expenditure (1/7)",
    "text": "Harmonic regression: eating-out expenditure (1/7)\n\nfit &lt;- aus_cafe |&gt;\n  model(\n    K1 = TSLM(log(Turnover) ~ trend() + fourier(K = 1)),\n    K2 = TSLM(log(Turnover) ~ trend() + fourier(K = 2)),\n    K3 = TSLM(log(Turnover) ~ trend() + fourier(K = 3)),\n    K4 = TSLM(log(Turnover) ~ trend() + fourier(K = 4)),\n    K5 = TSLM(log(Turnover) ~ trend() + fourier(K = 5)),\n    K6 = TSLM(log(Turnover) ~ trend() + fourier(K = 6))\n  )"
  },
  {
    "objectID": "slides/7-tslm.html#harmonic-regression-eating-out-expenditure-27",
    "href": "slides/7-tslm.html#harmonic-regression-eating-out-expenditure-27",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Harmonic regression: eating-out expenditure (2/7)",
    "text": "Harmonic regression: eating-out expenditure (2/7)"
  },
  {
    "objectID": "slides/7-tslm.html#harmonic-regression-eating-out-expenditure-37",
    "href": "slides/7-tslm.html#harmonic-regression-eating-out-expenditure-37",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Harmonic regression: eating-out expenditure (3/7)",
    "text": "Harmonic regression: eating-out expenditure (3/7)"
  },
  {
    "objectID": "slides/7-tslm.html#harmonic-regression-eating-out-expenditure-47",
    "href": "slides/7-tslm.html#harmonic-regression-eating-out-expenditure-47",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Harmonic regression: eating-out expenditure (4/7)",
    "text": "Harmonic regression: eating-out expenditure (4/7)"
  },
  {
    "objectID": "slides/7-tslm.html#harmonic-regression-eating-out-expenditure-57",
    "href": "slides/7-tslm.html#harmonic-regression-eating-out-expenditure-57",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Harmonic regression: eating-out expenditure (5/7)",
    "text": "Harmonic regression: eating-out expenditure (5/7)"
  },
  {
    "objectID": "slides/7-tslm.html#harmonic-regression-eating-out-expenditure-67",
    "href": "slides/7-tslm.html#harmonic-regression-eating-out-expenditure-67",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Harmonic regression: eating-out expenditure (6/7)",
    "text": "Harmonic regression: eating-out expenditure (6/7)"
  },
  {
    "objectID": "slides/7-tslm.html#harmonic-regression-eating-out-expenditure-77",
    "href": "slides/7-tslm.html#harmonic-regression-eating-out-expenditure-77",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Harmonic regression: eating-out expenditure (7/7)",
    "text": "Harmonic regression: eating-out expenditure (7/7)"
  },
  {
    "objectID": "slides/7-tslm.html#fourier-series-1",
    "href": "slides/7-tslm.html#fourier-series-1",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Fourier series",
    "text": "Fourier series\nPeriodic seasonality can be handled using pairs of Fourier terms: \\[s_{k}(t) = \\sin\\left(\\frac{2\\pi k t}{m}\\right)\\qquad c_{k}(t) = \\cos\\left(\\frac{2\\pi k t}{m}\\right)\\] \\[y_t = a + bt + \\sum_{k=1}^K \\left[\\alpha_k s_k(t) + \\beta_k c_k(t)\\right] + \\varepsilon_t\\]\n\nEvery periodic function can be approximated by sums of sin and cos terms for large enough \\(K\\).\n\\(K \\le m/2\\)\n\\(m\\) can be non-integer\nParticularly useful for large \\(m\\)."
  },
  {
    "objectID": "slides/7-tslm.html#comparing-regression-models",
    "href": "slides/7-tslm.html#comparing-regression-models",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Comparing regression models",
    "text": "Comparing regression models\nComputer output for regression will always give the \\(R^2\\) value. This is a useful summary of the model.\n\nIt is equal to the square of the correlation between \\(y\\) and \\(\\hat y\\).\nIt is often called the “coefficient of determination”.\nIt can also be calculated as follows:\n\n\n\\[R^2 = \\frac{\\sum(\\hat{y}_t - \\bar{y})^2}{\\sum(y_t-\\bar{y})^2}\\]\n\nIt is the proportion of variance accounted for (explained) by the predictors."
  },
  {
    "objectID": "slides/7-tslm.html#comparing-regression-models-1",
    "href": "slides/7-tslm.html#comparing-regression-models-1",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Comparing regression models",
    "text": "Comparing regression models\nHowever …\n\n\\(R^2\\) does not allow for “degrees of freedom”.\nAdding any variable tends to increase the value of \\(R^2\\), even if that variable is irrelevant.\n\n\nTo overcome this problem, we can use adjusted \\(R^2\\):\n\\[\\bar{R}^2 = 1-(1-R^2)\\frac{T-1}{T-k-1}\\]\nwhere \\(k=\\) no. predictors and \\(T=\\) no. observations.\n\n\n\n\n\n\n\n\nNote\n\n\nMaximizing \\(\\bar{R}^2\\) is equivalent to minimizing \\(\\hat\\sigma^2\\).\n\\[\\hat{\\sigma}^2 = \\frac{1}{T-k-1}\\sum_{t=1}^T \\varepsilon_t^2\\]"
  },
  {
    "objectID": "slides/7-tslm.html#akaikes-information-criterion",
    "href": "slides/7-tslm.html#akaikes-information-criterion",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Akaike’s Information Criterion",
    "text": "Akaike’s Information Criterion\n\\[\\text{AIC} = -2\\log(L) + 2(k+2)\\]\nwhere \\(L\\) is the likelihood and \\(k\\) is the number of predictors in the model.\n\nAIC penalizes terms more heavily than \\(\\bar{R}^2\\).\nMinimizing the AIC is asymptotically equivalent to minimizing MSE via leave-one-out cross-validation (for any linear regression)."
  },
  {
    "objectID": "slides/7-tslm.html#corrected-aic",
    "href": "slides/7-tslm.html#corrected-aic",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Corrected AIC",
    "text": "Corrected AIC\nFor small values of \\(T\\), the AIC tends to select too many predictors, and so a bias-corrected version of the AIC has been developed.\n\\[\\text{AIC}_{\\text{C}} = \\text{AIC} + \\frac{2(k+2)(k+3)}{T-k-3}\\]\n\nAs with the AIC, the AIC\\(_{\\text{C}}\\) should be minimized."
  },
  {
    "objectID": "slides/7-tslm.html#bayesian-information-criterion",
    "href": "slides/7-tslm.html#bayesian-information-criterion",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Bayesian Information Criterion",
    "text": "Bayesian Information Criterion\n\\[\\text{BIC} = -2\\log(L) + (k+2)\\log(T)\\]\nwhere \\(L\\) is the likelihood and \\(k\\) is the number of predictors in the model.\n\nBIC penalizes terms more heavily than AIC\nAlso called SBIC and SC.\nMinimizing BIC is asymptotically equivalent to leave-\\(v\\)-out cross-validation when \\(v = T[1-1/(log(T)-1)]\\)."
  },
  {
    "objectID": "slides/7-tslm.html#harmonic-regression-eating-out-expenditure-again-18",
    "href": "slides/7-tslm.html#harmonic-regression-eating-out-expenditure-again-18",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Harmonic regression: eating-out expenditure again (1/8)",
    "text": "Harmonic regression: eating-out expenditure again (1/8)\n\naus_cafe &lt;- aus_retail |&gt;\n  filter(Industry == \"Cafes, restaurants and takeaway food services\",\n         year(Month) %in% 2004:2018) |&gt;\n  summarise(Turnover = sum(Turnover))\naus_cafe |&gt; autoplot(Turnover)"
  },
  {
    "objectID": "slides/7-tslm.html#harmonic-regression-eating-out-expenditure-again-28",
    "href": "slides/7-tslm.html#harmonic-regression-eating-out-expenditure-again-28",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Harmonic regression: eating-out expenditure again (2/8)",
    "text": "Harmonic regression: eating-out expenditure again (2/8)\n\nfit &lt;- aus_cafe |&gt;\n  model(\n    K1 = TSLM(log(Turnover) ~ trend() + fourier(K = 1)),\n    K2 = TSLM(log(Turnover) ~ trend() + fourier(K = 2)),\n    K3 = TSLM(log(Turnover) ~ trend() + fourier(K = 3)),\n    K4 = TSLM(log(Turnover) ~ trend() + fourier(K = 4)),\n    K5 = TSLM(log(Turnover) ~ trend() + fourier(K = 5)),\n    K6 = TSLM(log(Turnover) ~ trend() + fourier(K = 6))\n  )\nglance(fit) |&gt; select(.model, r_squared, adj_r_squared, CV, AICc)\n\n# A tibble: 6 × 5\n  .model r_squared adj_r_squared      CV   AICc\n  &lt;chr&gt;      &lt;dbl&gt;         &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;\n1 K1         0.962         0.962 0.00238 -1085.\n2 K2         0.966         0.965 0.00220 -1099.\n3 K3         0.976         0.975 0.00157 -1160.\n4 K4         0.980         0.979 0.00138 -1183.\n5 K5         0.985         0.984 0.00104 -1234.\n6 K6         0.985         0.984 0.00105 -1232."
  },
  {
    "objectID": "slides/7-tslm.html#harmonic-regression-eating-out-expenditure-again-38",
    "href": "slides/7-tslm.html#harmonic-regression-eating-out-expenditure-again-38",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Harmonic regression: eating-out expenditure again (3/8)",
    "text": "Harmonic regression: eating-out expenditure again (3/8)"
  },
  {
    "objectID": "slides/7-tslm.html#harmonic-regression-eating-out-expenditure-again-48",
    "href": "slides/7-tslm.html#harmonic-regression-eating-out-expenditure-again-48",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Harmonic regression: eating-out expenditure again (4/8)",
    "text": "Harmonic regression: eating-out expenditure again (4/8)"
  },
  {
    "objectID": "slides/7-tslm.html#harmonic-regression-eating-out-expenditure-again-58",
    "href": "slides/7-tslm.html#harmonic-regression-eating-out-expenditure-again-58",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Harmonic regression: eating-out expenditure again (5/8)",
    "text": "Harmonic regression: eating-out expenditure again (5/8)"
  },
  {
    "objectID": "slides/7-tslm.html#harmonic-regression-eating-out-expenditure-again-68",
    "href": "slides/7-tslm.html#harmonic-regression-eating-out-expenditure-again-68",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Harmonic regression: eating-out expenditure again (6/8)",
    "text": "Harmonic regression: eating-out expenditure again (6/8)"
  },
  {
    "objectID": "slides/7-tslm.html#harmonic-regression-eating-out-expenditure-again-78",
    "href": "slides/7-tslm.html#harmonic-regression-eating-out-expenditure-again-78",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Harmonic regression: eating-out expenditure again (7/8)",
    "text": "Harmonic regression: eating-out expenditure again (7/8)"
  },
  {
    "objectID": "slides/7-tslm.html#harmonic-regression-eating-out-expenditure-again-88",
    "href": "slides/7-tslm.html#harmonic-regression-eating-out-expenditure-again-88",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Harmonic regression: eating-out expenditure again (8/8)",
    "text": "Harmonic regression: eating-out expenditure again (8/8)"
  },
  {
    "objectID": "slides/7-tslm.html#ex-ante-versus-ex-post-forecasts",
    "href": "slides/7-tslm.html#ex-ante-versus-ex-post-forecasts",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Ex-ante versus ex-post forecasts",
    "text": "Ex-ante versus ex-post forecasts\n\nEx ante forecasts are made using only information available in advance.\n\nrequire forecasts of predictors\n\nEx post forecasts are made using later information on the predictors.\n\nuseful for studying behavior of forecasting models.\n\ntrend, seasonal and calendar variables are all known in advance, so these don’t need to be forecast."
  },
  {
    "objectID": "slides/7-tslm.html#beer-production",
    "href": "slides/7-tslm.html#beer-production",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Beer production",
    "text": "Beer production\n\nrecent_production &lt;- aus_production |&gt; filter(year(Quarter) &gt;= 1992)\nrecent_production |&gt; model(TSLM(Beer ~ trend() + season())) |&gt; \n   forecast() |&gt; autoplot(recent_production)"
  },
  {
    "objectID": "slides/7-tslm.html#scenario-based-forecasting",
    "href": "slides/7-tslm.html#scenario-based-forecasting",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Scenario based forecasting",
    "text": "Scenario based forecasting\n\nAssumes possible scenarios for the predictor variables\nPrediction intervals for scenario based forecasts do not include the uncertainty associated with the future values of the predictor variables."
  },
  {
    "objectID": "slides/7-tslm.html#us-consumption",
    "href": "slides/7-tslm.html#us-consumption",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "US Consumption",
    "text": "US Consumption\n\nfit_consBest &lt;- us_change |&gt;\n  model(\n    TSLM(Consumption ~ Income + Savings + Unemployment)\n  )\n\nfuture_scenarios &lt;- scenarios(\n  Increase = new_data(us_change, 4) |&gt;\n    mutate(Income = 1, Savings = 0.5, Unemployment = 0),\n  Decrease = new_data(us_change, 4) |&gt;\n    mutate(Income = -1, Savings = -0.5, Unemployment = 0),\n  names_to = \"Scenario\"\n)\n\nfc &lt;- forecast(fit_consBest, new_data = future_scenarios)"
  },
  {
    "objectID": "slides/7-tslm.html#us-consumption-1",
    "href": "slides/7-tslm.html#us-consumption-1",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "US Consumption",
    "text": "US Consumption\n\nus_change |&gt; autoplot(Consumption) +\n  labs(y = \"% change in US consumption\") +\n  autolayer(fc) +\n  labs(title = \"US consumption\", y = \"% change\")"
  },
  {
    "objectID": "slides/7-tslm.html#building-a-predictive-regression-model",
    "href": "slides/7-tslm.html#building-a-predictive-regression-model",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Building a predictive regression model",
    "text": "Building a predictive regression model\n\nIf getting forecasts of predictors is difficult, you can use lagged predictors instead.\n\n\n\\[y_{t+h}=\\beta_0+\\beta_1x_{1,t}+\\dots+\\beta_kx_{k,t}+\\varepsilon_{t+h}\\]\n\nA different model for each forecast horizon \\(h\\)."
  },
  {
    "objectID": "slides/7-tslm.html#nonlinear-regression",
    "href": "slides/7-tslm.html#nonlinear-regression",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Nonlinear regression",
    "text": "Nonlinear regression\nA log-log functional form\n\\[\\log y=\\beta_0+\\beta_1 \\log x +\\varepsilon\\]\nwhere \\(\\beta_1\\) is interpreted as an elasticity (the average percentage change in \\(y\\) resulting from a \\(1\\%\\) increase in \\(x\\)).\n\nalternative specifications: log-linear, linear-log.\nuse \\(\\log(x+1)\\) if required."
  },
  {
    "objectID": "slides/7-tslm.html#piecewise-linear-and-regression-splines-12",
    "href": "slides/7-tslm.html#piecewise-linear-and-regression-splines-12",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Piecewise linear and regression splines (1/2)",
    "text": "Piecewise linear and regression splines (1/2)\n\\[y=f(x) +\\varepsilon\\] where \\(f\\) is a non-linear function.\n\nFor piecewise linear let \\(x_1=x\\) and\n\n\n\\[\\begin{align*}\n  x_{2} = (x-c)_+ &= \\left\\{\n             \\begin{array}{ll}\n               0 & \\text{if } x &lt; c\\\\\n               x-c &  \\text{if } x \\ge c.\n             \\end{array}\\right.\n\\end{align*}\\]"
  },
  {
    "objectID": "slides/7-tslm.html#piecewise-linear-and-regression-splines-22",
    "href": "slides/7-tslm.html#piecewise-linear-and-regression-splines-22",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Piecewise linear and regression splines (2/2)",
    "text": "Piecewise linear and regression splines (2/2)\n\nIn general, Linear Regression Splines\n\n\n\\[x_1=x~~~x_2=(x-c_1)_+~~~\\ldots~~~x_k=(x-c_{k-1})_+\\]\nwhere \\(c_1,\\ldots,c_{k-1}\\) are knots.\n\nNeed to select knots: can be difficult and arbitrary.\nAutomatic knot selection algorithms very slow.\nUsing piecewise cubics achieves a smoother result.\n\n\n\n\n\n\n\n\n\nWarning\n\n\nBetter fit but forecasting outside the range of the historical data is even more unreliable."
  },
  {
    "objectID": "slides/7-tslm.html#nonlinear-trends",
    "href": "slides/7-tslm.html#nonlinear-trends",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Nonlinear trends",
    "text": "Nonlinear trends\nPiecewise linear trend with bend at \\(\\tau\\)\n\n\\[\\begin{align*}\nx_{1,t} &= t \\\\\nx_{2,t} &= \\left\\{ \\begin{array}{ll}\n  0 & t &lt;\\tau\\\\\n  (t-\\tau) & t \\ge \\tau\n\\end{array}\\right.\n\\end{align*}\\]\n\n\nQuadratic or higher order trend\n\\[x_{1,t} =t,\\quad x_{2,t}=t^2,\\quad \\dots\\]\n\n\n\n\n\n\n\n\nWarning\n\n\nNOT RECOMMENDED"
  },
  {
    "objectID": "slides/7-tslm.html#example-boston-marathon-winning-times-14",
    "href": "slides/7-tslm.html#example-boston-marathon-winning-times-14",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Example: Boston marathon winning times (1/4)",
    "text": "Example: Boston marathon winning times (1/4)\n\nmarathon &lt;- boston_marathon |&gt;\n  filter(Event == \"Men's open division\") |&gt;\n  select(-Event) |&gt;\n  mutate(Minutes = as.numeric(Time) / 60)\nmarathon |&gt; autoplot(Minutes) + labs(y = \"Winning times in minutes\")"
  },
  {
    "objectID": "slides/7-tslm.html#example-boston-marathon-winning-times-24",
    "href": "slides/7-tslm.html#example-boston-marathon-winning-times-24",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Example: Boston marathon winning times (2/4)",
    "text": "Example: Boston marathon winning times (2/4)\n\nfit_trends &lt;- marathon |&gt;\n  model(\n    # Linear trend\n    linear = TSLM(Minutes ~ trend()),\n    # Exponential trend\n    exponential = TSLM(log(Minutes) ~ trend()),\n    # Piecewise linear trend\n    piecewise = TSLM(Minutes ~ trend(knots = c(1940, 1980)))\n  )\n\n\nfit_trends\n\n# A mable: 1 x 3\n   linear exponential piecewise\n  &lt;model&gt;     &lt;model&gt;   &lt;model&gt;\n1  &lt;TSLM&gt;      &lt;TSLM&gt;    &lt;TSLM&gt;"
  },
  {
    "objectID": "slides/7-tslm.html#example-boston-marathon-winning-times-34",
    "href": "slides/7-tslm.html#example-boston-marathon-winning-times-34",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Example: Boston marathon winning times (3/4)",
    "text": "Example: Boston marathon winning times (3/4)\n\nfit_trends |&gt;\n  forecast(h = 10) |&gt;\n  autoplot(marathon)\n\n\nCodePlot\n\n\n\nfc_trends &lt;- fit_trends |&gt; forecast(h = 10)\nmarathon |&gt;\n  autoplot(Minutes) +\n  geom_line(\n    data = fitted(fit_trends),\n    aes(y = .fitted, colour = .model)\n  ) +\n  autolayer(fc_trends, alpha = 0.5, level = 95) +\n  labs(\n    y = \"Minutes\",\n    title = \"Boston marathon winning times\"\n  )"
  },
  {
    "objectID": "slides/7-tslm.html#example-boston-marathon-winning-times-44",
    "href": "slides/7-tslm.html#example-boston-marathon-winning-times-44",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Example: Boston marathon winning times (4/4)",
    "text": "Example: Boston marathon winning times (4/4)\n\nfit_trends |&gt;\n  select(piecewise) |&gt;\n  gg_tsresiduals()"
  },
  {
    "objectID": "slides/7-tslm.html#correlation-is-not-causation",
    "href": "slides/7-tslm.html#correlation-is-not-causation",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Correlation is not causation",
    "text": "Correlation is not causation\n\nWhen \\(x\\) is useful for predicting \\(y\\), it is not necessarily causing \\(y\\).\ne.g., predict number of swimmers \\(y\\) using number of ice-creams sold \\(x\\).\nCorrelations are useful for forecasting, even when there is no causality.\nBetter models usually involve causal relationships (e.g., temperature \\(x\\) and people \\(z\\) to predict swimmers \\(y\\))."
  },
  {
    "objectID": "slides/7-tslm.html#multicollinearity",
    "href": "slides/7-tslm.html#multicollinearity",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Multicollinearity",
    "text": "Multicollinearity\nIn regression analysis, multicollinearity occurs when:\n\nTwo predictors are highly correlated (i.e., the correlation between them is close to \\(\\pm1\\)).\nA linear combination of some of the predictors is highly correlated with another predictor.\nA linear combination of one subset of predictors is highly correlated with a linear combination of another subset of predictors."
  },
  {
    "objectID": "slides/7-tslm.html#multicollinearity-1",
    "href": "slides/7-tslm.html#multicollinearity-1",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Multicollinearity",
    "text": "Multicollinearity\nIf multicollinearity exists\n\nthe numerical estimates of coefficients may be wrong (worse in Excel than in a statistics package)\ndon’t rely on the \\(p\\)-values to determine significance.\nthere is no problem with model predictions provided the predictors used for forecasting are within the range used for fitting.\nomitting variables can help.\ncombining variables can help."
  },
  {
    "objectID": "slides/7-tslm_o.html",
    "href": "slides/7-tslm_o.html",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "",
    "text": "library(fpp3)"
  },
  {
    "objectID": "slides/7-tslm_o.html#setup",
    "href": "slides/7-tslm_o.html#setup",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "",
    "text": "library(fpp3)"
  },
  {
    "objectID": "slides/7-tslm_o.html#multiple-regression-and-forecasting",
    "href": "slides/7-tslm_o.html#multiple-regression-and-forecasting",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Multiple regression and forecasting",
    "text": "Multiple regression and forecasting\n\\[y_t = \\beta_0 + \\beta_1 x_{1,t} + \\beta_2 x_{2,t} + \\cdots + \\beta_kx_{k,t} + \\varepsilon_t.\\]\n\n\\(y_t\\) is the variable we want to predict: the “response” variable\nEach \\(x_{j,t}\\) is numerical and is called a “predictor”. They are usually assumed to be known for all past and future times.\nThe coefficients \\(\\beta_1,\\dots,\\beta_k\\) measure the effect of each predictor after taking account of the effect of all other predictors in the model.\n\n. . .\nThat is, the coefficients measure the .\n\n\\(\\varepsilon_t\\) is a white noise error term"
  },
  {
    "objectID": "slides/7-tslm_o.html#example-us-consumption-expenditure",
    "href": "slides/7-tslm_o.html#example-us-consumption-expenditure",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Example: US consumption expenditure",
    "text": "Example: US consumption expenditure\n\nus_change |&gt; autoplot(Consumption) +\n  geom_line(aes(y = Income, color = \"Income\")) +\n  geom_line(aes(y = Consumption, color = \"Consumption\")) +\n  scale_color_manual(values = c(\"Income\" = \"blue\", \"Consumption\" = \"red\")) +\n  labs(y = \"% change\", color = \"Legend\")"
  },
  {
    "objectID": "slides/7-tslm_o.html#example-us-consumption-expenditure-1",
    "href": "slides/7-tslm_o.html#example-us-consumption-expenditure-1",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Example: US consumption expenditure",
    "text": "Example: US consumption expenditure\n\nus_change |&gt; ggplot(aes(x=Income, y=Consumption)) +\n  labs(y = \"Consumption (quarterly % change)\",\n       x = \"Income (quarterly % change)\") +\n  geom_point() + geom_smooth(method=\"lm\", se=FALSE)"
  },
  {
    "objectID": "slides/7-tslm_o.html#example-us-consumption-expenditure-2",
    "href": "slides/7-tslm_o.html#example-us-consumption-expenditure-2",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Example: US consumption expenditure",
    "text": "Example: US consumption expenditure\n\nfit_cons &lt;- us_change |&gt;\n  model(lm = TSLM(Consumption ~ Income))\nreport(fit_cons)\n\nSeries: Consumption \nModel: TSLM \n\nResiduals:\n     Min       1Q   Median       3Q      Max \n-2.58236 -0.27777  0.01862  0.32330  1.42229 \n\nCoefficients:\n            Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept)  0.54454    0.05403  10.079  &lt; 2e-16 ***\nIncome       0.27183    0.04673   5.817  2.4e-08 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 0.5905 on 196 degrees of freedom\nMultiple R-squared: 0.1472, Adjusted R-squared: 0.1429\nF-statistic: 33.84 on 1 and 196 DF, p-value: 2.4022e-08"
  },
  {
    "objectID": "slides/7-tslm_o.html#example-us-consumption-expenditure-3",
    "href": "slides/7-tslm_o.html#example-us-consumption-expenditure-3",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Example: US consumption expenditure",
    "text": "Example: US consumption expenditure\n\nus_change |&gt;\n  gather(\"Measure\", \"Change\", Consumption, Income, Production, Savings, Unemployment) |&gt;\n  ggplot(aes(x = Quarter, y = Change, colour = Measure)) +\n  geom_line() +\n  facet_grid(vars(Measure), scales = \"free_y\") +\n  labs(y = \"\") +\n  guides(colour = \"none\")"
  },
  {
    "objectID": "slides/7-tslm_o.html#example-us-consumption-expenditure-4",
    "href": "slides/7-tslm_o.html#example-us-consumption-expenditure-4",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Example: US consumption expenditure",
    "text": "Example: US consumption expenditure\n\nus_change |&gt;\n  as_tibble() |&gt;\n  select(-Quarter) |&gt;\n  GGally::ggpairs()"
  },
  {
    "objectID": "slides/7-tslm_o.html#assumptions-for-the-linear-model",
    "href": "slides/7-tslm_o.html#assumptions-for-the-linear-model",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Assumptions for the linear model",
    "text": "Assumptions for the linear model\nFor forecasting purposes, we require the following assumptions:\n\n\\(\\varepsilon_t\\) have mean zero and are uncorrelated.\n\\(\\varepsilon_t\\) are uncorrelated with each \\(x_{j,t}\\).\n\n. . .\nIt is useful to also have \\(\\varepsilon_t \\sim \\text{N}(0,\\sigma^2)\\) when producing prediction intervals or doing statistical tests."
  },
  {
    "objectID": "slides/7-tslm_o.html#least-squares-estimation",
    "href": "slides/7-tslm_o.html#least-squares-estimation",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Least squares estimation",
    "text": "Least squares estimation\n\nIn practice we need to estimate the coefficients: \\(\\beta_0,\\beta_1, \\dots, \\beta_k\\).\n\n. . .\n\\[\\sum_{t=1}^T \\varepsilon_t^2 = \\sum_{t=1}^T (y_t -\n  \\beta_{0} - \\beta_{1} x_{1,t} - \\beta_{2} x_{2,t} - \\cdots - \\beta_{k} x_{k,t})^2\\]\n. . .\nmodel(TSLM(y ~ x_1 + x_2 + ... + x_k))\n\nEstimated coefficients: \\(\\hat\\beta_0, \\dots, \\hat\\beta_k\\)"
  },
  {
    "objectID": "slides/7-tslm_o.html#example-us-consumption-expenditure-5",
    "href": "slides/7-tslm_o.html#example-us-consumption-expenditure-5",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Example: US consumption expenditure",
    "text": "Example: US consumption expenditure\n\nfit_consMR &lt;- us_change |&gt;\n  model(lm = TSLM(Consumption ~ Income + Production + Unemployment + Savings))\nreport(fit_consMR)\n\nSeries: Consumption \nModel: TSLM \n\nResiduals:\n     Min       1Q   Median       3Q      Max \n-0.90555 -0.15821 -0.03608  0.13618  1.15471 \n\nCoefficients:\n              Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept)   0.253105   0.034470   7.343 5.71e-12 ***\nIncome        0.740583   0.040115  18.461  &lt; 2e-16 ***\nProduction    0.047173   0.023142   2.038   0.0429 *  \nUnemployment -0.174685   0.095511  -1.829   0.0689 .  \nSavings      -0.052890   0.002924 -18.088  &lt; 2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 0.3102 on 193 degrees of freedom\nMultiple R-squared: 0.7683, Adjusted R-squared: 0.7635\nF-statistic:   160 on 4 and 193 DF, p-value: &lt; 2.22e-16"
  },
  {
    "objectID": "slides/7-tslm_o.html#fitted-values",
    "href": "slides/7-tslm_o.html#fitted-values",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Fitted values",
    "text": "Fitted values\n\\[\\hat{y}_t = \\hat\\beta_{0} + \\hat\\beta_{1} x_{1,t} + \\hat\\beta_{2} x_{2,t} + \\cdots + \\hat\\beta_{k} x_{k,t}\\]\n\nCodePlot\n\n\n\naugment(fit_consMR) |&gt;\n  ggplot(aes(x = Quarter)) +\n  geom_line(aes(y = Consumption, colour = \"Data\")) +\n  geom_line(aes(y = .fitted, colour = \"Fitted\")) +\n  labs(y = NULL, title = \"Percent change in US consumption expenditure\") +\n  scale_colour_manual(values = c(Data = \"black\", Fitted = \"#D55E00\")) +\n  guides(colour = guide_legend(title = NULL))"
  },
  {
    "objectID": "slides/7-tslm_o.html#example-us-consumption-expenditure-6",
    "href": "slides/7-tslm_o.html#example-us-consumption-expenditure-6",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Example: US consumption expenditure",
    "text": "Example: US consumption expenditure\n\nCodePlot\n\n\n\naugment(fit_consMR) |&gt;\n  ggplot(aes(y = .fitted, x = Consumption)) +\n  geom_point() +\n  labs(\n    y = \"Fitted (predicted values)\",\n    x = \"Data (actual values)\",\n    title = \"Percentage change in US consumption expenditure\"\n  ) +\n  geom_abline(intercept = 0, slope = 1)"
  },
  {
    "objectID": "slides/7-tslm_o.html#goodness-of-fit",
    "href": "slides/7-tslm_o.html#goodness-of-fit",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Goodness of fit",
    "text": "Goodness of fit\nCoefficient of determination\n\\[R^2 = \\frac{\\sum(\\hat{y}_{t} - \\bar{y})^2}{\\sum(y_{t}-\\bar{y})^2}\\]\n. . .\nStandard error of the regression\n\\[\\hat{\\sigma}_e=\\sqrt{\\frac{1}{T-k-1}\\sum_{t=1}^{T}{e_t^2}}\\]\nwhere \\(k\\) is the number of predictors in the model."
  },
  {
    "objectID": "slides/7-tslm_o.html#multiple-regression-and-forecasting-1",
    "href": "slides/7-tslm_o.html#multiple-regression-and-forecasting-1",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Multiple regression and forecasting",
    "text": "Multiple regression and forecasting\nFor forecasting purposes, we require the following assumptions:\n\n\\(\\varepsilon_t\\) are uncorrelated and zero mean\n\\(\\varepsilon_t\\) are uncorrelated with each \\(x_{j,t}\\).\n\n. . .\nIt is useful to also have \\(\\varepsilon_t \\sim \\text{N}(0,\\sigma^2)\\) when producing prediction intervals or doing statistical tests."
  },
  {
    "objectID": "slides/7-tslm_o.html#residual-plots",
    "href": "slides/7-tslm_o.html#residual-plots",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Residual plots",
    "text": "Residual plots\nUseful for spotting outliers and whether the linear model was appropriate.\n\nScatterplot of residuals \\(\\varepsilon_t\\) against each predictor \\(x_{j,t}\\).\nScatterplot residuals against the fitted values \\(\\hat y_t\\)\nExpect to see scatterplots resembling a horizontal band with no values too far from the band and no patterns such as curvature or increasing spread."
  },
  {
    "objectID": "slides/7-tslm_o.html#residual-patterns",
    "href": "slides/7-tslm_o.html#residual-patterns",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Residual patterns",
    "text": "Residual patterns\n\nIf a plot of the residuals vs any predictor in the model shows a pattern, then the relationship is nonlinear.\nIf a plot of the residuals vs any predictor not in the model shows a pattern, then the predictor should be added to the model.\nIf a plot of the residuals vs fitted values shows a pattern, then there is heteroscedasticity in the errors. (Could try a transformation.)"
  },
  {
    "objectID": "slides/7-tslm_o.html#trend",
    "href": "slides/7-tslm_o.html#trend",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Trend",
    "text": "Trend\nLinear trend\n\\[x_t = t\\]\n\n\\(t=1,2,\\dots,T\\)\nStrong assumption that trend will continue."
  },
  {
    "objectID": "slides/7-tslm_o.html#dummy-variables",
    "href": "slides/7-tslm_o.html#dummy-variables",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Dummy variables",
    "text": "Dummy variables\nIf a categorical variable takes only two values (e.g., Yes, or No), then an equivalent numerical variable can be constructed taking value 1 if yes and 0 if no. This is called a dummy variable.\n\n\n\nVariable\ndummy\n\n\n\n\nYes\n1\n\n\nYes\n1\n\n\nNo\n0\n\n\nYes\n1\n\n\nNo\n0\n\n\nNo\n0\n\n\nYes\n1\n\n\nYes\n1\n\n\nNo\n0\n\n\nNo\n0"
  },
  {
    "objectID": "slides/7-tslm_o.html#dummy-variables-1",
    "href": "slides/7-tslm_o.html#dummy-variables-1",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Dummy variables",
    "text": "Dummy variables\nIf there are more than two categories, then the variable can be coded using several dummy variables (one fewer than the total number of categories).\n\n\n\nDay\nd1\nd2\nd3\nd4\n\n\n\n\nMonday\n1\n0\n0\n0\n\n\nTuesday\n0\n1\n0\n0\n\n\nWednesday\n0\n0\n1\n0\n\n\nThursday\n0\n0\n0\n1\n\n\nFriday\n0\n0\n0\n0\n\n\nMonday\n1\n0\n0\n0\n\n\nTuesday\n0\n1\n0\n0\n\n\nWednesday\n0\n0\n1\n0\n\n\nThursday\n0\n0\n0\n1\n\n\nFriday\n0\n0\n0\n0"
  },
  {
    "objectID": "slides/7-tslm_o.html#beware-of-the-dummy-variable-trap",
    "href": "slides/7-tslm_o.html#beware-of-the-dummy-variable-trap",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Beware of the dummy variable trap!",
    "text": "Beware of the dummy variable trap!\n\nUsing one dummy for each category gives too many dummy variables!\nThe regression will then be singular and inestimable.\nEither omit the constant, or omit the dummy for one category.\nThe coefficients of the dummies are relative to the omitted category."
  },
  {
    "objectID": "slides/7-tslm_o.html#uses-of-dummy-variables",
    "href": "slides/7-tslm_o.html#uses-of-dummy-variables",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Uses of dummy variables",
    "text": "Uses of dummy variables\nSeasonal dummies\n\nFor quarterly data: use 3 dummies\nFor monthly data: use 11 dummies\nFor daily data: use 6 dummies\nWhat to do with weekly data?\n\n. . .\nOutliers\n\nIf there is an outlier, you can use a dummy variable to remove its effect.\n\n. . .\nPublic holidays\n\nFor daily data: if it is a public holiday, dummy=1, otherwise dummy=0."
  },
  {
    "objectID": "slides/7-tslm_o.html#beer-production-revisited-16",
    "href": "slides/7-tslm_o.html#beer-production-revisited-16",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Beer production revisited (1/6)",
    "text": "Beer production revisited (1/6)\n\nrecent_production &lt;- aus_production |&gt; filter(year(Quarter) &gt;= 1992)\nrecent_production |&gt; autoplot(Beer) +\n  labs(y = \"Megalitres\", title = \"Australian quarterly beer production\")\n\n\n\n\n\n\n\n\n. . .\nRegression model\n\\[y_t = \\beta_0 + \\beta_1 t + \\beta_2d_{2,t} + \\beta_3 d_{3,t} + \\beta_4 d_{4,t} + \\varepsilon_t\\]\n\n\\(d_{i,t} = 1\\) if \\(t\\) is quarter \\(i\\) and 0 otherwise."
  },
  {
    "objectID": "slides/7-tslm_o.html#beer-production-revisited-26",
    "href": "slides/7-tslm_o.html#beer-production-revisited-26",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Beer production revisited (2/6)",
    "text": "Beer production revisited (2/6)\n\nfit_beer &lt;- recent_production |&gt; model(TSLM(Beer ~ trend() + season()))\nreport(fit_beer)\n\nSeries: Beer \nModel: TSLM \n\nResiduals:\n     Min       1Q   Median       3Q      Max \n-42.9029  -7.5995  -0.4594   7.9908  21.7895 \n\nCoefficients:\n               Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept)   441.80044    3.73353 118.333  &lt; 2e-16 ***\ntrend()        -0.34027    0.06657  -5.111 2.73e-06 ***\nseason()year2 -34.65973    3.96832  -8.734 9.10e-13 ***\nseason()year3 -17.82164    4.02249  -4.430 3.45e-05 ***\nseason()year4  72.79641    4.02305  18.095  &lt; 2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 12.23 on 69 degrees of freedom\nMultiple R-squared: 0.9243, Adjusted R-squared: 0.9199\nF-statistic: 210.7 on 4 and 69 DF, p-value: &lt; 2.22e-16"
  },
  {
    "objectID": "slides/7-tslm_o.html#beer-production-revisited-36",
    "href": "slides/7-tslm_o.html#beer-production-revisited-36",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Beer production revisited (3/6)",
    "text": "Beer production revisited (3/6)\n\naugment(fit_beer) |&gt;\n  ggplot(aes(x = Quarter)) +\n  geom_line(aes(y = Beer, colour = \"Data\")) +\n  geom_line(aes(y = .fitted, colour = \"Fitted\")) +\n  labs(y = \"Megalitres\", title = \"Australian quarterly beer production\") +\n  scale_colour_manual(values = c(Data = \"black\", Fitted = \"#D55E00\"))"
  },
  {
    "objectID": "slides/7-tslm_o.html#beer-production-revisited-46",
    "href": "slides/7-tslm_o.html#beer-production-revisited-46",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Beer production revisited (4/6)",
    "text": "Beer production revisited (4/6)\n\naugment(fit_beer) |&gt;\n  ggplot(aes(x = Beer, y = .fitted, colour = factor(quarter(Quarter)))) +\n  geom_point() +\n  labs(y = \"Fitted\", x = \"Actual values\", title = \"Quarterly beer production\") +\n  scale_colour_brewer(palette = \"Dark2\", name = \"Quarter\") +\n  geom_abline(intercept = 0, slope = 1)"
  },
  {
    "objectID": "slides/7-tslm_o.html#beer-production-revisited-56",
    "href": "slides/7-tslm_o.html#beer-production-revisited-56",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Beer production revisited (5/6)",
    "text": "Beer production revisited (5/6)\n\nfit_beer |&gt; gg_tsresiduals()"
  },
  {
    "objectID": "slides/7-tslm_o.html#beer-production-revisited-66",
    "href": "slides/7-tslm_o.html#beer-production-revisited-66",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Beer production revisited (6/6)",
    "text": "Beer production revisited (6/6)\n\nfit_beer |&gt;\n  forecast() |&gt;\n  autoplot(recent_production)"
  },
  {
    "objectID": "slides/7-tslm_o.html#intervention-variables",
    "href": "slides/7-tslm_o.html#intervention-variables",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Intervention variables",
    "text": "Intervention variables\nSpikes\n\nEquivalent to a dummy variable for handling an outlier.\n\n. . .\nSteps\n\nVariable takes value 0 before the intervention and 1 afterwards.\n\n. . .\nChange of slope\n\nVariables take values 0 before the intervention and values \\(\\{1,2,3,\\dots\\}\\) afterwards."
  },
  {
    "objectID": "slides/7-tslm_o.html#holidays",
    "href": "slides/7-tslm_o.html#holidays",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Holidays",
    "text": "Holidays\nFor monthly data\n\nChristmas: always in December so part of monthly seasonal effect\nEaster: use a dummy variable \\(v_t=1\\) if any part of Easter is in that month, \\(v_t=0\\) otherwise.\nRamadan and Chinese new year similar."
  },
  {
    "objectID": "slides/7-tslm_o.html#distributed-lags",
    "href": "slides/7-tslm_o.html#distributed-lags",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Distributed lags",
    "text": "Distributed lags\nLagged values of a predictor.\nExample: \\(x\\) is advertising which has a delayed effect\n\\[\\begin{align*}\n  x_{1} &= \\text{advertising for previous month;} \\\\\n  x_{2} &= \\text{advertising for two months previously;} \\\\\n        & \\vdots \\\\\n  x_{m} &= \\text{advertising for $m$ months previously.}\n\\end{align*}\\]"
  },
  {
    "objectID": "slides/7-tslm_o.html#fourier-series",
    "href": "slides/7-tslm_o.html#fourier-series",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Fourier series",
    "text": "Fourier series\nPeriodic seasonality can be handled using pairs of Fourier terms:\n\\[s_{k}(t) = \\sin\\left(\\frac{2\\pi k t}{m}\\right)\\qquad c_{k}(t) = \\cos\\left(\\frac{2\\pi k t}{m}\\right)\\]\n\\[y_t = a + bt + \\sum_{k=1}^K \\left[\\alpha_k s_k(t) + \\beta_k c_k(t)\\right] + \\varepsilon_t\\] where \\(m\\) is the seasonal period.\n\nEvery periodic function can be approximated by sums of sin and cos terms for large enough \\(K\\).\nChoose \\(K\\) by minimizing AICc.\nCalled “harmonic regression”\n\n. . .\nTSLM(y ~ trend() + fourier(K))"
  },
  {
    "objectID": "slides/7-tslm_o.html#harmonic-regression-beer-production",
    "href": "slides/7-tslm_o.html#harmonic-regression-beer-production",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Harmonic regression: beer production",
    "text": "Harmonic regression: beer production\n\nfourier_beer &lt;- recent_production |&gt; model(TSLM(Beer ~ trend() + fourier(K = 2)))\nreport(fourier_beer)\n\nSeries: Beer \nModel: TSLM \n\nResiduals:\n     Min       1Q   Median       3Q      Max \n-42.9029  -7.5995  -0.4594   7.9908  21.7895 \n\nCoefficients:\n                    Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept)        446.87920    2.87321 155.533  &lt; 2e-16 ***\ntrend()             -0.34027    0.06657  -5.111 2.73e-06 ***\nfourier(K = 2)C1_4   8.91082    2.01125   4.430 3.45e-05 ***\nfourier(K = 2)S1_4 -53.72807    2.01125 -26.714  &lt; 2e-16 ***\nfourier(K = 2)C2_4 -13.98958    1.42256  -9.834 9.26e-15 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 12.23 on 69 degrees of freedom\nMultiple R-squared: 0.9243, Adjusted R-squared: 0.9199\nF-statistic: 210.7 on 4 and 69 DF, p-value: &lt; 2.22e-16"
  },
  {
    "objectID": "slides/7-tslm_o.html#harmonic-regression-eating-out-expenditure",
    "href": "slides/7-tslm_o.html#harmonic-regression-eating-out-expenditure",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Harmonic regression: eating-out expenditure",
    "text": "Harmonic regression: eating-out expenditure\n\naus_cafe &lt;- aus_retail |&gt;\n  filter(Industry == \"Cafes, restaurants and takeaway food services\",\n         year(Month) %in% 2004:2018) |&gt;\n  summarise(Turnover = sum(Turnover))\naus_cafe |&gt; autoplot(Turnover)"
  },
  {
    "objectID": "slides/7-tslm_o.html#harmonic-regression-eating-out-expenditure-17",
    "href": "slides/7-tslm_o.html#harmonic-regression-eating-out-expenditure-17",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Harmonic regression: eating-out expenditure (1/7)",
    "text": "Harmonic regression: eating-out expenditure (1/7)\n\nfit &lt;- aus_cafe |&gt;\n  model(\n    K1 = TSLM(log(Turnover) ~ trend() + fourier(K = 1)),\n    K2 = TSLM(log(Turnover) ~ trend() + fourier(K = 2)),\n    K3 = TSLM(log(Turnover) ~ trend() + fourier(K = 3)),\n    K4 = TSLM(log(Turnover) ~ trend() + fourier(K = 4)),\n    K5 = TSLM(log(Turnover) ~ trend() + fourier(K = 5)),\n    K6 = TSLM(log(Turnover) ~ trend() + fourier(K = 6))\n  )"
  },
  {
    "objectID": "slides/7-tslm_o.html#harmonic-regression-eating-out-expenditure-27",
    "href": "slides/7-tslm_o.html#harmonic-regression-eating-out-expenditure-27",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Harmonic regression: eating-out expenditure (2/7)",
    "text": "Harmonic regression: eating-out expenditure (2/7)"
  },
  {
    "objectID": "slides/7-tslm_o.html#harmonic-regression-eating-out-expenditure-37",
    "href": "slides/7-tslm_o.html#harmonic-regression-eating-out-expenditure-37",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Harmonic regression: eating-out expenditure (3/7)",
    "text": "Harmonic regression: eating-out expenditure (3/7)"
  },
  {
    "objectID": "slides/7-tslm_o.html#harmonic-regression-eating-out-expenditure-47",
    "href": "slides/7-tslm_o.html#harmonic-regression-eating-out-expenditure-47",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Harmonic regression: eating-out expenditure (4/7)",
    "text": "Harmonic regression: eating-out expenditure (4/7)"
  },
  {
    "objectID": "slides/7-tslm_o.html#harmonic-regression-eating-out-expenditure-57",
    "href": "slides/7-tslm_o.html#harmonic-regression-eating-out-expenditure-57",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Harmonic regression: eating-out expenditure (5/7)",
    "text": "Harmonic regression: eating-out expenditure (5/7)"
  },
  {
    "objectID": "slides/7-tslm_o.html#harmonic-regression-eating-out-expenditure-67",
    "href": "slides/7-tslm_o.html#harmonic-regression-eating-out-expenditure-67",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Harmonic regression: eating-out expenditure (6/7)",
    "text": "Harmonic regression: eating-out expenditure (6/7)"
  },
  {
    "objectID": "slides/7-tslm_o.html#harmonic-regression-eating-out-expenditure-77",
    "href": "slides/7-tslm_o.html#harmonic-regression-eating-out-expenditure-77",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Harmonic regression: eating-out expenditure (7/7)",
    "text": "Harmonic regression: eating-out expenditure (7/7)"
  },
  {
    "objectID": "slides/7-tslm_o.html#fourier-series-1",
    "href": "slides/7-tslm_o.html#fourier-series-1",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Fourier series",
    "text": "Fourier series\nPeriodic seasonality can be handled using pairs of Fourier terms: \\[s_{k}(t) = \\sin\\left(\\frac{2\\pi k t}{m}\\right)\\qquad c_{k}(t) = \\cos\\left(\\frac{2\\pi k t}{m}\\right)\\] \\[y_t = a + bt + \\sum_{k=1}^K \\left[\\alpha_k s_k(t) + \\beta_k c_k(t)\\right] + \\varepsilon_t\\]\n\nEvery periodic function can be approximated by sums of sin and cos terms for large enough \\(K\\).\n\\(K \\le m/2\\)\n\\(m\\) can be non-integer\nParticularly useful for large \\(m\\)."
  },
  {
    "objectID": "slides/7-tslm_o.html#comparing-regression-models",
    "href": "slides/7-tslm_o.html#comparing-regression-models",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Comparing regression models",
    "text": "Comparing regression models\nComputer output for regression will always give the \\(R^2\\) value. This is a useful summary of the model.\n\nIt is equal to the square of the correlation between \\(y\\) and \\(\\hat y\\).\nIt is often called the “coefficient of determination”.\nIt can also be calculated as follows:\n\n. . .\n\\[R^2 = \\frac{\\sum(\\hat{y}_t - \\bar{y})^2}{\\sum(y_t-\\bar{y})^2}\\]\n\nIt is the proportion of variance accounted for (explained) by the predictors."
  },
  {
    "objectID": "slides/7-tslm_o.html#comparing-regression-models-1",
    "href": "slides/7-tslm_o.html#comparing-regression-models-1",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Comparing regression models",
    "text": "Comparing regression models\nHowever …\n\n\\(R^2\\) does not allow for “degrees of freedom”.\nAdding any variable tends to increase the value of \\(R^2\\), even if that variable is irrelevant.\n\n. . .\nTo overcome this problem, we can use adjusted \\(R^2\\):\n\\[\\bar{R}^2 = 1-(1-R^2)\\frac{T-1}{T-k-1}\\]\nwhere \\(k=\\) no. predictors and \\(T=\\) no. observations.\n. . .\n\n\n\n\n\n\nNote\n\n\n\nMaximizing \\(\\bar{R}^2\\) is equivalent to minimizing \\(\\hat\\sigma^2\\).\n\\[\\hat{\\sigma}^2 = \\frac{1}{T-k-1}\\sum_{t=1}^T \\varepsilon_t^2\\]"
  },
  {
    "objectID": "slides/7-tslm_o.html#akaikes-information-criterion",
    "href": "slides/7-tslm_o.html#akaikes-information-criterion",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Akaike’s Information Criterion",
    "text": "Akaike’s Information Criterion\n\\[\\text{AIC} = -2\\log(L) + 2(k+2)\\]\nwhere \\(L\\) is the likelihood and \\(k\\) is the number of predictors in the model.\n\nAIC penalizes terms more heavily than \\(\\bar{R}^2\\).\nMinimizing the AIC is asymptotically equivalent to minimizing MSE via leave-one-out cross-validation (for any linear regression)."
  },
  {
    "objectID": "slides/7-tslm_o.html#corrected-aic",
    "href": "slides/7-tslm_o.html#corrected-aic",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Corrected AIC",
    "text": "Corrected AIC\nFor small values of \\(T\\), the AIC tends to select too many predictors, and so a bias-corrected version of the AIC has been developed.\n\\[\\text{AIC}_{\\text{C}} = \\text{AIC} + \\frac{2(k+2)(k+3)}{T-k-3}\\]\n. . .\nAs with the AIC, the AIC\\(_{\\text{C}}\\) should be minimized."
  },
  {
    "objectID": "slides/7-tslm_o.html#bayesian-information-criterion",
    "href": "slides/7-tslm_o.html#bayesian-information-criterion",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Bayesian Information Criterion",
    "text": "Bayesian Information Criterion\n\\[\\text{BIC} = -2\\log(L) + (k+2)\\log(T)\\]\nwhere \\(L\\) is the likelihood and \\(k\\) is the number of predictors in the model.\n\nBIC penalizes terms more heavily than AIC\nAlso called SBIC and SC.\nMinimizing BIC is asymptotically equivalent to leave-\\(v\\)-out cross-validation when \\(v = T[1-1/(log(T)-1)]\\)."
  },
  {
    "objectID": "slides/7-tslm_o.html#harmonic-regression-eating-out-expenditure-again-18",
    "href": "slides/7-tslm_o.html#harmonic-regression-eating-out-expenditure-again-18",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Harmonic regression: eating-out expenditure again (1/8)",
    "text": "Harmonic regression: eating-out expenditure again (1/8)\n\naus_cafe &lt;- aus_retail |&gt;\n  filter(Industry == \"Cafes, restaurants and takeaway food services\",\n         year(Month) %in% 2004:2018) |&gt;\n  summarise(Turnover = sum(Turnover))\naus_cafe |&gt; autoplot(Turnover)"
  },
  {
    "objectID": "slides/7-tslm_o.html#harmonic-regression-eating-out-expenditure-again-28",
    "href": "slides/7-tslm_o.html#harmonic-regression-eating-out-expenditure-again-28",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Harmonic regression: eating-out expenditure again (2/8)",
    "text": "Harmonic regression: eating-out expenditure again (2/8)\n\nfit &lt;- aus_cafe |&gt;\n  model(\n    K1 = TSLM(log(Turnover) ~ trend() + fourier(K = 1)),\n    K2 = TSLM(log(Turnover) ~ trend() + fourier(K = 2)),\n    K3 = TSLM(log(Turnover) ~ trend() + fourier(K = 3)),\n    K4 = TSLM(log(Turnover) ~ trend() + fourier(K = 4)),\n    K5 = TSLM(log(Turnover) ~ trend() + fourier(K = 5)),\n    K6 = TSLM(log(Turnover) ~ trend() + fourier(K = 6))\n  )\nglance(fit) |&gt; select(.model, r_squared, adj_r_squared, CV, AICc)\n\n# A tibble: 6 × 5\n  .model r_squared adj_r_squared      CV   AICc\n  &lt;chr&gt;      &lt;dbl&gt;         &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;\n1 K1         0.962         0.962 0.00238 -1085.\n2 K2         0.966         0.965 0.00220 -1099.\n3 K3         0.976         0.975 0.00157 -1160.\n4 K4         0.980         0.979 0.00138 -1183.\n5 K5         0.985         0.984 0.00104 -1234.\n6 K6         0.985         0.984 0.00105 -1232."
  },
  {
    "objectID": "slides/7-tslm_o.html#harmonic-regression-eating-out-expenditure-again-38",
    "href": "slides/7-tslm_o.html#harmonic-regression-eating-out-expenditure-again-38",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Harmonic regression: eating-out expenditure again (3/8)",
    "text": "Harmonic regression: eating-out expenditure again (3/8)"
  },
  {
    "objectID": "slides/7-tslm_o.html#harmonic-regression-eating-out-expenditure-again-48",
    "href": "slides/7-tslm_o.html#harmonic-regression-eating-out-expenditure-again-48",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Harmonic regression: eating-out expenditure again (4/8)",
    "text": "Harmonic regression: eating-out expenditure again (4/8)"
  },
  {
    "objectID": "slides/7-tslm_o.html#harmonic-regression-eating-out-expenditure-again-58",
    "href": "slides/7-tslm_o.html#harmonic-regression-eating-out-expenditure-again-58",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Harmonic regression: eating-out expenditure again (5/8)",
    "text": "Harmonic regression: eating-out expenditure again (5/8)"
  },
  {
    "objectID": "slides/7-tslm_o.html#harmonic-regression-eating-out-expenditure-again-68",
    "href": "slides/7-tslm_o.html#harmonic-regression-eating-out-expenditure-again-68",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Harmonic regression: eating-out expenditure again (6/8)",
    "text": "Harmonic regression: eating-out expenditure again (6/8)"
  },
  {
    "objectID": "slides/7-tslm_o.html#harmonic-regression-eating-out-expenditure-again-78",
    "href": "slides/7-tslm_o.html#harmonic-regression-eating-out-expenditure-again-78",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Harmonic regression: eating-out expenditure again (7/8)",
    "text": "Harmonic regression: eating-out expenditure again (7/8)"
  },
  {
    "objectID": "slides/7-tslm_o.html#harmonic-regression-eating-out-expenditure-again-88",
    "href": "slides/7-tslm_o.html#harmonic-regression-eating-out-expenditure-again-88",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Harmonic regression: eating-out expenditure again (8/8)",
    "text": "Harmonic regression: eating-out expenditure again (8/8)"
  },
  {
    "objectID": "slides/7-tslm_o.html#ex-ante-versus-ex-post-forecasts",
    "href": "slides/7-tslm_o.html#ex-ante-versus-ex-post-forecasts",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Ex-ante versus ex-post forecasts",
    "text": "Ex-ante versus ex-post forecasts\n\nEx ante forecasts are made using only information available in advance.\n\nrequire forecasts of predictors\n\nEx post forecasts are made using later information on the predictors.\n\nuseful for studying behavior of forecasting models.\n\ntrend, seasonal and calendar variables are all known in advance, so these don’t need to be forecast."
  },
  {
    "objectID": "slides/7-tslm_o.html#beer-production",
    "href": "slides/7-tslm_o.html#beer-production",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Beer production",
    "text": "Beer production\n\nrecent_production &lt;- aus_production |&gt; filter(year(Quarter) &gt;= 1992)\nrecent_production |&gt; model(TSLM(Beer ~ trend() + season())) |&gt; \n   forecast() |&gt; autoplot(recent_production)"
  },
  {
    "objectID": "slides/7-tslm_o.html#scenario-based-forecasting",
    "href": "slides/7-tslm_o.html#scenario-based-forecasting",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Scenario based forecasting",
    "text": "Scenario based forecasting\n\nAssumes possible scenarios for the predictor variables\nPrediction intervals for scenario based forecasts do not include the uncertainty associated with the future values of the predictor variables."
  },
  {
    "objectID": "slides/7-tslm_o.html#us-consumption",
    "href": "slides/7-tslm_o.html#us-consumption",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "US Consumption",
    "text": "US Consumption\n\nfit_consBest &lt;- us_change |&gt;\n  model(\n    TSLM(Consumption ~ Income + Savings + Unemployment)\n  )\n\nfuture_scenarios &lt;- scenarios(\n  Increase = new_data(us_change, 4) |&gt;\n    mutate(Income = 1, Savings = 0.5, Unemployment = 0),\n  Decrease = new_data(us_change, 4) |&gt;\n    mutate(Income = -1, Savings = -0.5, Unemployment = 0),\n  names_to = \"Scenario\"\n)\n\nfc &lt;- forecast(fit_consBest, new_data = future_scenarios)"
  },
  {
    "objectID": "slides/7-tslm_o.html#us-consumption-1",
    "href": "slides/7-tslm_o.html#us-consumption-1",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "US Consumption",
    "text": "US Consumption\n\nus_change |&gt; autoplot(Consumption) +\n  labs(y = \"% change in US consumption\") +\n  autolayer(fc) +\n  labs(title = \"US consumption\", y = \"% change\")"
  },
  {
    "objectID": "slides/7-tslm_o.html#building-a-predictive-regression-model",
    "href": "slides/7-tslm_o.html#building-a-predictive-regression-model",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Building a predictive regression model",
    "text": "Building a predictive regression model\n\nIf getting forecasts of predictors is difficult, you can use lagged predictors instead.\n\n. . .\n\\[y_{t+h}=\\beta_0+\\beta_1x_{1,t}+\\dots+\\beta_kx_{k,t}+\\varepsilon_{t+h}\\]\n\nA different model for each forecast horizon \\(h\\)."
  },
  {
    "objectID": "slides/7-tslm_o.html#nonlinear-regression",
    "href": "slides/7-tslm_o.html#nonlinear-regression",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Nonlinear regression",
    "text": "Nonlinear regression\nA log-log functional form\n\\[\\log y=\\beta_0+\\beta_1 \\log x +\\varepsilon\\]\nwhere \\(\\beta_1\\) is interpreted as an elasticity (the average percentage change in \\(y\\) resulting from a \\(1\\%\\) increase in \\(x\\)).\n\nalternative specifications: log-linear, linear-log.\nuse \\(\\log(x+1)\\) if required."
  },
  {
    "objectID": "slides/7-tslm_o.html#piecewise-linear-and-regression-splines-12",
    "href": "slides/7-tslm_o.html#piecewise-linear-and-regression-splines-12",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Piecewise linear and regression splines (1/2)",
    "text": "Piecewise linear and regression splines (1/2)\n\\[y=f(x) +\\varepsilon\\] where \\(f\\) is a non-linear function.\n\nFor piecewise linear let \\(x_1=x\\) and\n\n. . .\n\\[\\begin{align*}\n  x_{2} = (x-c)_+ &= \\left\\{\n             \\begin{array}{ll}\n               0 & \\text{if } x &lt; c\\\\\n               x-c &  \\text{if } x \\ge c.\n             \\end{array}\\right.\n\\end{align*}\\]"
  },
  {
    "objectID": "slides/7-tslm_o.html#piecewise-linear-and-regression-splines-22",
    "href": "slides/7-tslm_o.html#piecewise-linear-and-regression-splines-22",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Piecewise linear and regression splines (2/2)",
    "text": "Piecewise linear and regression splines (2/2)\n\nIn general, Linear Regression Splines\n\n. . .\n\\[x_1=x~~~x_2=(x-c_1)_+~~~\\ldots~~~x_k=(x-c_{k-1})_+\\]\nwhere \\(c_1,\\ldots,c_{k-1}\\) are knots.\n\nNeed to select knots: can be difficult and arbitrary.\nAutomatic knot selection algorithms very slow.\nUsing piecewise cubics achieves a smoother result.\n\n. . .\n\n\n\n\n\n\nWarning\n\n\n\nBetter fit but forecasting outside the range of the historical data is even more unreliable."
  },
  {
    "objectID": "slides/7-tslm_o.html#nonlinear-trends",
    "href": "slides/7-tslm_o.html#nonlinear-trends",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Nonlinear trends",
    "text": "Nonlinear trends\nPiecewise linear trend with bend at \\(\\tau\\)\n. . .\n\\[\\begin{align*}\nx_{1,t} &= t \\\\\nx_{2,t} &= \\left\\{ \\begin{array}{ll}\n  0 & t &lt;\\tau\\\\\n  (t-\\tau) & t \\ge \\tau\n\\end{array}\\right.\n\\end{align*}\\]\n. . .\nQuadratic or higher order trend\n\\[x_{1,t} =t,\\quad x_{2,t}=t^2,\\quad \\dots\\]\n. . .\n\n\n\n\n\n\nWarning\n\n\n\nNOT RECOMMENDED"
  },
  {
    "objectID": "slides/7-tslm_o.html#example-boston-marathon-winning-times-14",
    "href": "slides/7-tslm_o.html#example-boston-marathon-winning-times-14",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Example: Boston marathon winning times (1/4)",
    "text": "Example: Boston marathon winning times (1/4)\n\nmarathon &lt;- boston_marathon |&gt;\n  filter(Event == \"Men's open division\") |&gt;\n  select(-Event) |&gt;\n  mutate(Minutes = as.numeric(Time) / 60)\nmarathon |&gt; autoplot(Minutes) + labs(y = \"Winning times in minutes\")"
  },
  {
    "objectID": "slides/7-tslm_o.html#example-boston-marathon-winning-times-24",
    "href": "slides/7-tslm_o.html#example-boston-marathon-winning-times-24",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Example: Boston marathon winning times (2/4)",
    "text": "Example: Boston marathon winning times (2/4)\n\nfit_trends &lt;- marathon |&gt;\n  model(\n    # Linear trend\n    linear = TSLM(Minutes ~ trend()),\n    # Exponential trend\n    exponential = TSLM(log(Minutes) ~ trend()),\n    # Piecewise linear trend\n    piecewise = TSLM(Minutes ~ trend(knots = c(1940, 1980)))\n  )\n\n\nfit_trends\n\n# A mable: 1 x 3\n   linear exponential piecewise\n  &lt;model&gt;     &lt;model&gt;   &lt;model&gt;\n1  &lt;TSLM&gt;      &lt;TSLM&gt;    &lt;TSLM&gt;"
  },
  {
    "objectID": "slides/7-tslm_o.html#example-boston-marathon-winning-times-34",
    "href": "slides/7-tslm_o.html#example-boston-marathon-winning-times-34",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Example: Boston marathon winning times (3/4)",
    "text": "Example: Boston marathon winning times (3/4)\n\nfit_trends |&gt;\n  forecast(h = 10) |&gt;\n  autoplot(marathon)\n\n\nCodePlot\n\n\n\nfc_trends &lt;- fit_trends |&gt; forecast(h = 10)\nmarathon |&gt;\n  autoplot(Minutes) +\n  geom_line(\n    data = fitted(fit_trends),\n    aes(y = .fitted, colour = .model)\n  ) +\n  autolayer(fc_trends, alpha = 0.5, level = 95) +\n  labs(\n    y = \"Minutes\",\n    title = \"Boston marathon winning times\"\n  )"
  },
  {
    "objectID": "slides/7-tslm_o.html#example-boston-marathon-winning-times-44",
    "href": "slides/7-tslm_o.html#example-boston-marathon-winning-times-44",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Example: Boston marathon winning times (4/4)",
    "text": "Example: Boston marathon winning times (4/4)\n\nfit_trends |&gt;\n  select(piecewise) |&gt;\n  gg_tsresiduals()"
  },
  {
    "objectID": "slides/7-tslm_o.html#correlation-is-not-causation",
    "href": "slides/7-tslm_o.html#correlation-is-not-causation",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Correlation is not causation",
    "text": "Correlation is not causation\n\nWhen \\(x\\) is useful for predicting \\(y\\), it is not necessarily causing \\(y\\).\ne.g., predict number of swimmers \\(y\\) using number of ice-creams sold \\(x\\).\nCorrelations are useful for forecasting, even when there is no causality.\nBetter models usually involve causal relationships (e.g., temperature \\(x\\) and people \\(z\\) to predict swimmers \\(y\\))."
  },
  {
    "objectID": "slides/7-tslm_o.html#multicollinearity",
    "href": "slides/7-tslm_o.html#multicollinearity",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Multicollinearity",
    "text": "Multicollinearity\nIn regression analysis, multicollinearity occurs when:\n\nTwo predictors are highly correlated (i.e., the correlation between them is close to \\(\\pm1\\)).\nA linear combination of some of the predictors is highly correlated with another predictor.\nA linear combination of one subset of predictors is highly correlated with a linear combination of another subset of predictors."
  },
  {
    "objectID": "slides/7-tslm_o.html#multicollinearity-1",
    "href": "slides/7-tslm_o.html#multicollinearity-1",
    "title": "Chapter 7 Time Series Linear Models",
    "section": "Multicollinearity",
    "text": "Multicollinearity\nIf multicollinearity exists\n\nthe numerical estimates of coefficients may be wrong (worse in Excel than in a statistics package)\ndon’t rely on the \\(p\\)-values to determine significance.\nthere is no problem with model predictions provided the predictors used for forecasting are within the range used for fitting.\nomitting variables can help.\ncombining variables can help."
  },
  {
    "objectID": "slides/3-decomp.html#setup",
    "href": "slides/3-decomp.html#setup",
    "title": "Chapter 3 Decomposition",
    "section": "Setup",
    "text": "Setup\n\nlibrary(purrr)\nlibrary(gganimate)\nlibrary(latex2exp)\nlibrary(fpp3)"
  },
  {
    "objectID": "slides/3-decomp.html#per-capita-adjustments",
    "href": "slides/3-decomp.html#per-capita-adjustments",
    "title": "Chapter 3 Decomposition",
    "section": "Per capita adjustments",
    "text": "Per capita adjustments\n\nglobal_economy |&gt;\n  filter(Country == \"Australia\") |&gt;\n  autoplot(GDP)"
  },
  {
    "objectID": "slides/3-decomp.html#per-capita-adjustments-1",
    "href": "slides/3-decomp.html#per-capita-adjustments-1",
    "title": "Chapter 3 Decomposition",
    "section": "Per capita adjustments",
    "text": "Per capita adjustments\n\nglobal_economy |&gt;\n  filter(Country == \"Australia\") |&gt;\n  autoplot(GDP / Population)"
  },
  {
    "objectID": "slides/3-decomp.html#you-try",
    "href": "slides/3-decomp.html#you-try",
    "title": "Chapter 3 Decomposition",
    "section": "You Try!",
    "text": "You Try!\n\nConsider the GDP information in global_economy. Plot the GDP per capita for each country over time. Which country has the highest GDP per capita? How has this changed over time? –&gt;"
  },
  {
    "objectID": "slides/3-decomp.html#inflation-adjustments",
    "href": "slides/3-decomp.html#inflation-adjustments",
    "title": "Chapter 3 Decomposition",
    "section": "Inflation adjustments",
    "text": "Inflation adjustments\n\nData which are affected by the value of money are best adjusted before modelling.\nFor example, the average cost of a new house will have increased over the last few decades due to inflation. A $200,000 house this year is not the same as a $200,000 house twenty years ago."
  },
  {
    "objectID": "slides/3-decomp.html#inflation-adjustments-1",
    "href": "slides/3-decomp.html#inflation-adjustments-1",
    "title": "Chapter 3 Decomposition",
    "section": "Inflation adjustments",
    "text": "Inflation adjustments\n\nTo make these adjustments, a price index is used. If \\(z_t\\) denotes the price index and \\(y_t\\) denotes the original house price in year \\(t\\), then\n\n\n\\[x_t=y_t/z_t \\cdot z_{2000}\\]\ngives the adjusted house price at year 2000 dollar values.\n\nPrice indexes are often constructed by government agencies. For consumer goods, a common price index is the Consumer Price Index (or CPI)."
  },
  {
    "objectID": "slides/3-decomp.html#inflation-adjustments-2",
    "href": "slides/3-decomp.html#inflation-adjustments-2",
    "title": "Chapter 3 Decomposition",
    "section": "Inflation adjustments",
    "text": "Inflation adjustments\n\nCodePlot\n\n\n\naus_newspaper_retail &lt;- readr::read_csv('data/aus_newspaper_retail.csv')\n# Turnover: Retail turnover in $Million AUD\n\naus_newspaper_retail &lt;- aus_newspaper_retail |&gt;\n  select(Year,Turnover,name) |&gt; # Picks out these 3 columns/variables\n  group_by(Year,name) |&gt; # Tells are to now calculate by groups by year and name\n  summarise(sum_Turnover = sum(Turnover))|&gt; #adds up Turnover for each year and name combination\n  as_tsibble(index = Year, key = \"name\") # Converts to time series\n\naus_newspaper_retail |&gt; autoplot(sum_Turnover) +\n  facet_grid(name ~ ., scales = \"free_y\") + # This will make a grid of plots\n    # with name used to break into multiple plots along the y direction\n  labs(title = \"Turnover: Australian print media industry\", y = \"$AU\")"
  },
  {
    "objectID": "slides/3-decomp.html#mathematical-transformations",
    "href": "slides/3-decomp.html#mathematical-transformations",
    "title": "Chapter 3 Decomposition",
    "section": "Mathematical transformations",
    "text": "Mathematical transformations\nIf the data show different variation at different levels of the series, then a transformation can be useful.\n\nDenote original observations as \\(y_1,\\dots,y_T\\) and transformed observations as \\(w_1, \\dots, w_T\\).\n\n\n\n\n\n\nFunction\n\nImpact\n\n\n\n\nSquare root\n\\(w_t = \\sqrt{y_t}\\)\n\\(\\downarrow\\)\n\n\nCube root\n\\(w_t = \\sqrt[3]{y_t}\\)\nIncreasing\n\n\nLogarithm\n\\(w_t = \\log(y_t)\\)\nstrength\n\n\n\n\n\nLogarithms, in particular, are useful because they are more interpretable: changes in a log value are relative (percent) changes on the original scale."
  },
  {
    "objectID": "slides/3-decomp.html#mathematical-transformations-14",
    "href": "slides/3-decomp.html#mathematical-transformations-14",
    "title": "Chapter 3 Decomposition",
    "section": "Mathematical transformations (1/4)",
    "text": "Mathematical transformations (1/4)\n\nfood &lt;- aus_retail |&gt;\n  filter(Industry == \"Food retailing\") |&gt;\n  summarise(Turnover = sum(Turnover))"
  },
  {
    "objectID": "slides/3-decomp.html#mathematical-transformations-24",
    "href": "slides/3-decomp.html#mathematical-transformations-24",
    "title": "Chapter 3 Decomposition",
    "section": "Mathematical transformations (2/4)",
    "text": "Mathematical transformations (2/4)\n\nfood |&gt; autoplot(sqrt(Turnover)) +\n  labs(y = \"Square root turnover\")"
  },
  {
    "objectID": "slides/3-decomp.html#mathematical-transformations-34",
    "href": "slides/3-decomp.html#mathematical-transformations-34",
    "title": "Chapter 3 Decomposition",
    "section": "Mathematical transformations (3/4)",
    "text": "Mathematical transformations (3/4)\n\nfood |&gt; autoplot(Turnover^(1/3)) +\n  labs(y = \"Cube root turnover\")"
  },
  {
    "objectID": "slides/3-decomp.html#mathematical-transformations-44",
    "href": "slides/3-decomp.html#mathematical-transformations-44",
    "title": "Chapter 3 Decomposition",
    "section": "Mathematical transformations (4/4)",
    "text": "Mathematical transformations (4/4)\n\nfood |&gt; autoplot(log(Turnover)) +\n  labs(y = \"Log turnover\")\n\n\n\n(log here is the natural log, base \\(e\\))"
  },
  {
    "objectID": "slides/3-decomp.html#box-cox-transformations",
    "href": "slides/3-decomp.html#box-cox-transformations",
    "title": "Chapter 3 Decomposition",
    "section": "Box-Cox transformations",
    "text": "Box-Cox transformations\nEach of these transformations is close to a member of the family of :\n\\[w_t = \\left\\{\\begin{array}{ll}\n        \\log(y_t),      & \\quad \\lambda = 0; \\\\\n        (sign(y_t)|y_t|^\\lambda-1)/\\lambda ,         & \\quad \\lambda \\ne 0.\n\\end{array}\\right.\\]\n\nActually the Bickel-Doksum transformation (allowing for \\(y_t&lt;0\\))\n\\(\\lambda=1\\): (No substantive transformation)\n\\(\\lambda=\\frac12\\): (Square root plus linear transformation)\n\\(\\lambda=0\\): (Natural logarithm)"
  },
  {
    "objectID": "slides/3-decomp.html#box-cox-transformations-1",
    "href": "slides/3-decomp.html#box-cox-transformations-1",
    "title": "Chapter 3 Decomposition",
    "section": "Box-Cox transformations",
    "text": "Box-Cox transformations"
  },
  {
    "objectID": "slides/3-decomp.html#box-cox-transformations-2",
    "href": "slides/3-decomp.html#box-cox-transformations-2",
    "title": "Chapter 3 Decomposition",
    "section": "Box-Cox transformations",
    "text": "Box-Cox transformations\n\nfood |&gt;\n  features(Turnover, features = guerrero)\n\n# A tibble: 1 × 1\n  lambda_guerrero\n            &lt;dbl&gt;\n1          0.0895\n\n\n\nThis attempts to balance the seasonal fluctuations and random variation across the series.\nAlways check the results.\nA low value of \\(\\lambda\\) can give extremely large prediction intervals."
  },
  {
    "objectID": "slides/3-decomp.html#box-cox-transformations-3",
    "href": "slides/3-decomp.html#box-cox-transformations-3",
    "title": "Chapter 3 Decomposition",
    "section": "Box-Cox transformations",
    "text": "Box-Cox transformations\n\nfood |&gt; autoplot(box_cox(Turnover, 0.0524)) +\n  labs(y = \"Box-Cox transformed turnover\")"
  },
  {
    "objectID": "slides/3-decomp.html#transformations",
    "href": "slides/3-decomp.html#transformations",
    "title": "Chapter 3 Decomposition",
    "section": "Transformations",
    "text": "Transformations\n\nOften no transformation needed.\nSimple transformations are easier to explain and work well enough.\nTransformations can have very large effect on PI.\nIf some data are zero or negative, then use \\(\\lambda&gt;0\\).\nlog1p() can also be useful for data with zeros.\nChoosing logs is a simple way to force forecasts to be positive\nTransformations must be reversed to obtain forecasts on the original scale. (Handled automatically by fable.)"
  },
  {
    "objectID": "slides/3-decomp.html#you-try-1",
    "href": "slides/3-decomp.html#you-try-1",
    "title": "Chapter 3 Decomposition",
    "section": "You Try!",
    "text": "You Try!\n\nFor the following series, find an appropriate transformation in order to stabilise the variance.\n\nUnited States GDP from global_economy\nSlaughter of Victorian “Bulls, bullocks and steers” in aus_livestock\nVictorian Electricity Demand from vic_elec.\nGas production from aus_production\n\nWhy is a Box-Cox transformation unhelpful for the canadian_gas data?"
  },
  {
    "objectID": "slides/3-decomp.html#time-series-patterns",
    "href": "slides/3-decomp.html#time-series-patterns",
    "title": "Chapter 3 Decomposition",
    "section": "Time series patterns",
    "text": "Time series patterns\nRecall\n\nTrend\n\npattern exists when there is a long-term increase or decrease in the data.\n\nCyclic\n\npattern exists when data exhibit rises and falls that are not of fixed period (duration usually of at least 2 years).\n\nSeasonal\n\npattern exists when a series is influenced by seasonal factors (e.g., the quarter of the year, the month, or day of the week)."
  },
  {
    "objectID": "slides/3-decomp.html#time-series-decomposition",
    "href": "slides/3-decomp.html#time-series-decomposition",
    "title": "Chapter 3 Decomposition",
    "section": "Time series decomposition",
    "text": "Time series decomposition\n\\(y_t = f(S_t, T_t, R_t)\\)\nwhere \\(y_t=\\), data at period \\(t\\)\n\\(T_t=\\), trend-cycle component at period \\(t\\)\n\\(S_t=\\), seasonal component at period \\(t\\)\n\\(R_t=\\),remainder component at period \\(t\\)\n\nAdditive decomposition: \\(y_t = S_t + T_t + R_t.\\)\n\n\nMultiplicative decomposition: \\(y_t = S_t \\times T_t \\times R_t.\\)"
  },
  {
    "objectID": "slides/3-decomp.html#time-series-decomposition-1",
    "href": "slides/3-decomp.html#time-series-decomposition-1",
    "title": "Chapter 3 Decomposition",
    "section": "Time series decomposition",
    "text": "Time series decomposition\n\nAdditive model appropriate if magnitude of seasonal fluctuations does not vary with level.\nIf seasonal are proportional to level of series, then multiplicative model appropriate.\nMultiplicative decomposition more prevalent with economic series\nAlternative: use a Box-Cox transformation, and then use additive decomposition.\nLogs turn multiplicative relationship into an additive relationship:\n\n\n\\[y_t = S_t \\times T_t \\times R_t \\quad\\Rightarrow\\quad\n\\log y_t = \\log S_t + \\log T_t + \\log R_t.\\]"
  },
  {
    "objectID": "slides/3-decomp.html#us-retail-employment",
    "href": "slides/3-decomp.html#us-retail-employment",
    "title": "Chapter 3 Decomposition",
    "section": "US Retail Employment",
    "text": "US Retail Employment\n\nus_retail_employment &lt;- us_employment |&gt;\n  filter(year(Month) &gt;= 1990, Title == \"Retail Trade\") |&gt;\n  select(-Series_ID)\nus_retail_employment\n\n# A tsibble: 357 x 3 [1M]\n      Month Title        Employed\n      &lt;mth&gt; &lt;chr&gt;           &lt;dbl&gt;\n 1 1990 Jan Retail Trade   13256.\n 2 1990 Feb Retail Trade   12966.\n 3 1990 Mar Retail Trade   12938.\n 4 1990 Apr Retail Trade   13012.\n 5 1990 May Retail Trade   13108.\n 6 1990 Jun Retail Trade   13183.\n 7 1990 Jul Retail Trade   13170.\n 8 1990 Aug Retail Trade   13160.\n 9 1990 Sep Retail Trade   13113.\n10 1990 Oct Retail Trade   13185.\n# ℹ 347 more rows"
  },
  {
    "objectID": "slides/3-decomp.html#us-retail-employment-1",
    "href": "slides/3-decomp.html#us-retail-employment-1",
    "title": "Chapter 3 Decomposition",
    "section": "US Retail Employment",
    "text": "US Retail Employment\n\nus_retail_employment |&gt;\n  autoplot(Employed) +\n  labs(y=\"Persons (thousands)\", title=\"Total employment in US retail\")"
  },
  {
    "objectID": "slides/3-decomp.html#us-retail-employment-2",
    "href": "slides/3-decomp.html#us-retail-employment-2",
    "title": "Chapter 3 Decomposition",
    "section": "US Retail Employment",
    "text": "US Retail Employment\n\nus_retail_employment |&gt;\n  model(stl = STL(Employed))\n\n# A mable: 1 x 1\n      stl\n  &lt;model&gt;\n1   &lt;STL&gt;"
  },
  {
    "objectID": "slides/3-decomp.html#us-retail-employment-3",
    "href": "slides/3-decomp.html#us-retail-employment-3",
    "title": "Chapter 3 Decomposition",
    "section": "US Retail Employment",
    "text": "US Retail Employment\n\ndcmp &lt;- us_retail_employment |&gt;\n  model(stl = STL(Employed))\ncomponents(dcmp)\n\n# A dable: 357 x 7 [1M]\n# Key:     .model [1]\n# :        Employed = trend + season_year + remainder\n   .model    Month Employed  trend season_year remainder season_adjust\n   &lt;chr&gt;     &lt;mth&gt;    &lt;dbl&gt;  &lt;dbl&gt;       &lt;dbl&gt;     &lt;dbl&gt;         &lt;dbl&gt;\n 1 stl    1990 Jan   13256. 13288.      -33.0      0.836        13289.\n 2 stl    1990 Feb   12966. 13269.     -258.     -44.6          13224.\n 3 stl    1990 Mar   12938. 13250.     -290.     -22.1          13228.\n 4 stl    1990 Apr   13012. 13231.     -220.       1.05         13232.\n 5 stl    1990 May   13108. 13211.     -114.      11.3          13223.\n 6 stl    1990 Jun   13183. 13192.      -24.3     15.5          13207.\n 7 stl    1990 Jul   13170. 13172.      -23.2     21.6          13193.\n 8 stl    1990 Aug   13160. 13151.       -9.52    17.8          13169.\n 9 stl    1990 Sep   13113. 13131.      -39.5     22.0          13153.\n10 stl    1990 Oct   13185. 13110.       61.6     13.2          13124.\n# ℹ 347 more rows"
  },
  {
    "objectID": "slides/3-decomp.html#us-retail-employment-4",
    "href": "slides/3-decomp.html#us-retail-employment-4",
    "title": "Chapter 3 Decomposition",
    "section": "US Retail Employment",
    "text": "US Retail Employment\n\nus_retail_employment |&gt;\n  autoplot(Employed, color='gray') +\n  autolayer(components(dcmp), trend, color='#523178') +\n  labs(y=\"Persons (thousands)\", title=\"Total employment in US retail\")"
  },
  {
    "objectID": "slides/3-decomp.html#us-retail-employment-5",
    "href": "slides/3-decomp.html#us-retail-employment-5",
    "title": "Chapter 3 Decomposition",
    "section": "US Retail Employment",
    "text": "US Retail Employment\n\ncomponents(dcmp) |&gt; autoplot()"
  },
  {
    "objectID": "slides/3-decomp.html#us-retail-employment-6",
    "href": "slides/3-decomp.html#us-retail-employment-6",
    "title": "Chapter 3 Decomposition",
    "section": "US Retail Employment",
    "text": "US Retail Employment\n\ncomponents(dcmp) |&gt; gg_subseries(season_year)"
  },
  {
    "objectID": "slides/3-decomp.html#seasonal-adjustment",
    "href": "slides/3-decomp.html#seasonal-adjustment",
    "title": "Chapter 3 Decomposition",
    "section": "Seasonal adjustment",
    "text": "Seasonal adjustment\n\nUseful by-product of decomposition: an easy way to calculate seasonally adjusted data.\nAdditive decomposition: seasonally adjusted data given by \\[y_t - S_t = T_t + R_t\\]\nMultiplicative decomposition: seasonally adjusted data given by \\[y_t / S_t = T_t \\times R_t\\]"
  },
  {
    "objectID": "slides/3-decomp.html#us-retail-employment-7",
    "href": "slides/3-decomp.html#us-retail-employment-7",
    "title": "Chapter 3 Decomposition",
    "section": "US Retail Employment",
    "text": "US Retail Employment\n\nus_retail_employment |&gt;\n  autoplot(Employed, color='gray') +\n  autolayer(components(dcmp), season_adjust, color='#0072B2') +\n  labs(y=\"Persons (thousands)\", title=\"Total employment in US retail\")"
  },
  {
    "objectID": "slides/3-decomp.html#seasonal-adjustment-1",
    "href": "slides/3-decomp.html#seasonal-adjustment-1",
    "title": "Chapter 3 Decomposition",
    "section": "Seasonal adjustment",
    "text": "Seasonal adjustment\n\nWe use estimates of \\(S\\) based on past values to seasonally adjust a current value.\nSeasonally adjusted series reflect remainders as well as trend. Therefore they are not “smooth” and “downturns” or “upturns” can be misleading.\nIt is better to use the trend-cycle component to look for turning points."
  },
  {
    "objectID": "slides/3-decomp.html#moving-averages",
    "href": "slides/3-decomp.html#moving-averages",
    "title": "Chapter 3 Decomposition",
    "section": "Moving Averages",
    "text": "Moving Averages\n\nThe classical method of time series decomposition originated in the 1920s and was widely used until the 1950s.\nA moving average of order \\(m\\) can be written as \\[\\hat{T}_t = \\frac{1}{m}\\Sigma_{j=-k}^k y_{t+j}\\] where \\(m = 2k+1\\).\nThat is, the estimate of the trend-cycle at time \\(t\\) is obtained by averaging values of the time series within \\(k\\) periods of \\(t\\)."
  },
  {
    "objectID": "slides/3-decomp.html#ma",
    "href": "slides/3-decomp.html#ma",
    "title": "Chapter 3 Decomposition",
    "section": "MA",
    "text": "MA\n\nAveraging eliminates some of the randomness in the data, leaving a smooth trend-cycle component.\nCalled an m-MA, or MA(m), meaning a moving average of order m."
  },
  {
    "objectID": "slides/3-decomp.html#ma-global-economy",
    "href": "slides/3-decomp.html#ma-global-economy",
    "title": "Chapter 3 Decomposition",
    "section": "MA global economy",
    "text": "MA global economy\n\nglobal_economy |&gt;\n  filter(Country == \"Australia\") |&gt;\n  autoplot(Exports) +\n  labs(y = \"% of GDP\", title = \"Total Australian exports\")"
  },
  {
    "objectID": "slides/3-decomp.html#ma-global-economy-1",
    "href": "slides/3-decomp.html#ma-global-economy-1",
    "title": "Chapter 3 Decomposition",
    "section": "MA global economy",
    "text": "MA global economy\n\nA moving average is a an average that moves…\nMA(5) would mean we use the average of two time series values before \\(y_t\\), \\(y_t\\) itself, and the two values after \\(y_t\\).\nEx: to get the MA(5) for \\(y_{100}\\) we would use the average of \\(y_{98},y_{99},y_{100},y_{101}\\) and \\(y_{102}\\).\nWhat is a limitation of this method?"
  },
  {
    "objectID": "slides/3-decomp.html#ma-global-economy-sliding-window",
    "href": "slides/3-decomp.html#ma-global-economy-sliding-window",
    "title": "Chapter 3 Decomposition",
    "section": "MA global economy sliding window",
    "text": "MA global economy sliding window\n\nslide_dbl() from the slider package applies a function to “sliding” time windows. In this case, we use the mean() function with a window of size 5.\n\n\n\naus_exports &lt;- global_economy |&gt;\n  filter(Country == \"Australia\") |&gt;\n  mutate(\n    `5-MA` = slider::slide_dbl(Exports, mean,\n                .before = 2, .after = 2, .complete = TRUE)\n  )"
  },
  {
    "objectID": "slides/3-decomp.html#ma-trend-line",
    "href": "slides/3-decomp.html#ma-trend-line",
    "title": "Chapter 3 Decomposition",
    "section": "MA trend line",
    "text": "MA trend line\n\nCodePlot\n\n\n\naus_exports |&gt;\n  autoplot(Exports) +\n  geom_line(aes(y = `5-MA`), colour = \"#D55E00\") +\n  labs(y = \"% of GDP\",\n       title = \"Total Australian exports\")"
  },
  {
    "objectID": "slides/3-decomp.html#history-of-time-series-decomposition-1",
    "href": "slides/3-decomp.html#history-of-time-series-decomposition-1",
    "title": "Chapter 3 Decomposition",
    "section": "History of time series decomposition",
    "text": "History of time series decomposition\n\nClassical method originated in 1920s.\nCensus II method introduced in 1957. Basis for X-11 method and variants (including X-12-ARIMA, X-13-ARIMA)\nSTL method introduced in 1983\nTRAMO/SEATS introduced in 1990s."
  },
  {
    "objectID": "slides/3-decomp.html#national-statistics-offices",
    "href": "slides/3-decomp.html#national-statistics-offices",
    "title": "Chapter 3 Decomposition",
    "section": "National Statistics Offices",
    "text": "National Statistics Offices\n\nABS uses X-12-ARIMA\nUS Census Bureau uses X-13ARIMA-SEATS\nStatistics Canada uses X-12-ARIMA\nONS (UK) uses X-12-ARIMA\nEuroStat use X-13ARIMA-SEATS"
  },
  {
    "objectID": "slides/3-decomp.html#x-11-decomposition",
    "href": "slides/3-decomp.html#x-11-decomposition",
    "title": "Chapter 3 Decomposition",
    "section": "X-11 decomposition",
    "text": "X-11 decomposition\nAdvantages\n\nRelatively robust to outliers\nCompletely automated choices for trend and seasonal changes\nVery widely tested on economic data over a long period of time.\n\n\nDisadvantages\n\nNo prediction/confidence intervals\nAd hoc method with no underlying model\nOnly developed for quarterly and monthly data"
  },
  {
    "objectID": "slides/3-decomp.html#extensions-x-12-arima-and-x-13-arima",
    "href": "slides/3-decomp.html#extensions-x-12-arima-and-x-13-arima",
    "title": "Chapter 3 Decomposition",
    "section": "Extensions: X-12-ARIMA and X-13-ARIMA",
    "text": "Extensions: X-12-ARIMA and X-13-ARIMA\n\nThe X-11, X-12-ARIMA and X-13-ARIMA methods are based on Census II decomposition.\nThese allow adjustments for trading days and other explanatory variables.\nKnown outliers can be omitted.\nLevel shifts and ramp effects can be modelled.\nMissing values estimated and replaced.\nHoliday factors (e.g., Easter, Labour Day) can be estimated."
  },
  {
    "objectID": "slides/3-decomp.html#x-13arima-seats",
    "href": "slides/3-decomp.html#x-13arima-seats",
    "title": "Chapter 3 Decomposition",
    "section": "X-13ARIMA-SEATS",
    "text": "X-13ARIMA-SEATS\nAdvantages\n\nModel-based\nSmooth trend estimate\nAllows estimates at end points\nAllows changing seasonality\nDeveloped for economic data\n\n\nDisadvantages\n\nOnly developed for quarterly and monthly data"
  },
  {
    "objectID": "slides/3-decomp.html#loess",
    "href": "slides/3-decomp.html#loess",
    "title": "Chapter 3 Decomposition",
    "section": "LOESS?",
    "text": "LOESS?\nhttps://www.youtube.com/watch?v=Vf7oJ6z2LCc"
  },
  {
    "objectID": "slides/3-decomp.html#stl-decomposition-1",
    "href": "slides/3-decomp.html#stl-decomposition-1",
    "title": "Chapter 3 Decomposition",
    "section": "STL decomposition",
    "text": "STL decomposition\n\nSTL: “Seasonal and Trend decomposition using Loess”\nVery versatile and robust.\nUnlike X-12-ARIMA, STL will handle any type of seasonality.\nSeasonal component allowed to change over time, and rate of change controlled by user.\nSmoothness of trend-cycle also controlled by user.\nRobust to outliers\nNot trading day or calendar adjustments.\nOnly additive.\nTake logs to get multiplicative decomposition.\nUse Box-Cox transformations to get other decompositions."
  },
  {
    "objectID": "slides/3-decomp.html#stl-decomposition-2",
    "href": "slides/3-decomp.html#stl-decomposition-2",
    "title": "Chapter 3 Decomposition",
    "section": "STL decomposition",
    "text": "STL decomposition\n\nus_retail_employment |&gt;\n  model(STL(Employed ~ season(window=9), robust=TRUE)) |&gt;\n  components() |&gt; autoplot() +\n    labs(title = \"STL decomposition: US retail employment\")"
  },
  {
    "objectID": "slides/3-decomp.html#stl-decomposition-3",
    "href": "slides/3-decomp.html#stl-decomposition-3",
    "title": "Chapter 3 Decomposition",
    "section": "STL decomposition",
    "text": "STL decomposition"
  },
  {
    "objectID": "slides/3-decomp.html#stl-decomposition-4",
    "href": "slides/3-decomp.html#stl-decomposition-4",
    "title": "Chapter 3 Decomposition",
    "section": "STL decomposition",
    "text": "STL decomposition\n\nus_retail_employment |&gt;\n  model(STL(Employed ~ season(window=5))) |&gt;\n  components()\n\nus_retail_employment |&gt;\n  model(STL(Employed ~ trend(window=15) +\n                       season(window=\"periodic\"),\n            robust = TRUE)\n  ) |&gt; components()\n\n\ntrend(window = ?) controls wiggliness of trend component.\nseason(window = ?) controls variation on seasonal component.\nseason(window = 'periodic') is equivalent to an infinite window."
  },
  {
    "objectID": "slides/3-decomp.html#stl-decomposition-5",
    "href": "slides/3-decomp.html#stl-decomposition-5",
    "title": "Chapter 3 Decomposition",
    "section": "STL decomposition",
    "text": "STL decomposition\n\nus_retail_employment |&gt;\n  model(STL(Employed)) |&gt;\n  components() |&gt; autoplot()\n\n\n\n\n\n\n\n\nNote\n\n\nSTL() chooses by default. This can include transformations."
  },
  {
    "objectID": "slides/3-decomp.html#stl-decomposition-6",
    "href": "slides/3-decomp.html#stl-decomposition-6",
    "title": "Chapter 3 Decomposition",
    "section": "STL decomposition",
    "text": "STL decomposition\n\nAlgorithm that updates trend and seasonal components iteratively.\nStarts with \\(\\hat{T}_t=0\\)\nUses a mixture of loess and moving averages to successively refine the trend and seasonal estimates.\nThe trend window controls loess bandwidth applied to deasonalised values.\nThe season window controls loess bandwidth applied to detrended subseries.\nRobustness weights based on remainder.\nDefault season window = 13\nDefault trend window = nextodd( ceiling((1.5*period)/(1-(1.5/s.window)))"
  },
  {
    "objectID": "slides/3-decomp_o.html",
    "href": "slides/3-decomp_o.html",
    "title": "Chapter 3 Decomposition",
    "section": "",
    "text": "library(purrr)\nlibrary(gganimate)\nlibrary(latex2exp)\nlibrary(fpp3)"
  },
  {
    "objectID": "slides/3-decomp_o.html#setup",
    "href": "slides/3-decomp_o.html#setup",
    "title": "Chapter 3 Decomposition",
    "section": "",
    "text": "library(purrr)\nlibrary(gganimate)\nlibrary(latex2exp)\nlibrary(fpp3)"
  },
  {
    "objectID": "slides/3-decomp_o.html#per-capita-adjustments",
    "href": "slides/3-decomp_o.html#per-capita-adjustments",
    "title": "Chapter 3 Decomposition",
    "section": "Per capita adjustments",
    "text": "Per capita adjustments\n\nglobal_economy |&gt;\n  filter(Country == \"Australia\") |&gt;\n  autoplot(GDP)"
  },
  {
    "objectID": "slides/3-decomp_o.html#per-capita-adjustments-1",
    "href": "slides/3-decomp_o.html#per-capita-adjustments-1",
    "title": "Chapter 3 Decomposition",
    "section": "Per capita adjustments",
    "text": "Per capita adjustments\n\nglobal_economy |&gt;\n  filter(Country == \"Australia\") |&gt;\n  autoplot(GDP / Population)"
  },
  {
    "objectID": "slides/3-decomp_o.html#you-try",
    "href": "slides/3-decomp_o.html#you-try",
    "title": "Chapter 3 Decomposition",
    "section": "You Try!",
    "text": "You Try!\n\nConsider the GDP information in global_economy. Plot the GDP per capita for each country over time. Which country has the highest GDP per capita? How has this changed over time? –&gt;"
  },
  {
    "objectID": "slides/3-decomp_o.html#inflation-adjustments",
    "href": "slides/3-decomp_o.html#inflation-adjustments",
    "title": "Chapter 3 Decomposition",
    "section": "Inflation adjustments",
    "text": "Inflation adjustments\n\nData which are affected by the value of money are best adjusted before modelling.\nFor example, the average cost of a new house will have increased over the last few decades due to inflation. A $200,000 house this year is not the same as a $200,000 house twenty years ago."
  },
  {
    "objectID": "slides/3-decomp_o.html#inflation-adjustments-1",
    "href": "slides/3-decomp_o.html#inflation-adjustments-1",
    "title": "Chapter 3 Decomposition",
    "section": "Inflation adjustments",
    "text": "Inflation adjustments\n\nTo make these adjustments, a price index is used. If \\(z_t\\) denotes the price index and \\(y_t\\) denotes the original house price in year \\(t\\), then\n\n. . .\n\\[x_t=y_t/z_t \\cdot z_{2000}\\]\ngives the adjusted house price at year 2000 dollar values.\n\nPrice indexes are often constructed by government agencies. For consumer goods, a common price index is the Consumer Price Index (or CPI)."
  },
  {
    "objectID": "slides/3-decomp_o.html#inflation-adjustments-2",
    "href": "slides/3-decomp_o.html#inflation-adjustments-2",
    "title": "Chapter 3 Decomposition",
    "section": "Inflation adjustments",
    "text": "Inflation adjustments\n\nCodePlot\n\n\n\naus_newspaper_retail &lt;- readr::read_csv('data/aus_newspaper_retail.csv')\n# Turnover: Retail turnover in $Million AUD\n\naus_newspaper_retail &lt;- aus_newspaper_retail |&gt;\n  select(Year,Turnover,name) |&gt; # Picks out these 3 columns/variables\n  group_by(Year,name) |&gt; # Tells are to now calculate by groups by year and name\n  summarise(sum_Turnover = sum(Turnover))|&gt; #adds up Turnover for each year and name combination\n  as_tsibble(index = Year, key = \"name\") # Converts to time series\n\naus_newspaper_retail |&gt; autoplot(sum_Turnover) +\n  facet_grid(name ~ ., scales = \"free_y\") + # This will make a grid of plots\n    # with name used to break into multiple plots along the y direction\n  labs(title = \"Turnover: Australian print media industry\", y = \"$AU\")"
  },
  {
    "objectID": "slides/3-decomp_o.html#mathematical-transformations",
    "href": "slides/3-decomp_o.html#mathematical-transformations",
    "title": "Chapter 3 Decomposition",
    "section": "Mathematical transformations",
    "text": "Mathematical transformations\nIf the data show different variation at different levels of the series, then a transformation can be useful.\n. . .\nDenote original observations as \\(y_1,\\dots,y_T\\) and transformed observations as \\(w_1, \\dots, w_T\\).\n. . .\n\n\n\n\nFunction\n\nImpact\n\n\n\n\nSquare root\n\\(w_t = \\sqrt{y_t}\\)\n\\(\\downarrow\\)\n\n\nCube root\n\\(w_t = \\sqrt[3]{y_t}\\)\nIncreasing\n\n\nLogarithm\n\\(w_t = \\log(y_t)\\)\nstrength\n\n\n\n. . .\nLogarithms, in particular, are useful because they are more interpretable: changes in a log value are relative (percent) changes on the original scale."
  },
  {
    "objectID": "slides/3-decomp_o.html#mathematical-transformations-14",
    "href": "slides/3-decomp_o.html#mathematical-transformations-14",
    "title": "Chapter 3 Decomposition",
    "section": "Mathematical transformations (1/4)",
    "text": "Mathematical transformations (1/4)\n\nfood &lt;- aus_retail |&gt;\n  filter(Industry == \"Food retailing\") |&gt;\n  summarise(Turnover = sum(Turnover))"
  },
  {
    "objectID": "slides/3-decomp_o.html#mathematical-transformations-24",
    "href": "slides/3-decomp_o.html#mathematical-transformations-24",
    "title": "Chapter 3 Decomposition",
    "section": "Mathematical transformations (2/4)",
    "text": "Mathematical transformations (2/4)\n\nfood |&gt; autoplot(sqrt(Turnover)) +\n  labs(y = \"Square root turnover\")"
  },
  {
    "objectID": "slides/3-decomp_o.html#mathematical-transformations-34",
    "href": "slides/3-decomp_o.html#mathematical-transformations-34",
    "title": "Chapter 3 Decomposition",
    "section": "Mathematical transformations (3/4)",
    "text": "Mathematical transformations (3/4)\n\nfood |&gt; autoplot(Turnover^(1/3)) +\n  labs(y = \"Cube root turnover\")"
  },
  {
    "objectID": "slides/3-decomp_o.html#mathematical-transformations-44",
    "href": "slides/3-decomp_o.html#mathematical-transformations-44",
    "title": "Chapter 3 Decomposition",
    "section": "Mathematical transformations (4/4)",
    "text": "Mathematical transformations (4/4)\n\nfood |&gt; autoplot(log(Turnover)) +\n  labs(y = \"Log turnover\")\n\n\n\n\n\n\n\n\n. . .\n(log here is the natural log, base \\(e\\))"
  },
  {
    "objectID": "slides/3-decomp_o.html#box-cox-transformations",
    "href": "slides/3-decomp_o.html#box-cox-transformations",
    "title": "Chapter 3 Decomposition",
    "section": "Box-Cox transformations",
    "text": "Box-Cox transformations\nEach of these transformations is close to a member of the family of :\n\\[w_t = \\left\\{\\begin{array}{ll}\n        \\log(y_t),      & \\quad \\lambda = 0; \\\\\n        (sign(y_t)|y_t|^\\lambda-1)/\\lambda ,         & \\quad \\lambda \\ne 0.\n\\end{array}\\right.\\]\n\nActually the Bickel-Doksum transformation (allowing for \\(y_t&lt;0\\))\n\\(\\lambda=1\\): (No substantive transformation)\n\\(\\lambda=\\frac12\\): (Square root plus linear transformation)\n\\(\\lambda=0\\): (Natural logarithm)"
  },
  {
    "objectID": "slides/3-decomp_o.html#box-cox-transformations-1",
    "href": "slides/3-decomp_o.html#box-cox-transformations-1",
    "title": "Chapter 3 Decomposition",
    "section": "Box-Cox transformations",
    "text": "Box-Cox transformations"
  },
  {
    "objectID": "slides/3-decomp_o.html#box-cox-transformations-2",
    "href": "slides/3-decomp_o.html#box-cox-transformations-2",
    "title": "Chapter 3 Decomposition",
    "section": "Box-Cox transformations",
    "text": "Box-Cox transformations\n\nfood |&gt;\n  features(Turnover, features = guerrero)\n\n# A tibble: 1 × 1\n  lambda_guerrero\n            &lt;dbl&gt;\n1          0.0895\n\n\n\nThis attempts to balance the seasonal fluctuations and random variation across the series.\nAlways check the results.\nA low value of \\(\\lambda\\) can give extremely large prediction intervals."
  },
  {
    "objectID": "slides/3-decomp_o.html#box-cox-transformations-3",
    "href": "slides/3-decomp_o.html#box-cox-transformations-3",
    "title": "Chapter 3 Decomposition",
    "section": "Box-Cox transformations",
    "text": "Box-Cox transformations\n\nfood |&gt; autoplot(box_cox(Turnover, 0.0524)) +\n  labs(y = \"Box-Cox transformed turnover\")"
  },
  {
    "objectID": "slides/3-decomp_o.html#transformations",
    "href": "slides/3-decomp_o.html#transformations",
    "title": "Chapter 3 Decomposition",
    "section": "Transformations",
    "text": "Transformations\n\nOften no transformation needed.\nSimple transformations are easier to explain and work well enough.\nTransformations can have very large effect on PI.\nIf some data are zero or negative, then use \\(\\lambda&gt;0\\).\nlog1p() can also be useful for data with zeros.\nChoosing logs is a simple way to force forecasts to be positive\nTransformations must be reversed to obtain forecasts on the original scale. (Handled automatically by fable.)"
  },
  {
    "objectID": "slides/3-decomp_o.html#you-try-1",
    "href": "slides/3-decomp_o.html#you-try-1",
    "title": "Chapter 3 Decomposition",
    "section": "You Try!",
    "text": "You Try!\n\nFor the following series, find an appropriate transformation in order to stabilise the variance.\n\nUnited States GDP from global_economy\nSlaughter of Victorian “Bulls, bullocks and steers” in aus_livestock\nVictorian Electricity Demand from vic_elec.\nGas production from aus_production\n\nWhy is a Box-Cox transformation unhelpful for the canadian_gas data?"
  },
  {
    "objectID": "slides/3-decomp_o.html#time-series-patterns",
    "href": "slides/3-decomp_o.html#time-series-patterns",
    "title": "Chapter 3 Decomposition",
    "section": "Time series patterns",
    "text": "Time series patterns\nRecall\n\nTrend\n\npattern exists when there is a long-term increase or decrease in the data.\n\nCyclic\n\npattern exists when data exhibit rises and falls that are not of fixed period (duration usually of at least 2 years).\n\nSeasonal\n\npattern exists when a series is influenced by seasonal factors (e.g., the quarter of the year, the month, or day of the week)."
  },
  {
    "objectID": "slides/3-decomp_o.html#time-series-decomposition",
    "href": "slides/3-decomp_o.html#time-series-decomposition",
    "title": "Chapter 3 Decomposition",
    "section": "Time series decomposition",
    "text": "Time series decomposition\n\\(y_t = f(S_t, T_t, R_t)\\)\nwhere \\(y_t=\\), data at period \\(t\\)\n\\(T_t=\\), trend-cycle component at period \\(t\\)\n\\(S_t=\\), seasonal component at period \\(t\\)\n\\(R_t=\\),remainder component at period \\(t\\)\n. . .\nAdditive decomposition: \\(y_t = S_t + T_t + R_t.\\)\n. . .\nMultiplicative decomposition: \\(y_t = S_t \\times T_t \\times R_t.\\)"
  },
  {
    "objectID": "slides/3-decomp_o.html#time-series-decomposition-1",
    "href": "slides/3-decomp_o.html#time-series-decomposition-1",
    "title": "Chapter 3 Decomposition",
    "section": "Time series decomposition",
    "text": "Time series decomposition\n\nAdditive model appropriate if magnitude of seasonal fluctuations does not vary with level.\nIf seasonal are proportional to level of series, then multiplicative model appropriate.\nMultiplicative decomposition more prevalent with economic series\nAlternative: use a Box-Cox transformation, and then use additive decomposition.\nLogs turn multiplicative relationship into an additive relationship:\n\n. . .\n\\[y_t = S_t \\times T_t \\times R_t \\quad\\Rightarrow\\quad\n\\log y_t = \\log S_t + \\log T_t + \\log R_t.\\]"
  },
  {
    "objectID": "slides/3-decomp_o.html#us-retail-employment",
    "href": "slides/3-decomp_o.html#us-retail-employment",
    "title": "Chapter 3 Decomposition",
    "section": "US Retail Employment",
    "text": "US Retail Employment\n\nus_retail_employment &lt;- us_employment |&gt;\n  filter(year(Month) &gt;= 1990, Title == \"Retail Trade\") |&gt;\n  select(-Series_ID)\nus_retail_employment\n\n# A tsibble: 357 x 3 [1M]\n      Month Title        Employed\n      &lt;mth&gt; &lt;chr&gt;           &lt;dbl&gt;\n 1 1990 Jan Retail Trade   13256.\n 2 1990 Feb Retail Trade   12966.\n 3 1990 Mar Retail Trade   12938.\n 4 1990 Apr Retail Trade   13012.\n 5 1990 May Retail Trade   13108.\n 6 1990 Jun Retail Trade   13183.\n 7 1990 Jul Retail Trade   13170.\n 8 1990 Aug Retail Trade   13160.\n 9 1990 Sep Retail Trade   13113.\n10 1990 Oct Retail Trade   13185.\n# ℹ 347 more rows"
  },
  {
    "objectID": "slides/3-decomp_o.html#us-retail-employment-1",
    "href": "slides/3-decomp_o.html#us-retail-employment-1",
    "title": "Chapter 3 Decomposition",
    "section": "US Retail Employment",
    "text": "US Retail Employment\n\nus_retail_employment |&gt;\n  autoplot(Employed) +\n  labs(y=\"Persons (thousands)\", title=\"Total employment in US retail\")"
  },
  {
    "objectID": "slides/3-decomp_o.html#us-retail-employment-2",
    "href": "slides/3-decomp_o.html#us-retail-employment-2",
    "title": "Chapter 3 Decomposition",
    "section": "US Retail Employment",
    "text": "US Retail Employment\n\nus_retail_employment |&gt;\n  model(stl = STL(Employed))\n\n# A mable: 1 x 1\n      stl\n  &lt;model&gt;\n1   &lt;STL&gt;"
  },
  {
    "objectID": "slides/3-decomp_o.html#us-retail-employment-3",
    "href": "slides/3-decomp_o.html#us-retail-employment-3",
    "title": "Chapter 3 Decomposition",
    "section": "US Retail Employment",
    "text": "US Retail Employment\n\ndcmp &lt;- us_retail_employment |&gt;\n  model(stl = STL(Employed))\ncomponents(dcmp)\n\n# A dable: 357 x 7 [1M]\n# Key:     .model [1]\n# :        Employed = trend + season_year + remainder\n   .model    Month Employed  trend season_year remainder season_adjust\n   &lt;chr&gt;     &lt;mth&gt;    &lt;dbl&gt;  &lt;dbl&gt;       &lt;dbl&gt;     &lt;dbl&gt;         &lt;dbl&gt;\n 1 stl    1990 Jan   13256. 13288.      -33.0      0.836        13289.\n 2 stl    1990 Feb   12966. 13269.     -258.     -44.6          13224.\n 3 stl    1990 Mar   12938. 13250.     -290.     -22.1          13228.\n 4 stl    1990 Apr   13012. 13231.     -220.       1.05         13232.\n 5 stl    1990 May   13108. 13211.     -114.      11.3          13223.\n 6 stl    1990 Jun   13183. 13192.      -24.3     15.5          13207.\n 7 stl    1990 Jul   13170. 13172.      -23.2     21.6          13193.\n 8 stl    1990 Aug   13160. 13151.       -9.52    17.8          13169.\n 9 stl    1990 Sep   13113. 13131.      -39.5     22.0          13153.\n10 stl    1990 Oct   13185. 13110.       61.6     13.2          13124.\n# ℹ 347 more rows"
  },
  {
    "objectID": "slides/3-decomp_o.html#us-retail-employment-4",
    "href": "slides/3-decomp_o.html#us-retail-employment-4",
    "title": "Chapter 3 Decomposition",
    "section": "US Retail Employment",
    "text": "US Retail Employment\n\nus_retail_employment |&gt;\n  autoplot(Employed, color='gray') +\n  autolayer(components(dcmp), trend, color='#523178') +\n  labs(y=\"Persons (thousands)\", title=\"Total employment in US retail\")"
  },
  {
    "objectID": "slides/3-decomp_o.html#us-retail-employment-5",
    "href": "slides/3-decomp_o.html#us-retail-employment-5",
    "title": "Chapter 3 Decomposition",
    "section": "US Retail Employment",
    "text": "US Retail Employment\n\ncomponents(dcmp) |&gt; autoplot()"
  },
  {
    "objectID": "slides/3-decomp_o.html#us-retail-employment-6",
    "href": "slides/3-decomp_o.html#us-retail-employment-6",
    "title": "Chapter 3 Decomposition",
    "section": "US Retail Employment",
    "text": "US Retail Employment\n\ncomponents(dcmp) |&gt; gg_subseries(season_year)"
  },
  {
    "objectID": "slides/3-decomp_o.html#seasonal-adjustment",
    "href": "slides/3-decomp_o.html#seasonal-adjustment",
    "title": "Chapter 3 Decomposition",
    "section": "Seasonal adjustment",
    "text": "Seasonal adjustment\n\nUseful by-product of decomposition: an easy way to calculate seasonally adjusted data.\nAdditive decomposition: seasonally adjusted data given by \\[y_t - S_t = T_t + R_t\\]\nMultiplicative decomposition: seasonally adjusted data given by \\[y_t / S_t = T_t \\times R_t\\]"
  },
  {
    "objectID": "slides/3-decomp_o.html#us-retail-employment-7",
    "href": "slides/3-decomp_o.html#us-retail-employment-7",
    "title": "Chapter 3 Decomposition",
    "section": "US Retail Employment",
    "text": "US Retail Employment\n\nus_retail_employment |&gt;\n  autoplot(Employed, color='gray') +\n  autolayer(components(dcmp), season_adjust, color='#0072B2') +\n  labs(y=\"Persons (thousands)\", title=\"Total employment in US retail\")"
  },
  {
    "objectID": "slides/3-decomp_o.html#seasonal-adjustment-1",
    "href": "slides/3-decomp_o.html#seasonal-adjustment-1",
    "title": "Chapter 3 Decomposition",
    "section": "Seasonal adjustment",
    "text": "Seasonal adjustment\n\nWe use estimates of \\(S\\) based on past values to seasonally adjust a current value.\nSeasonally adjusted series reflect remainders as well as trend. Therefore they are not “smooth” and “downturns” or “upturns” can be misleading.\nIt is better to use the trend-cycle component to look for turning points."
  },
  {
    "objectID": "slides/3-decomp_o.html#moving-averages",
    "href": "slides/3-decomp_o.html#moving-averages",
    "title": "Chapter 3 Decomposition",
    "section": "Moving Averages",
    "text": "Moving Averages\n\nThe classical method of time series decomposition originated in the 1920s and was widely used until the 1950s.\nA moving average of order \\(m\\) can be written as \\[\\hat{T}_t = \\frac{1}{m}\\Sigma_{j=-k}^k y_{t+j}\\] where \\(m = 2k+1\\).\nThat is, the estimate of the trend-cycle at time \\(t\\) is obtained by averaging values of the time series within \\(k\\) periods of \\(t\\)."
  },
  {
    "objectID": "slides/3-decomp_o.html#ma",
    "href": "slides/3-decomp_o.html#ma",
    "title": "Chapter 3 Decomposition",
    "section": "MA",
    "text": "MA\n\nAveraging eliminates some of the randomness in the data, leaving a smooth trend-cycle component.\nCalled an m-MA, or MA(m), meaning a moving average of order m."
  },
  {
    "objectID": "slides/3-decomp_o.html#ma-global-economy",
    "href": "slides/3-decomp_o.html#ma-global-economy",
    "title": "Chapter 3 Decomposition",
    "section": "MA global economy",
    "text": "MA global economy\n\nglobal_economy |&gt;\n  filter(Country == \"Australia\") |&gt;\n  autoplot(Exports) +\n  labs(y = \"% of GDP\", title = \"Total Australian exports\")"
  },
  {
    "objectID": "slides/3-decomp_o.html#ma-global-economy-1",
    "href": "slides/3-decomp_o.html#ma-global-economy-1",
    "title": "Chapter 3 Decomposition",
    "section": "MA global economy",
    "text": "MA global economy\n\nA moving average is a an average that moves…\nMA(5) would mean we use the average of two time series values before \\(y_t\\), \\(y_t\\) itself, and the two values after \\(y_t\\).\nEx: to get the MA(5) for \\(y_{100}\\) we would use the average of \\(y_{98},y_{99},y_{100},y_{101}\\) and \\(y_{102}\\).\nWhat is a limitation of this method?"
  },
  {
    "objectID": "slides/3-decomp_o.html#ma-global-economy-sliding-window",
    "href": "slides/3-decomp_o.html#ma-global-economy-sliding-window",
    "title": "Chapter 3 Decomposition",
    "section": "MA global economy sliding window",
    "text": "MA global economy sliding window\n\nslide_dbl() from the slider package applies a function to “sliding” time windows. In this case, we use the mean() function with a window of size 5.\n\n. . .\n\naus_exports &lt;- global_economy |&gt;\n  filter(Country == \"Australia\") |&gt;\n  mutate(\n    `5-MA` = slider::slide_dbl(Exports, mean,\n                .before = 2, .after = 2, .complete = TRUE)\n  )"
  },
  {
    "objectID": "slides/3-decomp_o.html#ma-trend-line",
    "href": "slides/3-decomp_o.html#ma-trend-line",
    "title": "Chapter 3 Decomposition",
    "section": "MA trend line",
    "text": "MA trend line\n\nCodePlot\n\n\n\naus_exports |&gt;\n  autoplot(Exports) +\n  geom_line(aes(y = `5-MA`), colour = \"#D55E00\") +\n  labs(y = \"% of GDP\",\n       title = \"Total Australian exports\")"
  },
  {
    "objectID": "slides/3-decomp_o.html#history-of-time-series-decomposition-1",
    "href": "slides/3-decomp_o.html#history-of-time-series-decomposition-1",
    "title": "Chapter 3 Decomposition",
    "section": "History of time series decomposition",
    "text": "History of time series decomposition\n\nClassical method originated in 1920s.\nCensus II method introduced in 1957. Basis for X-11 method and variants (including X-12-ARIMA, X-13-ARIMA)\nSTL method introduced in 1983\nTRAMO/SEATS introduced in 1990s."
  },
  {
    "objectID": "slides/3-decomp_o.html#national-statistics-offices",
    "href": "slides/3-decomp_o.html#national-statistics-offices",
    "title": "Chapter 3 Decomposition",
    "section": "National Statistics Offices",
    "text": "National Statistics Offices\n\nABS uses X-12-ARIMA\nUS Census Bureau uses X-13ARIMA-SEATS\nStatistics Canada uses X-12-ARIMA\nONS (UK) uses X-12-ARIMA\nEuroStat use X-13ARIMA-SEATS"
  },
  {
    "objectID": "slides/3-decomp_o.html#x-11-decomposition",
    "href": "slides/3-decomp_o.html#x-11-decomposition",
    "title": "Chapter 3 Decomposition",
    "section": "X-11 decomposition",
    "text": "X-11 decomposition\nAdvantages\n\nRelatively robust to outliers\nCompletely automated choices for trend and seasonal changes\nVery widely tested on economic data over a long period of time.\n\n. . .\nDisadvantages\n\nNo prediction/confidence intervals\nAd hoc method with no underlying model\nOnly developed for quarterly and monthly data"
  },
  {
    "objectID": "slides/3-decomp_o.html#extensions-x-12-arima-and-x-13-arima",
    "href": "slides/3-decomp_o.html#extensions-x-12-arima-and-x-13-arima",
    "title": "Chapter 3 Decomposition",
    "section": "Extensions: X-12-ARIMA and X-13-ARIMA",
    "text": "Extensions: X-12-ARIMA and X-13-ARIMA\n\nThe X-11, X-12-ARIMA and X-13-ARIMA methods are based on Census II decomposition.\nThese allow adjustments for trading days and other explanatory variables.\nKnown outliers can be omitted.\nLevel shifts and ramp effects can be modelled.\nMissing values estimated and replaced.\nHoliday factors (e.g., Easter, Labour Day) can be estimated."
  },
  {
    "objectID": "slides/3-decomp_o.html#x-13arima-seats",
    "href": "slides/3-decomp_o.html#x-13arima-seats",
    "title": "Chapter 3 Decomposition",
    "section": "X-13ARIMA-SEATS",
    "text": "X-13ARIMA-SEATS\nAdvantages\n\nModel-based\nSmooth trend estimate\nAllows estimates at end points\nAllows changing seasonality\nDeveloped for economic data\n\n. . .\nDisadvantages\n\nOnly developed for quarterly and monthly data"
  },
  {
    "objectID": "slides/3-decomp_o.html#loess",
    "href": "slides/3-decomp_o.html#loess",
    "title": "Chapter 3 Decomposition",
    "section": "LOESS?",
    "text": "LOESS?\nhttps://www.youtube.com/watch?v=Vf7oJ6z2LCc"
  },
  {
    "objectID": "slides/3-decomp_o.html#stl-decomposition-1",
    "href": "slides/3-decomp_o.html#stl-decomposition-1",
    "title": "Chapter 3 Decomposition",
    "section": "STL decomposition",
    "text": "STL decomposition\n\nSTL: “Seasonal and Trend decomposition using Loess”\nVery versatile and robust.\nUnlike X-12-ARIMA, STL will handle any type of seasonality.\nSeasonal component allowed to change over time, and rate of change controlled by user.\nSmoothness of trend-cycle also controlled by user.\nRobust to outliers\nNot trading day or calendar adjustments.\nOnly additive.\nTake logs to get multiplicative decomposition.\nUse Box-Cox transformations to get other decompositions."
  },
  {
    "objectID": "slides/3-decomp_o.html#stl-decomposition-2",
    "href": "slides/3-decomp_o.html#stl-decomposition-2",
    "title": "Chapter 3 Decomposition",
    "section": "STL decomposition",
    "text": "STL decomposition\n\nus_retail_employment |&gt;\n  model(STL(Employed ~ season(window=9), robust=TRUE)) |&gt;\n  components() |&gt; autoplot() +\n    labs(title = \"STL decomposition: US retail employment\")"
  },
  {
    "objectID": "slides/3-decomp_o.html#stl-decomposition-3",
    "href": "slides/3-decomp_o.html#stl-decomposition-3",
    "title": "Chapter 3 Decomposition",
    "section": "STL decomposition",
    "text": "STL decomposition"
  },
  {
    "objectID": "slides/3-decomp_o.html#stl-decomposition-4",
    "href": "slides/3-decomp_o.html#stl-decomposition-4",
    "title": "Chapter 3 Decomposition",
    "section": "STL decomposition",
    "text": "STL decomposition\n\nus_retail_employment |&gt;\n  model(STL(Employed ~ season(window=5))) |&gt;\n  components()\n\nus_retail_employment |&gt;\n  model(STL(Employed ~ trend(window=15) +\n                       season(window=\"periodic\"),\n            robust = TRUE)\n  ) |&gt; components()\n\n\ntrend(window = ?) controls wiggliness of trend component.\nseason(window = ?) controls variation on seasonal component.\nseason(window = 'periodic') is equivalent to an infinite window."
  },
  {
    "objectID": "slides/3-decomp_o.html#stl-decomposition-5",
    "href": "slides/3-decomp_o.html#stl-decomposition-5",
    "title": "Chapter 3 Decomposition",
    "section": "STL decomposition",
    "text": "STL decomposition\n\nus_retail_employment |&gt;\n  model(STL(Employed)) |&gt;\n  components() |&gt; autoplot()\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nNote\n\n\n\nSTL() chooses by default. This can include transformations."
  },
  {
    "objectID": "slides/3-decomp_o.html#stl-decomposition-6",
    "href": "slides/3-decomp_o.html#stl-decomposition-6",
    "title": "Chapter 3 Decomposition",
    "section": "STL decomposition",
    "text": "STL decomposition\n\nAlgorithm that updates trend and seasonal components iteratively.\nStarts with \\(\\hat{T}_t=0\\)\nUses a mixture of loess and moving averages to successively refine the trend and seasonal estimates.\nThe trend window controls loess bandwidth applied to deasonalised values.\nThe season window controls loess bandwidth applied to detrended subseries.\nRobustness weights based on remainder.\nDefault season window = 13\nDefault trend window = nextodd( ceiling((1.5*period)/(1-(1.5/s.window)))"
  },
  {
    "objectID": "slides/1-getting-started.html#meet-the-prof",
    "href": "slides/1-getting-started.html#meet-the-prof",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "Meet the prof",
    "text": "Meet the prof\n\n\nDr. Tyler George\nWest 311"
  },
  {
    "objectID": "slides/1-getting-started.html#meet-each-other",
    "href": "slides/1-getting-started.html#meet-each-other",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "Meet each other!",
    "text": "Meet each other!"
  },
  {
    "objectID": "slides/1-getting-started.html#where-is",
    "href": "slides/1-getting-started.html#where-is",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "Where is?…",
    "text": "Where is?…\nCourse Website\nstats-tgeorge.github.io/STA364_TSApps/\n\nAll course materials (slides, exams, etc)\nLinks (book, data, and more)\n\nMoodle\n\nSubmissions\nGradebook"
  },
  {
    "objectID": "slides/1-getting-started.html#syllabus",
    "href": "slides/1-getting-started.html#syllabus",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "Syllabus",
    "text": "Syllabus\nLet’s open it up!"
  },
  {
    "objectID": "slides/1-getting-started.html#diversity-inclusion",
    "href": "slides/1-getting-started.html#diversity-inclusion",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "Diversity + inclusion",
    "text": "Diversity + inclusion\nIt is my intent that students from all diverse backgrounds and perspectives be well-served by this course, that students’ learning needs be addressed both in and out of class, and that the diversity that the students bring to this class be viewed as a resource, strength and benefit.\n\n\nPlease let me know your preferred name and pronouns on the Getting to know you survey.\nIf you feel like your performance in the class is being impacted by your experiences outside of class, please don’t hesitate to come and talk with me. I want to be a resource for you.\nI (like many people) am still in the process of learning about diverse perspectives and identities. If something was said in class (by anyone) that made you feel uncomfortable, please talk to me about it."
  },
  {
    "objectID": "slides/1-getting-started.html#collaboration-policy",
    "href": "slides/1-getting-started.html#collaboration-policy",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "Collaboration policy",
    "text": "Collaboration policy\n\nOnly work that is clearly assigned as team work should be completed collaboratively.\nSome labs/activities will be completed in groups. You should work with each other during, and sometimes outside of class, to complete the labs.\nHomework must be submitted individually. You may not directly share answers / code with others, however you are welcome to discuss the problems in general and ask for advice.\nExams must be completed individually. You may not discuss any aspect of the exam with peers. If you have questions, email me, especially if you get stuck on an usual problem (not a coding error)."
  },
  {
    "objectID": "slides/1-getting-started.html#sharing-reusing-code-policy",
    "href": "slides/1-getting-started.html#sharing-reusing-code-policy",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "Sharing / reusing code policy",
    "text": "Sharing / reusing code policy\n\nI are aware that a huge volume of code is available on the web, and many tasks may have solutions posted.\nUnless explicitly stated otherwise, this course’s policy is that may make use of any online resources (e.g. RStudio Community, StackOverflow, etc.) but you must explicitly cite where you obtained any code you directly use or use as inspiration in your solution(s). Often on exams, I will require you use code provided in class.\nAny recycled code that is discovered and is not explicitly cited will be treated as plagiarism, regardless of source\nYou do not need to cite code I provide in class or in the notes."
  },
  {
    "objectID": "slides/1-getting-started.html#five-tips-for-success",
    "href": "slides/1-getting-started.html#five-tips-for-success",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "Five tips for success",
    "text": "Five tips for success\n\nComplete all the preparation work before class (readings).\nAsk questions.\nDo the readings.\nDo the labs/activities.\nDo the Homework\nDon’t procrastinate! There is no time for falling behind on the block!"
  },
  {
    "objectID": "slides/1-getting-started.html#excel---not",
    "href": "slides/1-getting-started.html#excel---not",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "Excel - not…",
    "text": "Excel - not…"
  },
  {
    "objectID": "slides/1-getting-started.html#r",
    "href": "slides/1-getting-started.html#r",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "R",
    "text": "R"
  },
  {
    "objectID": "slides/1-getting-started.html#rstudio",
    "href": "slides/1-getting-started.html#rstudio",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "RStudio",
    "text": "RStudio\n\n\nRStudio Server: http://turing.cornellcollege.edu:8787 (Only available on campus)"
  },
  {
    "objectID": "slides/1-getting-started.html#r-and-rstudio",
    "href": "slides/1-getting-started.html#r-and-rstudio",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "R and RStudio",
    "text": "R and RStudio\n\n\n\n\n\n\n\n\nR is an open-source statistical programming language\nR is also an environment for statistical computing and graphics\nIt’s easily extensible with packages\n\n\n\n\nRStudio is a convenient interface for R called an IDE (integrated development environment), e.g. “I write R code in the RStudio IDE”\nRStudio is not a requirement for programming with R, but it’s very commonly used by R programmers and data scientists"
  },
  {
    "objectID": "slides/1-getting-started.html#r-vs.-rstudio",
    "href": "slides/1-getting-started.html#r-vs.-rstudio",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "R vs. RStudio",
    "text": "R vs. RStudio\n\n\n\n\n\n\n\nSource: Modern Dive."
  },
  {
    "objectID": "slides/1-getting-started.html#r-packages",
    "href": "slides/1-getting-started.html#r-packages",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "R packages",
    "text": "R packages\n\n\nPackages: Fundamental units of reproducible R code, including reusable R functions, the documentation that describes how to use them, and sample data1\nAs of March 14th, 2024, there are 20,582 R packages available on CRAN (the Comprehensive R Archive Network)2\nWe’re going to work with a small (but important) subset of these!\n\n\n\n\n1 Wickham and Bryan, R Packages.\n2 CRAN contributed packages."
  },
  {
    "objectID": "slides/1-getting-started.html#tour-r-rstudio",
    "href": "slides/1-getting-started.html#tour-r-rstudio",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "Tour: R + RStudio",
    "text": "Tour: R + RStudio\n\n\n\nOption 1:\nSit back and enjoy the show!\n\n\n\nOption 2:\n\n\nGo to the server http://turing.cornellcollege.edu\nCornell username all lower case\nStarting password given in class"
  },
  {
    "objectID": "slides/1-getting-started.html#tour-recap-r-rstudio",
    "href": "slides/1-getting-started.html#tour-recap-r-rstudio",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "Tour recap: R + RStudio",
    "text": "Tour recap: R + RStudio"
  },
  {
    "objectID": "slides/1-getting-started.html#a-short-list-for-now-of-r-essentials",
    "href": "slides/1-getting-started.html#a-short-list-for-now-of-r-essentials",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "A short list (for now) of R essentials",
    "text": "A short list (for now) of R essentials\n\nFunctions are (most often) verbs, followed by what they will be applied to in parentheses:\n\n\n\ndo_this(to_this)\ndo_that(to_this, to_that, with_those)\n\n\nPackages are installed with the install.packages() function and loaded with the library function, once per session:\n\n\n\n\ninstall.packages(\"package_name\")\nlibrary(package_name)"
  },
  {
    "objectID": "slides/1-getting-started.html#r-essentials-continued",
    "href": "slides/1-getting-started.html#r-essentials-continued",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "R essentials (continued)",
    "text": "R essentials (continued)\n\nColumns (variables) in data frames are accessed with $:\n\n\n\ndataframe$var_name\n\n\nObject documentation can be accessed with ?\n\n\n\n\n?mean"
  },
  {
    "objectID": "slides/1-getting-started.html#tidyverse",
    "href": "slides/1-getting-started.html#tidyverse",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "tidyverse",
    "text": "tidyverse\n\n\n\n\ntidyverse.org\n\nThe tidyverse is an opinionated collection of R packages designed for data science\nAll packages share an underlying philosophy and a common grammar"
  },
  {
    "objectID": "slides/1-getting-started.html#quarto-1",
    "href": "slides/1-getting-started.html#quarto-1",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "Quarto",
    "text": "Quarto\n\n\nFully reproducible reports – each time you render the analysis is ran from the beginning\nCode goes in chunks narrative goes outside of chunks\nA visual editor for a familiar / Google docs-like editing experience"
  },
  {
    "objectID": "slides/1-getting-started.html#tour-quarto",
    "href": "slides/1-getting-started.html#tour-quarto",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "Tour: Quarto",
    "text": "Tour: Quarto\n\n\n\nOption 1:\nSit back and enjoy the show!\n\n\n\nOption 2:\n\n\nGo to the server http://turing.cornellcollege.edu\nCornell username all lower case\nStarting password given in class"
  },
  {
    "objectID": "slides/1-getting-started.html#tour-recap-quarto",
    "href": "slides/1-getting-started.html#tour-recap-quarto",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "Tour recap: Quarto",
    "text": "Tour recap: Quarto"
  },
  {
    "objectID": "slides/1-getting-started.html#environments",
    "href": "slides/1-getting-started.html#environments",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "Environments",
    "text": "Environments\n\n\n\n\n\n\nImportant\n\n\nThe environment of your Quarto document is separate from the Console!\n\n\n\nRemember this, and expect it to bite you a few times as you’re learning to work with Quarto!"
  },
  {
    "objectID": "slides/1-getting-started.html#environments-1",
    "href": "slides/1-getting-started.html#environments-1",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "Environments",
    "text": "Environments\n\n\nFirst, run the following in the console:\n\nx &lt;- 2\nx * 3\n\n\n\nAll looks good, eh?\n\n\nThen, add the following in an R chunk in your Quarto document\n\nx * 3\n\n\n\nWhat happens? Why the error?"
  },
  {
    "objectID": "slides/1-getting-started.html#how-will-we-use-quarto",
    "href": "slides/1-getting-started.html#how-will-we-use-quarto",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "How will we use Quarto?",
    "text": "How will we use Quarto?\n\nEvery activity, project, etc. is an Quarto document\nYou’ll always have a template Quarto document to start with\nThe amount of scaffolding in the template will decrease over the block"
  },
  {
    "objectID": "slides/1-getting-started.html#forecasts-that-arent-forecasts",
    "href": "slides/1-getting-started.html#forecasts-that-arent-forecasts",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "Forecasts that aren’t forecasts",
    "text": "Forecasts that aren’t forecasts"
  },
  {
    "objectID": "slides/1-getting-started.html#what-can-we-forecast-19",
    "href": "slides/1-getting-started.html#what-can-we-forecast-19",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "What can we forecast? (1/9)",
    "text": "What can we forecast? (1/9)"
  },
  {
    "objectID": "slides/1-getting-started.html#what-can-we-forecast-29",
    "href": "slides/1-getting-started.html#what-can-we-forecast-29",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "What can we forecast? (2/9)",
    "text": "What can we forecast? (2/9)"
  },
  {
    "objectID": "slides/1-getting-started.html#what-can-we-forecast-39",
    "href": "slides/1-getting-started.html#what-can-we-forecast-39",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "What can we forecast? (3/9)",
    "text": "What can we forecast? (3/9)"
  },
  {
    "objectID": "slides/1-getting-started.html#what-can-we-forecast-49",
    "href": "slides/1-getting-started.html#what-can-we-forecast-49",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "What can we forecast? (4/9)",
    "text": "What can we forecast? (4/9)"
  },
  {
    "objectID": "slides/1-getting-started.html#what-can-we-forecast-59",
    "href": "slides/1-getting-started.html#what-can-we-forecast-59",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "What can we forecast? (5/9)",
    "text": "What can we forecast? (5/9)"
  },
  {
    "objectID": "slides/1-getting-started.html#what-can-we-forecast-69",
    "href": "slides/1-getting-started.html#what-can-we-forecast-69",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "What can we forecast? (6/9)",
    "text": "What can we forecast? (6/9)"
  },
  {
    "objectID": "slides/1-getting-started.html#what-can-we-forecast-79",
    "href": "slides/1-getting-started.html#what-can-we-forecast-79",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "What can we forecast? (7/9)",
    "text": "What can we forecast? (7/9)\n\n\n\nCC BY-SA 4.0, https://commons.wikimedia.org/w/index.php?curid=59368531"
  },
  {
    "objectID": "slides/1-getting-started.html#what-can-we-forecast-89",
    "href": "slides/1-getting-started.html#what-can-we-forecast-89",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "What can we forecast? (8/9)",
    "text": "What can we forecast? (8/9)"
  },
  {
    "objectID": "slides/1-getting-started.html#what-can-we-forecast-99",
    "href": "slides/1-getting-started.html#what-can-we-forecast-99",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "What can we forecast? (9/9)",
    "text": "What can we forecast? (9/9)"
  },
  {
    "objectID": "slides/1-getting-started.html#which-is-easiest-to-forecast",
    "href": "slides/1-getting-started.html#which-is-easiest-to-forecast",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "Which is easiest to forecast?",
    "text": "Which is easiest to forecast?\n\ndaily electricity demand in 3 days time\ntime of sunrise this day next year\nGoogle stock price tomorrow\nGoogle stock price in 6 months time\nmaximum temperature tomorrow\nexchange rate of $US/AUS next week\ntotal sales of drugs in Australian pharmacies next month\ntiming of next Halley’s comet appearance"
  },
  {
    "objectID": "slides/1-getting-started.html#which-is-easiest-to-forecast-1",
    "href": "slides/1-getting-started.html#which-is-easiest-to-forecast-1",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "Which is easiest to forecast?",
    "text": "Which is easiest to forecast?\n\ntime of sunrise this day next year\ntiming of next Halley’s comet appearance\nmaximum temperature tomorrow\ndaily electricity demand in 3 days time\ntotal sales of drugs in Australian pharmacies next month\nGoogle stock price tomorrow\nexchange rate of $US/AUS next week\nGoogle stock price in 6 months time\n\n\nQuestions - how do we measure ``easiest’’? - what makes something easy/difficult to forecast?"
  },
  {
    "objectID": "slides/1-getting-started.html#forecastability-factors",
    "href": "slides/1-getting-started.html#forecastability-factors",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "Forecastability factors",
    "text": "Forecastability factors\nSomething is easier to forecast if:\n\nwe have a good understanding of the factors that contribute to it\nthere is lots of data available;\nthe future is somewhat similar to the past\nthe forecasts cannot affect the thing we are trying to forecast."
  },
  {
    "objectID": "slides/1-getting-started.html#time-series-data",
    "href": "slides/1-getting-started.html#time-series-data",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "Time series data",
    "text": "Time series data\n\nFour-yearly Olympic winning times\nAnnual Google profits\nQuarterly Australian beer production\nMonthly rainfall\nWeekly retail sales\nDaily IBM stock prices\nHourly electricity demand\n5-minute freeway traffic counts\nTime-stamped stock transaction data"
  },
  {
    "objectID": "slides/1-getting-started.html#random-futures",
    "href": "slides/1-getting-started.html#random-futures",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "Random futures",
    "text": "Random futures"
  },
  {
    "objectID": "slides/1-getting-started.html#random-futures-1",
    "href": "slides/1-getting-started.html#random-futures-1",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "Random futures",
    "text": "Random futures"
  },
  {
    "objectID": "slides/1-getting-started.html#random-futures-2",
    "href": "slides/1-getting-started.html#random-futures-2",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "Random futures",
    "text": "Random futures"
  },
  {
    "objectID": "slides/1-getting-started.html#random-futures-3",
    "href": "slides/1-getting-started.html#random-futures-3",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "Random futures",
    "text": "Random futures"
  },
  {
    "objectID": "slides/1-getting-started.html#random-futures-4",
    "href": "slides/1-getting-started.html#random-futures-4",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "Random futures",
    "text": "Random futures"
  },
  {
    "objectID": "slides/1-getting-started.html#random-futures-5",
    "href": "slides/1-getting-started.html#random-futures-5",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "Random futures",
    "text": "Random futures"
  },
  {
    "objectID": "slides/1-getting-started.html#random-futures-6",
    "href": "slides/1-getting-started.html#random-futures-6",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "Random futures",
    "text": "Random futures"
  },
  {
    "objectID": "slides/1-getting-started.html#random-futures-7",
    "href": "slides/1-getting-started.html#random-futures-7",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "Random futures",
    "text": "Random futures"
  },
  {
    "objectID": "slides/1-getting-started.html#random-futures-8",
    "href": "slides/1-getting-started.html#random-futures-8",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "Random futures",
    "text": "Random futures"
  },
  {
    "objectID": "slides/1-getting-started.html#random-futures-9",
    "href": "slides/1-getting-started.html#random-futures-9",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "Random futures",
    "text": "Random futures\n\n\n\n“He who sees the past as surprise-free is bound to have a future full of surprises.’’(Amos Tversky)"
  },
  {
    "objectID": "slides/1-getting-started.html#statistical-forecasting",
    "href": "slides/1-getting-started.html#statistical-forecasting",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "Statistical forecasting",
    "text": "Statistical forecasting\n\nThing to be forecast: a random variable, \\(y_t\\).\nForecast distribution: If \\({\\cal I}\\) is all observations, then \\(y_{t} |{\\cal I}\\) means “the random variable \\(y_{t}\\) given what we know in \\({\\cal I}\\).\nThe “point forecast” is the mean (or median) of \\(y_{t} |{\\cal I}\\)\nThe “forecast variance” is \\(\\text{var}[y_{t} |{\\cal I}]\\). Variance is the square of the standard deviation.\nA prediction interval or “interval forecast” is a range of values of \\(y_t\\) with high probability.\nWith time series, \\({y}_{t|t-1} = y_t | \\{y_1,y_2,\\dots,y_{t-1}\\}\\)."
  },
  {
    "objectID": "slides/1-getting-started.html#case-study-1-paperware-company",
    "href": "slides/1-getting-started.html#case-study-1-paperware-company",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "CASE STUDY 1: Paperware company",
    "text": "CASE STUDY 1: Paperware company\nProblem: Want forecasts of each of hundreds of items. Series can be stationary, trended or seasonal. They currently have a large forecasting program written in-house but it doesn’t seem to produce sensible forecasts. They want me to fix it.\n\nAdditional information\n\nProgram written in COBOL making numerical calculations limited. It is not possible to do any optimization.\nTheir programmer has little experience in numerical computing.\nThey employ no statisticians and want the program to produce forecasts automatically."
  },
  {
    "objectID": "slides/1-getting-started.html#case-study-1paperware-company",
    "href": "slides/1-getting-started.html#case-study-1paperware-company",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "CASE STUDY 1:Paperware company",
    "text": "CASE STUDY 1:Paperware company\nMethods currently used\n\n\n12 month average\n6 month average\nstraight line regression over last 12 months\nstraight line regression over last 6 months\nprediction obtained by a straight line through the last observation with slope equal to the average slope of the lines connecting last year’s and this year’s values\nprediction obtained by a straight line through the last observation with slope equal to the average slope of the lines connecting last year’s and this year’s values, where the average is taken only over the last 6 months."
  },
  {
    "objectID": "slides/1-getting-started.html#case-study-2-pbs",
    "href": "slides/1-getting-started.html#case-study-2-pbs",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "CASE STUDY 2: PBS",
    "text": "CASE STUDY 2: PBS"
  },
  {
    "objectID": "slides/1-getting-started.html#case-study-2-pbs-1",
    "href": "slides/1-getting-started.html#case-study-2-pbs-1",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "CASE STUDY 2: PBS",
    "text": "CASE STUDY 2: PBS\nThe Pharmaceutical Benefits Scheme (PBS) is the Australian government drugs subsidy scheme.\n\nMany drugs bought from pharmacies are subsidised to allow more equitable access to modern drugs.\nThe cost to government is determined by the number and types of drugs purchased. Currently nearly 1% of GDP.\nThe total cost is budgeted based on forecasts of drug usage."
  },
  {
    "objectID": "slides/1-getting-started.html#case-study-2-pbs-2",
    "href": "slides/1-getting-started.html#case-study-2-pbs-2",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "CASE STUDY 2: PBS",
    "text": "CASE STUDY 2: PBS"
  },
  {
    "objectID": "slides/1-getting-started.html#case-study-2-pbs-3",
    "href": "slides/1-getting-started.html#case-study-2-pbs-3",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "CASE STUDY 2: PBS",
    "text": "CASE STUDY 2: PBS\n\nIn 2001: $4.5 billion budget, under-forecasted by $800 million.\nThousands of products. Seasonal demand.\nSubject to covert marketing, volatile products, uncontrollable expenditure.\nAlthough monthly data available for 10 years, data are aggregated to annual values, and only the first three years are used in estimating the forecasts.\nAll forecasts being done with the FORECAST function in MS-Excel!"
  },
  {
    "objectID": "slides/1-getting-started.html#case-study-3-car-fleet-company",
    "href": "slides/1-getting-started.html#case-study-3-car-fleet-company",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "CASE STUDY 3: Car fleet company",
    "text": "CASE STUDY 3: Car fleet company\nClient: One of Australia’s largest car fleet companies\nProblem: how to forecast resale value of vehicles? How should this affect leasing and sales policies?\n\nAdditional information\n\nThey can provide a large amount of data on previous vehicles and their eventual resale values.\nThe resale values are currently estimated by a group of specialists. They see me as a threat and do not cooperate."
  },
  {
    "objectID": "slides/1-getting-started.html#case-study-4-airline",
    "href": "slides/1-getting-started.html#case-study-4-airline",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "CASE STUDY 4: Airline",
    "text": "CASE STUDY 4: Airline"
  },
  {
    "objectID": "slides/1-getting-started.html#case-study-4-airline-1",
    "href": "slides/1-getting-started.html#case-study-4-airline-1",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "CASE STUDY 4: Airline",
    "text": "CASE STUDY 4: Airline\n\n\nNot the real data! Or is it?"
  },
  {
    "objectID": "slides/1-getting-started.html#case-study-4-airline-2",
    "href": "slides/1-getting-started.html#case-study-4-airline-2",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "CASE STUDY 4: Airline",
    "text": "CASE STUDY 4: Airline\nProblem: how to forecast passenger traffic on major routes?\n\nAdditional information\n\nThey can provide a large amount of data on previous routes.\nTraffic is affected by school holidays, special events such as the Grand Prix, advertising campaigns, competition behavior, etc.\nThey have a highly capable team of people who are able to do most of the computing."
  },
  {
    "objectID": "slides/1-getting-started.html#the-basic-steps-in-a-forecasting-task",
    "href": "slides/1-getting-started.html#the-basic-steps-in-a-forecasting-task",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "The basic steps in a forecasting task",
    "text": "The basic steps in a forecasting task\n\nStep 1: Problem definition.\nStep 2: Gathering information.\nStep 3: Preliminary (exploratory) analysis.\nStep 4: Choosing and fitting models.\nStep 5: Using and evaluating a forecasting model."
  },
  {
    "objectID": "slides/1-getting-started.html#references",
    "href": "slides/1-getting-started.html#references",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "References",
    "text": "References\n\nForecasting: Principles and Practice\nDr. Mine Çetinkaya-Rundel\nModern Dive."
  },
  {
    "objectID": "slides/1-getting-started_o.html",
    "href": "slides/1-getting-started_o.html",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "",
    "text": "Dr. Tyler George\nWest 311\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nstats-tgeorge.github.io/STA364_TSApps/\n\nAll course materials (slides, exams, etc)\nLinks (book, data, and more)\n\n\n\n\n\nSubmissions\nGradebook\n\n\n\n\n\nLet’s open it up!\n\n\n\nIt is my intent that students from all diverse backgrounds and perspectives be well-served by this course, that students’ learning needs be addressed both in and out of class, and that the diversity that the students bring to this class be viewed as a resource, strength and benefit.\n\n\nPlease let me know your preferred name and pronouns on the Getting to know you survey.\nIf you feel like your performance in the class is being impacted by your experiences outside of class, please don’t hesitate to come and talk with me. I want to be a resource for you.\nI (like many people) am still in the process of learning about diverse perspectives and identities. If something was said in class (by anyone) that made you feel uncomfortable, please talk to me about it.\n\n\n\n\n\n\nOnly work that is clearly assigned as team work should be completed collaboratively.\nSome labs/activities will be completed in groups. You should work with each other during, and sometimes outside of class, to complete the labs.\nHomework must be submitted individually. You may not directly share answers / code with others, however you are welcome to discuss the problems in general and ask for advice.\nExams must be completed individually. You may not discuss any aspect of the exam with peers. If you have questions, email me, especially if you get stuck on an usual problem (not a coding error).\n\n\n\n\n\nI are aware that a huge volume of code is available on the web, and many tasks may have solutions posted.\nUnless explicitly stated otherwise, this course’s policy is that may make use of any online resources (e.g. RStudio Community, StackOverflow, etc.) but you must explicitly cite where you obtained any code you directly use or use as inspiration in your solution(s). Often on exams, I will require you use code provided in class.\nAny recycled code that is discovered and is not explicitly cited will be treated as plagiarism, regardless of source\nYou do not need to cite code I provide in class or in the notes.\n\n\n\n\n\nComplete all the preparation work before class (readings).\nAsk questions.\nDo the readings.\nDo the labs/activities.\nDo the Homework\nDon’t procrastinate! There is no time for falling behind on the block!"
  },
  {
    "objectID": "slides/1-getting-started_o.html#meet-the-prof",
    "href": "slides/1-getting-started_o.html#meet-the-prof",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "",
    "text": "Dr. Tyler George\nWest 311"
  },
  {
    "objectID": "slides/1-getting-started_o.html#where-is",
    "href": "slides/1-getting-started_o.html#where-is",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "",
    "text": "stats-tgeorge.github.io/STA364_TSApps/\n\nAll course materials (slides, exams, etc)\nLinks (book, data, and more)\n\n\n\n\n\nSubmissions\nGradebook"
  },
  {
    "objectID": "slides/1-getting-started_o.html#syllabus",
    "href": "slides/1-getting-started_o.html#syllabus",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "",
    "text": "Let’s open it up!"
  },
  {
    "objectID": "slides/1-getting-started_o.html#diversity-inclusion",
    "href": "slides/1-getting-started_o.html#diversity-inclusion",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "",
    "text": "It is my intent that students from all diverse backgrounds and perspectives be well-served by this course, that students’ learning needs be addressed both in and out of class, and that the diversity that the students bring to this class be viewed as a resource, strength and benefit.\n\n\nPlease let me know your preferred name and pronouns on the Getting to know you survey.\nIf you feel like your performance in the class is being impacted by your experiences outside of class, please don’t hesitate to come and talk with me. I want to be a resource for you.\nI (like many people) am still in the process of learning about diverse perspectives and identities. If something was said in class (by anyone) that made you feel uncomfortable, please talk to me about it."
  },
  {
    "objectID": "slides/1-getting-started_o.html#collaboration-policy",
    "href": "slides/1-getting-started_o.html#collaboration-policy",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "",
    "text": "Only work that is clearly assigned as team work should be completed collaboratively.\nSome labs/activities will be completed in groups. You should work with each other during, and sometimes outside of class, to complete the labs.\nHomework must be submitted individually. You may not directly share answers / code with others, however you are welcome to discuss the problems in general and ask for advice.\nExams must be completed individually. You may not discuss any aspect of the exam with peers. If you have questions, email me, especially if you get stuck on an usual problem (not a coding error)."
  },
  {
    "objectID": "slides/1-getting-started_o.html#sharing-reusing-code-policy",
    "href": "slides/1-getting-started_o.html#sharing-reusing-code-policy",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "",
    "text": "I are aware that a huge volume of code is available on the web, and many tasks may have solutions posted.\nUnless explicitly stated otherwise, this course’s policy is that may make use of any online resources (e.g. RStudio Community, StackOverflow, etc.) but you must explicitly cite where you obtained any code you directly use or use as inspiration in your solution(s). Often on exams, I will require you use code provided in class.\nAny recycled code that is discovered and is not explicitly cited will be treated as plagiarism, regardless of source\nYou do not need to cite code I provide in class or in the notes."
  },
  {
    "objectID": "slides/1-getting-started_o.html#five-tips-for-success",
    "href": "slides/1-getting-started_o.html#five-tips-for-success",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "",
    "text": "Complete all the preparation work before class (readings).\nAsk questions.\nDo the readings.\nDo the labs/activities.\nDo the Homework\nDon’t procrastinate! There is no time for falling behind on the block!"
  },
  {
    "objectID": "slides/1-getting-started_o.html#excel---not",
    "href": "slides/1-getting-started_o.html#excel---not",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "Excel - not…",
    "text": "Excel - not…"
  },
  {
    "objectID": "slides/1-getting-started_o.html#r",
    "href": "slides/1-getting-started_o.html#r",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "R",
    "text": "R"
  },
  {
    "objectID": "slides/1-getting-started_o.html#rstudio",
    "href": "slides/1-getting-started_o.html#rstudio",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "RStudio",
    "text": "RStudio\n\n\n\n\n\n\nRStudio Server: http://turing.cornellcollege.edu:8787 (Only available on campus)"
  },
  {
    "objectID": "slides/1-getting-started_o.html#r-and-rstudio",
    "href": "slides/1-getting-started_o.html#r-and-rstudio",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "R and RStudio",
    "text": "R and RStudio\n\n\n\n\n\n\n\n\nR is an open-source statistical programming language\nR is also an environment for statistical computing and graphics\nIt’s easily extensible with packages\n\n\n\n\nRStudio is a convenient interface for R called an IDE (integrated development environment), e.g. “I write R code in the RStudio IDE”\nRStudio is not a requirement for programming with R, but it’s very commonly used by R programmers and data scientists"
  },
  {
    "objectID": "slides/1-getting-started_o.html#r-vs.-rstudio",
    "href": "slides/1-getting-started_o.html#r-vs.-rstudio",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "R vs. RStudio",
    "text": "R vs. RStudio\n\n\n\n\n\n\n\nSource: Modern Dive."
  },
  {
    "objectID": "slides/1-getting-started_o.html#r-packages",
    "href": "slides/1-getting-started_o.html#r-packages",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "R packages",
    "text": "R packages\n\n\nPackages: Fundamental units of reproducible R code, including reusable R functions, the documentation that describes how to use them, and sample data1\nAs of March 14th, 2024, there are 20,582 R packages available on CRAN (the Comprehensive R Archive Network)2\nWe’re going to work with a small (but important) subset of these!\n\n\n\n\n1 Wickham and Bryan, R Packages.\n2 CRAN contributed packages."
  },
  {
    "objectID": "slides/1-getting-started_o.html#tour-r-rstudio",
    "href": "slides/1-getting-started_o.html#tour-r-rstudio",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "Tour: R + RStudio",
    "text": "Tour: R + RStudio\n\n\n\nOption 1:\nSit back and enjoy the show!\n\n\n\nOption 2:\n\n\nGo to the server http://turing.cornellcollege.edu\nCornell username all lower case\nStarting password given in class"
  },
  {
    "objectID": "slides/1-getting-started_o.html#tour-recap-r-rstudio",
    "href": "slides/1-getting-started_o.html#tour-recap-r-rstudio",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "Tour recap: R + RStudio",
    "text": "Tour recap: R + RStudio"
  },
  {
    "objectID": "slides/1-getting-started_o.html#a-short-list-for-now-of-r-essentials",
    "href": "slides/1-getting-started_o.html#a-short-list-for-now-of-r-essentials",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "A short list (for now) of R essentials",
    "text": "A short list (for now) of R essentials\n\nFunctions are (most often) verbs, followed by what they will be applied to in parentheses:\n\n. . .\n\ndo_this(to_this)\ndo_that(to_this, to_that, with_those)\n\n\nPackages are installed with the install.packages() function and loaded with the library function, once per session:\n\n. . .\n\ninstall.packages(\"package_name\")\nlibrary(package_name)"
  },
  {
    "objectID": "slides/1-getting-started_o.html#r-essentials-continued",
    "href": "slides/1-getting-started_o.html#r-essentials-continued",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "R essentials (continued)",
    "text": "R essentials (continued)\n\nColumns (variables) in data frames are accessed with $:\n\n. . .\n\ndataframe$var_name\n\n\nObject documentation can be accessed with ?\n\n. . .\n\n?mean"
  },
  {
    "objectID": "slides/1-getting-started_o.html#tidyverse",
    "href": "slides/1-getting-started_o.html#tidyverse",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "tidyverse",
    "text": "tidyverse\n\n\n\n\ntidyverse.org\n\nThe tidyverse is an opinionated collection of R packages designed for data science\nAll packages share an underlying philosophy and a common grammar"
  },
  {
    "objectID": "slides/1-getting-started_o.html#quarto-1",
    "href": "slides/1-getting-started_o.html#quarto-1",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "Quarto",
    "text": "Quarto\n\n\nFully reproducible reports – each time you render the analysis is ran from the beginning\nCode goes in chunks narrative goes outside of chunks\nA visual editor for a familiar / Google docs-like editing experience"
  },
  {
    "objectID": "slides/1-getting-started_o.html#tour-quarto",
    "href": "slides/1-getting-started_o.html#tour-quarto",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "Tour: Quarto",
    "text": "Tour: Quarto\n\n\n\nOption 1:\nSit back and enjoy the show!\n\n\n\nOption 2:\n\n\nGo to the server http://turing.cornellcollege.edu\nCornell username all lower case\nStarting password given in class"
  },
  {
    "objectID": "slides/1-getting-started_o.html#tour-recap-quarto",
    "href": "slides/1-getting-started_o.html#tour-recap-quarto",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "Tour recap: Quarto",
    "text": "Tour recap: Quarto"
  },
  {
    "objectID": "slides/1-getting-started_o.html#environments",
    "href": "slides/1-getting-started_o.html#environments",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "Environments",
    "text": "Environments\n\n\n\n\n\n\nImportant\n\n\n\nThe environment of your Quarto document is separate from the Console!\n\n\nRemember this, and expect it to bite you a few times as you’re learning to work with Quarto!"
  },
  {
    "objectID": "slides/1-getting-started_o.html#environments-1",
    "href": "slides/1-getting-started_o.html#environments-1",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "Environments",
    "text": "Environments\n\n\nFirst, run the following in the console:\n\nx &lt;- 2\nx * 3\n\n\n\nAll looks good, eh?\n\n\nThen, add the following in an R chunk in your Quarto document\n\nx * 3\n\n\n\nWhat happens? Why the error?"
  },
  {
    "objectID": "slides/1-getting-started_o.html#how-will-we-use-quarto",
    "href": "slides/1-getting-started_o.html#how-will-we-use-quarto",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "How will we use Quarto?",
    "text": "How will we use Quarto?\n\nEvery activity, project, etc. is an Quarto document\nYou’ll always have a template Quarto document to start with\nThe amount of scaffolding in the template will decrease over the block"
  },
  {
    "objectID": "slides/1-getting-started_o.html#forecasts-that-arent-forecasts",
    "href": "slides/1-getting-started_o.html#forecasts-that-arent-forecasts",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "Forecasts that aren’t forecasts",
    "text": "Forecasts that aren’t forecasts"
  },
  {
    "objectID": "slides/1-getting-started_o.html#what-can-we-forecast-19",
    "href": "slides/1-getting-started_o.html#what-can-we-forecast-19",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "What can we forecast? (1/9)",
    "text": "What can we forecast? (1/9)"
  },
  {
    "objectID": "slides/1-getting-started_o.html#what-can-we-forecast-29",
    "href": "slides/1-getting-started_o.html#what-can-we-forecast-29",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "What can we forecast? (2/9)",
    "text": "What can we forecast? (2/9)"
  },
  {
    "objectID": "slides/1-getting-started_o.html#what-can-we-forecast-39",
    "href": "slides/1-getting-started_o.html#what-can-we-forecast-39",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "What can we forecast? (3/9)",
    "text": "What can we forecast? (3/9)"
  },
  {
    "objectID": "slides/1-getting-started_o.html#what-can-we-forecast-49",
    "href": "slides/1-getting-started_o.html#what-can-we-forecast-49",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "What can we forecast? (4/9)",
    "text": "What can we forecast? (4/9)"
  },
  {
    "objectID": "slides/1-getting-started_o.html#what-can-we-forecast-59",
    "href": "slides/1-getting-started_o.html#what-can-we-forecast-59",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "What can we forecast? (5/9)",
    "text": "What can we forecast? (5/9)"
  },
  {
    "objectID": "slides/1-getting-started_o.html#what-can-we-forecast-69",
    "href": "slides/1-getting-started_o.html#what-can-we-forecast-69",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "What can we forecast? (6/9)",
    "text": "What can we forecast? (6/9)"
  },
  {
    "objectID": "slides/1-getting-started_o.html#what-can-we-forecast-79",
    "href": "slides/1-getting-started_o.html#what-can-we-forecast-79",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "What can we forecast? (7/9)",
    "text": "What can we forecast? (7/9)\n\n\n\nCC BY-SA 4.0, https://commons.wikimedia.org/w/index.php?curid=59368531"
  },
  {
    "objectID": "slides/1-getting-started_o.html#what-can-we-forecast-89",
    "href": "slides/1-getting-started_o.html#what-can-we-forecast-89",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "What can we forecast? (8/9)",
    "text": "What can we forecast? (8/9)"
  },
  {
    "objectID": "slides/1-getting-started_o.html#what-can-we-forecast-99",
    "href": "slides/1-getting-started_o.html#what-can-we-forecast-99",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "What can we forecast? (9/9)",
    "text": "What can we forecast? (9/9)"
  },
  {
    "objectID": "slides/1-getting-started_o.html#which-is-easiest-to-forecast",
    "href": "slides/1-getting-started_o.html#which-is-easiest-to-forecast",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "Which is easiest to forecast?",
    "text": "Which is easiest to forecast?\n\ndaily electricity demand in 3 days time\ntime of sunrise this day next year\nGoogle stock price tomorrow\nGoogle stock price in 6 months time\nmaximum temperature tomorrow\nexchange rate of $US/AUS next week\ntotal sales of drugs in Australian pharmacies next month\ntiming of next Halley’s comet appearance"
  },
  {
    "objectID": "slides/1-getting-started_o.html#which-is-easiest-to-forecast-1",
    "href": "slides/1-getting-started_o.html#which-is-easiest-to-forecast-1",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "Which is easiest to forecast?",
    "text": "Which is easiest to forecast?\n\ntime of sunrise this day next year\ntiming of next Halley’s comet appearance\nmaximum temperature tomorrow\ndaily electricity demand in 3 days time\ntotal sales of drugs in Australian pharmacies next month\nGoogle stock price tomorrow\nexchange rate of $US/AUS next week\nGoogle stock price in 6 months time\n\n. . .\nQuestions - how do we measure ``easiest’’? - what makes something easy/difficult to forecast?"
  },
  {
    "objectID": "slides/1-getting-started_o.html#forecastability-factors",
    "href": "slides/1-getting-started_o.html#forecastability-factors",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "Forecastability factors",
    "text": "Forecastability factors\nSomething is easier to forecast if:\n\nwe have a good understanding of the factors that contribute to it\nthere is lots of data available;\nthe future is somewhat similar to the past\nthe forecasts cannot affect the thing we are trying to forecast."
  },
  {
    "objectID": "slides/1-getting-started_o.html#time-series-data",
    "href": "slides/1-getting-started_o.html#time-series-data",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "Time series data",
    "text": "Time series data\n\nFour-yearly Olympic winning times\nAnnual Google profits\nQuarterly Australian beer production\nMonthly rainfall\nWeekly retail sales\nDaily IBM stock prices\nHourly electricity demand\n5-minute freeway traffic counts\nTime-stamped stock transaction data"
  },
  {
    "objectID": "slides/1-getting-started_o.html#random-futures",
    "href": "slides/1-getting-started_o.html#random-futures",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "Random futures",
    "text": "Random futures\n. . ."
  },
  {
    "objectID": "slides/1-getting-started_o.html#random-futures-1",
    "href": "slides/1-getting-started_o.html#random-futures-1",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "Random futures",
    "text": "Random futures"
  },
  {
    "objectID": "slides/1-getting-started_o.html#random-futures-2",
    "href": "slides/1-getting-started_o.html#random-futures-2",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "Random futures",
    "text": "Random futures"
  },
  {
    "objectID": "slides/1-getting-started_o.html#random-futures-3",
    "href": "slides/1-getting-started_o.html#random-futures-3",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "Random futures",
    "text": "Random futures"
  },
  {
    "objectID": "slides/1-getting-started_o.html#random-futures-4",
    "href": "slides/1-getting-started_o.html#random-futures-4",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "Random futures",
    "text": "Random futures"
  },
  {
    "objectID": "slides/1-getting-started_o.html#random-futures-5",
    "href": "slides/1-getting-started_o.html#random-futures-5",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "Random futures",
    "text": "Random futures"
  },
  {
    "objectID": "slides/1-getting-started_o.html#random-futures-6",
    "href": "slides/1-getting-started_o.html#random-futures-6",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "Random futures",
    "text": "Random futures"
  },
  {
    "objectID": "slides/1-getting-started_o.html#random-futures-7",
    "href": "slides/1-getting-started_o.html#random-futures-7",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "Random futures",
    "text": "Random futures"
  },
  {
    "objectID": "slides/1-getting-started_o.html#random-futures-8",
    "href": "slides/1-getting-started_o.html#random-futures-8",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "Random futures",
    "text": "Random futures"
  },
  {
    "objectID": "slides/1-getting-started_o.html#random-futures-9",
    "href": "slides/1-getting-started_o.html#random-futures-9",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "Random futures",
    "text": "Random futures\n\n\n\n\n\n\n\n\n\n. . .\n\n“He who sees the past as surprise-free is bound to have a future full of surprises.’’(Amos Tversky)"
  },
  {
    "objectID": "slides/1-getting-started_o.html#statistical-forecasting",
    "href": "slides/1-getting-started_o.html#statistical-forecasting",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "Statistical forecasting",
    "text": "Statistical forecasting\n\nThing to be forecast: a random variable, \\(y_t\\).\nForecast distribution: If \\({\\cal I}\\) is all observations, then \\(y_{t} |{\\cal I}\\) means “the random variable \\(y_{t}\\) given what we know in \\({\\cal I}\\).\nThe “point forecast” is the mean (or median) of \\(y_{t} |{\\cal I}\\)\nThe “forecast variance” is \\(\\text{var}[y_{t} |{\\cal I}]\\). Variance is the square of the standard deviation.\nA prediction interval or “interval forecast” is a range of values of \\(y_t\\) with high probability.\nWith time series, \\({y}_{t|t-1} = y_t | \\{y_1,y_2,\\dots,y_{t-1}\\}\\)."
  },
  {
    "objectID": "slides/1-getting-started_o.html#case-study-1-paperware-company",
    "href": "slides/1-getting-started_o.html#case-study-1-paperware-company",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "CASE STUDY 1: Paperware company",
    "text": "CASE STUDY 1: Paperware company\nProblem: Want forecasts of each of hundreds of items. Series can be stationary, trended or seasonal. They currently have a large forecasting program written in-house but it doesn’t seem to produce sensible forecasts. They want me to fix it.\n. . .\nAdditional information\n\nProgram written in COBOL making numerical calculations limited. It is not possible to do any optimization.\nTheir programmer has little experience in numerical computing.\nThey employ no statisticians and want the program to produce forecasts automatically."
  },
  {
    "objectID": "slides/1-getting-started_o.html#case-study-1paperware-company",
    "href": "slides/1-getting-started_o.html#case-study-1paperware-company",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "CASE STUDY 1:Paperware company",
    "text": "CASE STUDY 1:Paperware company\nMethods currently used\n. . .\n\n12 month average\n6 month average\nstraight line regression over last 12 months\nstraight line regression over last 6 months\nprediction obtained by a straight line through the last observation with slope equal to the average slope of the lines connecting last year’s and this year’s values\nprediction obtained by a straight line through the last observation with slope equal to the average slope of the lines connecting last year’s and this year’s values, where the average is taken only over the last 6 months."
  },
  {
    "objectID": "slides/1-getting-started_o.html#case-study-2-pbs",
    "href": "slides/1-getting-started_o.html#case-study-2-pbs",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "CASE STUDY 2: PBS",
    "text": "CASE STUDY 2: PBS"
  },
  {
    "objectID": "slides/1-getting-started_o.html#case-study-2-pbs-1",
    "href": "slides/1-getting-started_o.html#case-study-2-pbs-1",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "CASE STUDY 2: PBS",
    "text": "CASE STUDY 2: PBS\n\nThe Pharmaceutical Benefits Scheme (PBS) is the Australian government drugs subsidy scheme.\n\nMany drugs bought from pharmacies are subsidised to allow more equitable access to modern drugs.\nThe cost to government is determined by the number and types of drugs purchased. Currently nearly 1% of GDP.\nThe total cost is budgeted based on forecasts of drug usage."
  },
  {
    "objectID": "slides/1-getting-started_o.html#case-study-2-pbs-2",
    "href": "slides/1-getting-started_o.html#case-study-2-pbs-2",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "CASE STUDY 2: PBS",
    "text": "CASE STUDY 2: PBS"
  },
  {
    "objectID": "slides/1-getting-started_o.html#case-study-2-pbs-3",
    "href": "slides/1-getting-started_o.html#case-study-2-pbs-3",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "CASE STUDY 2: PBS",
    "text": "CASE STUDY 2: PBS\n\nIn 2001: $4.5 billion budget, under-forecasted by $800 million.\nThousands of products. Seasonal demand.\nSubject to covert marketing, volatile products, uncontrollable expenditure.\nAlthough monthly data available for 10 years, data are aggregated to annual values, and only the first three years are used in estimating the forecasts.\nAll forecasts being done with the FORECAST function in MS-Excel!"
  },
  {
    "objectID": "slides/1-getting-started_o.html#case-study-3-car-fleet-company",
    "href": "slides/1-getting-started_o.html#case-study-3-car-fleet-company",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "CASE STUDY 3: Car fleet company",
    "text": "CASE STUDY 3: Car fleet company\nClient: One of Australia’s largest car fleet companies\nProblem: how to forecast resale value of vehicles? How should this affect leasing and sales policies?\n. . .\n\nAdditional information\n\nThey can provide a large amount of data on previous vehicles and their eventual resale values.\nThe resale values are currently estimated by a group of specialists. They see me as a threat and do not cooperate."
  },
  {
    "objectID": "slides/1-getting-started_o.html#case-study-4-airline",
    "href": "slides/1-getting-started_o.html#case-study-4-airline",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "CASE STUDY 4: Airline",
    "text": "CASE STUDY 4: Airline"
  },
  {
    "objectID": "slides/1-getting-started_o.html#case-study-4-airline-1",
    "href": "slides/1-getting-started_o.html#case-study-4-airline-1",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "CASE STUDY 4: Airline",
    "text": "CASE STUDY 4: Airline\n\n\n\n\n\n\n\n\n\n. . .\nNot the real data! Or is it?"
  },
  {
    "objectID": "slides/1-getting-started_o.html#case-study-4-airline-2",
    "href": "slides/1-getting-started_o.html#case-study-4-airline-2",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "CASE STUDY 4: Airline",
    "text": "CASE STUDY 4: Airline\nProblem: how to forecast passenger traffic on major routes?\n. . .\n\nAdditional information\n\nThey can provide a large amount of data on previous routes.\nTraffic is affected by school holidays, special events such as the Grand Prix, advertising campaigns, competition behavior, etc.\nThey have a highly capable team of people who are able to do most of the computing."
  },
  {
    "objectID": "slides/1-getting-started_o.html#the-basic-steps-in-a-forecasting-task",
    "href": "slides/1-getting-started_o.html#the-basic-steps-in-a-forecasting-task",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "The basic steps in a forecasting task",
    "text": "The basic steps in a forecasting task\n\nStep 1: Problem definition.\nStep 2: Gathering information.\nStep 3: Preliminary (exploratory) analysis.\nStep 4: Choosing and fitting models.\nStep 5: Using and evaluating a forecasting model."
  },
  {
    "objectID": "slides/1-getting-started_o.html#references",
    "href": "slides/1-getting-started_o.html#references",
    "title": "Time Series Applications Ch1 Getting Started",
    "section": "References",
    "text": "References\n\nForecasting: Principles and Practice\nDr. Mine Çetinkaya-Rundel\nModern Dive."
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Time Series Applications Schedule",
    "section": "",
    "text": "Note: The timeline of topics and assignments might be updated throughout the block.\n\n\n\n\n\n\n\n\nDay\nDate\nTopic\nSlides\nOutline\nProject\nLab\nHomework\nExam\n\n\n\n\n1\n13 Jan\nSyllabus, R Intro, and Ch1 Getting Started\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n2\n14 Jan\nCh2 TS Graphics\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n3\n15 Jan\nCh2 TS Graphics & Ch 3 TS Decomposition\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n4\n16 Jan\nCh3 TS Decomposition\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n5\n17 Jan\nCh 5 The Forecasters Toolbox\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n6\n20 Jan\nCh5/Ch 7 TS Regression Models\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n7\n21 Jan\nCh 7 TS Regression Models\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n8\n22 Jan\nCh 7 TS Regression Models & Exam Discussion\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n9\n23 Jan\nExam 1\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n10\n24 Jan\nCh 8 Exponential Smoothing\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n11\n27 Jan\nCh 8 Exponential Smoothing\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n12\n28 Jan\nCh 8 & Ch 9 ARIMA\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n13\n29 Jan\nCh 9 ARIMA\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n14\n30 Jan\nCh 9 ARIMA\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n15\n31 Jan\nCh 9 ARIMA\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n16\n3 Feb\nProject\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n17\n4 Feb\nProject\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n18\n5 Feb\nExam",
    "crumbs": [
      "Course Contents",
      "Schedule & Assignments"
    ]
  },
  {
    "objectID": "hw/hw-06.html",
    "href": "hw/hw-06.html",
    "title": "Homework 6",
    "section": "",
    "text": "Go to our RStudio Server at http://turing.cornellcollege.edu:8787/\nOpen the respective file from the shared STA364_inst_files folder mentioned above. It will be named something like hw-0X_LAST_NAME.qmd.\nThen you need to save your copy. Click File -&gt; Save as -&gt; Navigate to the folder STA364_Projects (that we share) -&gt; Change the “LAST_NAME part of the file name to your last name -&gt; Save.\nUpdate the top of the document, called the YAML, with your name."
  },
  {
    "objectID": "hw/hw-06.html#problems",
    "href": "hw/hw-06.html#problems",
    "title": "Homework 6",
    "section": "Problems",
    "text": "Problems\n\nQuestion 1 (fpp7_1)\nHalf-hourly electricity demand for Victoria, Australia is contained in vic_elec. Extract the January 2014 electricity demand, and aggregate this data to daily with daily total demands and maximum temperatures.\n\njan14_vic_elec &lt;- vic_elec |&gt;\n  filter(yearmonth(Time) == yearmonth(\"2014 Jan\")) |&gt;\n  index_by(Date = as_date(Time)) |&gt;\n  summarise(\n    Demand = sum(Demand),\n    Temperature = max(Temperature)\n  )\n\n\nPlot the data and find the regression model for Demand with temperature as a predictor variable. Why is there a positive relationship?\nProduce a residual plot. Is the model adequate? Are there any outliers or influential observations?\nUse the model to forecast the electricity demand that you would expect for the next day if the maximum temperature was \\(15C^\\circ\\) and compare it with the forecast if the with maximum temperature was \\(35C^\\circ\\). Do you believe these forecasts? The following R code will get you started:\n\n\njan14_vic_elec |&gt;\n  model(TSLM(Demand ~ Temperature)) |&gt;\n  forecast(\n    new_data(jan14_vic_elec, 1) |&gt;\n      mutate(Temperature = 15)\n  ) |&gt;\n  autoplot(jan14_vic_elec)\n\n\nGive prediction intervals for your forecasts.\nPlot Demand vs Temperature for all of the available data in vic_elec aggregated to daily total demand and maximum temperature. What does this say about your model?\n\n\n\nQuestion 2 (fpp7_4)\nThe data set souvenirs concerns the monthly sales figures of a shop which opened in January 1987 and sells gifts, souvenirs, and novelties. The shop is situated on the wharf at a beach resort town in Queensland, Australia. The sales volume varies with the seasonal population of tourists. There is a large influx of visitors to the town at Christmas and for the local surfing festival, held every March since 1988. Over time, the shop has expanded its premises, range of products, and staff.\n\nProduce a time plot of the data and describe the patterns in the graph. Identify any unusual or unexpected fluctuations in the time series.\nExplain why it is necessary to take logarithms of these data before fitting a model.\nFit a regression model to the logarithms of these sales data with a linear trend, seasonal dummies and a “surfing festival” dummy variable.\n\nTo create a new variable, you use the mutate function. The following code creates a variable that is TRUE (1) if it is the surfing festival and FALSE (0) otherwise. Fill the\nmutate(festival = month(Month) == CHANGE & year(Month) != CHANGE) |&gt;\n\nPlot the residuals against time and against the fitted values. Do these plots reveal any problems with the model?\n\n\n\n\n\n\n\nTip\n\n\n\nSending your fitted model object into the components() function give a nice dataframe with the .resid column and .fitted columns.\n\n\n\nDo boxplots of the residuals for each month. Does this reveal any problems with the model?\n\n\n\n\n\n\n\nTip\n\n\n\nTo create a boxplot, use the function data |&gt; ggplot(aes(x=variable)) + geom_boxplot(). Swap out the data and variable.\n\n\n\nWhat do the values of the coefficients tell you about each variable? Interpret coefficients for the intercept, the trend, one of the seasons and the festival variables.\nWhat does the Ljung-Box test tell you about your model?\nRegardless of your answers to the above questions, use your regression model to predict the monthly sales for 1994, 1995, and 1996. Produce prediction intervals for each of your forecasts.\n\n\n\nQuestion 3 (fpp7_5)\nThe us_gasoline series consists of weekly data for supplies of US finished motor gasoline product, from 2 February 1991 to 20 January 2017. The units are in “million barrels per day”. Consider only the data to the end of 2004.\n\nFit a harmonic regression with trend to the data. Experiment with changing the number Fourier terms. Plot the observed gasoline and fitted values and comment on what you see.\nSelect the appropriate number of Fourier terms to include by minimizing the AICc value, the BIC, and maximizing adjusted \\(R^2\\).\n\n\n\n\n\n\n\nTip\n\n\n\n\nThe table of metrics can be found by using the glance function on your model object.\nThere is a vary large number of metrics in the table. You may need to use a select() to pick the metrics you want to see. Their names are adj_r_squared, AICc and BIC.\n\n\n\n\nPlot the residuals of the final model using the gg_tsresiduals() function and comment on these. Use a Ljung-Box test to check for residual autocorrelation.\n\n\n\nQuestion 4 (fpp7_6)\nThe annual population of Afghanistan is available in the global_economy data set.\n\nPlot the data and comment on its features. Can you observe the effect of the Soviet-Afghan war?\nFit a linear trend model and compare this to a piecewise linear trend model with knots at 1980 and 1989.\nGenerate forecasts from these two models for the five years after the end of the data, and comment on the results."
  },
  {
    "objectID": "hw/hw-04.html",
    "href": "hw/hw-04.html",
    "title": "Homework 4",
    "section": "",
    "text": "Getting started\n\nStart with the following steps:\n\nGo to our RStudio Server at http://turing.cornellcollege.edu:8787/\nOpen the respective file from the shared STA364_inst_files folder mentioned above. It will be named something like hw-0X_LAST_NAME.qmd.\nThen you need to save your copy. Click File -&gt; Save as -&gt; Navigate to the folder STA364_Projects (that we share) -&gt; Change the “LAST_NAME part of the file name to your last name -&gt; Save.\nUpdate the top of the document, called the YAML, with your name.\n\n\n\n\nHomework Instructions\n\n\n\n\n\n\nNote\n\n\n\nBe sure to include the relevant R code and complete sentences answering each question (e.g., if I ask for the average, you can output the answer in R but also write a complete sentence with the answer). Be sure to save your files frequently!\nFrom this point forward, you need to start commenting on your graphs. What do you observe? Are there trends/cycles/seasonal effects? Outliers? Other interesting features?\n\n\n\n\n\n\n\n\nImportant\n\n\n\nYou will now need to make your own R chunks for problems that require code. You should name each chunk appropriately, for example, q1_a. This process assures that when you render and get an error, the error tells you which chunk is causing the error. You cannot use duplicate chunk labels.\n```{r q1_a}\n```\n\n\nData for the homework is in the STA364_inst_files &gt; data folder.\n\n\nExercises\n\nQuestion 1 (fpp3_2)\nFor each of the following series, make a graph of the data. If transforming seems appropriate, do so and describe the effect. If not, explain why not.\n\nUnited States GDP from global_economy.\nSlaughter of Victorian “Bulls, bullocks and steers” in aus_livestock.\nVictorian Electricity Demand from vic_elec.\nGas production from aus_production.\n\n\n\nQuestion 2 (fpp3_5)\nFor the following series, find an appropriate Box-Cox transformation to stabilize the variance: Pedestrian counts at Southern Cross Station from data pedestrian. Make sure to compare the series before and after the transformation and discuss whether or not it was effective.\n\n\nQuestion 3\nChange the seed and run the following to get 10 random integers:\n\nset.seed(CHANGE_TO_RANDOM_WHOLE_POSITIVE_NUMBER)\nrunif(10,1,10)\n\nYou can do this exercise by hand and turn in a piece of paper. Apply MA(5) smoothing (moving average with \\(m=5\\)) to this small data set. Show your work.\n\n\nQuestion 4 (fpp3_7)\nConsider the last five years of the Gas data from aus_production.\n\ngas &lt;- tail(aus_production, 5*4) |&gt; select(Gas)\n\n\nPlot the time series. Can you identify seasonal fluctuations and/or a trend cycle?\nUse STL decomposition to decompose the series and show associated plots. No comments are required.\nDo the results in (b) support the graphical interpretation from part (a)?\nCompute and plot the seasonally adjusted data. What does this show?\nUse the following code to change one observation to be an outlier (e.g., add 300 to one observation). You will need to save the result to a new object.\n\n\ngas |&gt;\n  mutate(Gas = if_else(Quarter == yearquarter(\"2007Q4\"), Gas + 300, Gas))\n\nRecompute the seasonally adjusted data. What is the effect of the outlier?\n\nDoes it make any difference if the outlier is near the end rather than in the middle of the time series? You will need to copy and change the snippet of code above.\n\n\n\nQuestion 5 (fpp3_10)\nThis exercise uses the canadian_gas data (monthly Canadian gas production in billions of cubic metres, January 1960 – February 2005).\n\nPlot the data using autoplot(), gg_subseries() and gg_season() to look at the effect of the changing seasonality over time.\nDo an STL decomposition of the data. You will need to choose a seasonal window to allow for the changing shape of the seasonal component. Recall when we used STL(variable ~ seasonal(window=\"some window\").\nHow does the seasonal shape change over time? [Hint: Try plotting the seasonal component using gg_season().]\nCan you produce a plausible seasonally adjusted series?\nThe following code decomposes using SEATS and X-11. How do the 3 decomposition’s compare?\n\n\ncanadian_gas |&gt;\n  model(X_13ARIMA_SEATS(Volume ~ seats())) |&gt;\n  components() |&gt;\n  autoplot()\n  \ncanadian_gas |&gt;\n  model(X_13ARIMA_SEATS(Volume ~ x11())) |&gt;\n  components() |&gt;\n  autoplot()\n\n\n\n\nSubmission\nWhen you are finished with your homework, be sure to Render the final document. Once rendered, you can download your file by:\n\nFinding the .html file in your File pane of RStudio (on the bottom right of the screen)\nClick the check box next to the file\nClick the blue gear above and then click “Export” to download\nSubmit your final HTML document to the respective assignment on Moodle"
  },
  {
    "objectID": "hw/hw-02.html",
    "href": "hw/hw-02.html",
    "title": "Homework 2",
    "section": "",
    "text": "Go to our RStudio Server at http://turing.cornellcollege.edu:8787/\n\n\n\n\nFinding the instructions on our website: https://stats-tgeorge.github.io/STA363_AdvReg/\nGoing to our RStudio Server at http://turing.cornellcollege.edu:8787/\nOpen the respective file from the shared STA364_inst_files folder mentioned above. It will be named something like hw-02_LAST_NAME.qmd.\nThen you need to save your copy. Click File -&gt; Save as -&gt; Navigate to the folder STA364_Projects (that we share) -&gt; Change the “LAST_NAME part of the file name to your last name -&gt; Save.\nUpdate the top of the document, called the YAML, with your name."
  },
  {
    "objectID": "hw/hw-02.html#rrstudio-in-class",
    "href": "hw/hw-02.html#rrstudio-in-class",
    "title": "Homework 2",
    "section": "",
    "text": "Go to our RStudio Server at http://turing.cornellcollege.edu:8787/\n\n\n\n\nFinding the instructions on our website: https://stats-tgeorge.github.io/STA363_AdvReg/\nGoing to our RStudio Server at http://turing.cornellcollege.edu:8787/\nOpen the respective file from the shared STA364_inst_files folder mentioned above. It will be named something like hw-02_LAST_NAME.qmd.\nThen you need to save your copy. Click File -&gt; Save as -&gt; Navigate to the folder STA364_Projects (that we share) -&gt; Change the “LAST_NAME part of the file name to your last name -&gt; Save.\nUpdate the top of the document, called the YAML, with your name."
  },
  {
    "objectID": "hw/hw-02.html#reading",
    "href": "hw/hw-02.html#reading",
    "title": "Homework 2",
    "section": "Reading",
    "text": "Reading\nRead fpp3 2.7-2.9."
  },
  {
    "objectID": "hw/hw-02.html#problems",
    "href": "hw/hw-02.html#problems",
    "title": "Homework 2",
    "section": "Problems",
    "text": "Problems\n\nQuestion 1\nExplore the following four time series: Bricks from aus_production, Lynx from pelt, Close from gafa_stock, and Demand from vic_elec.\n\nUse ? (or help()) to find out about the data in each series.\nWhat is the time interval of each series?\nUse autoplot() to produce a time plot of each series.\nFor the last plot, modify the axis labels and title. See the labs() function.\n\n\n\nQuestion 2 (fpp3)\n\nCreate a data folder inside your STA364 project folder. Go to RStudio and navigate to your STA364Project folder in the files tab on the bottom right. Click New Folder and name the folder data.\nNow, you need to copy the data from the instructor data folder to a data folder in your folder. Go to the STA364_inst_files folder and into the data folder\nCheck the box next to tute.csv, then More, then Copy to…, and save the file in your newly created data folder.\n\nThe first chunk below reads tute1.csv into R and then shows the data with the View() function. You should find four columns of information. Columns B through D each contain a quarterly series labeled Sales, AdBudget, and GDP. Sales contains the quarterly sales for a small company over the period 1981-2005. AdBudget is the advertising budget, and GDP is the gross domestic product. All series have been adjusted for inflation.\nYou can read the data into R with the following script:\n\ntute1 &lt;- readr::read_csv(\"data/tute1.csv\")\nView(tute1)\n\nThen converts the data to a time series object in R (tsibble).\n\nmytimeseries &lt;- tute1 |&gt;\n  mutate(Quarter = yearquarter(Quarter)) |&gt;\n  as_tsibble(index = Quarter)\n\nThen construct the time series plot for the Sales series.\n\nmytimeseries |&gt;\n  autoplot(Sales)\n\n\nUse this code to generate a time series plot for the other two series in the data, AdBudget, and GDP.\nCompare and contrast the three series.\n\n\n\nQuestion 3 (fpp4)\nThe USgas package contains data on the demand for natural gas in the US.\n\nInstall the USgas package. (Use install.packages('package_name')). Then to use it you will need library(package_name).\nCreate a tsibble from us_total with year as the index and state as the key.\nPlot the annual natural gas consumption by state for the New England area (comprising the states of Maine, Vermont, New Hampshire, Massachusetts, Connecticut and Rhode Island).\n\n\n\nQuestion 4 (fpp6)\nThe aus_arrivals data set comprises quarterly international arrivals to Australia from Japan, New Zealand, the UK, and the US. It is available after you call in the fpp3 package.\n\nUse autoplot(), gg_season() and gg_subseries() to compare the differences between the arrivals from these four countries.\nCan you identify any unusual observations?"
  },
  {
    "objectID": "exam/exam-01_LAST_NAME.html",
    "href": "exam/exam-01_LAST_NAME.html",
    "title": "STA 364 Midterm Exam",
    "section": "",
    "text": "Data qand Setup\nThe data is found in the ffp3 package and is called aus_vehicle_sales. Use ?aus_vehicle_sales to learn more about the data. For this exam, you will explore the SUVs. The data has been split into a training set and the whole data.\n\nlibrary(fpp3)\n\nRegistered S3 method overwritten by 'tsibble':\n  method               from \n  as_tibble.grouped_df dplyr\n\n\n── Attaching packages ──────────────────────────────────────────── fpp3 1.0.1 ──\n\n\n✔ tibble      3.2.1     ✔ tsibble     1.1.5\n✔ dplyr       1.1.4     ✔ tsibbledata 0.4.1\n✔ tidyr       1.3.1     ✔ feasts      0.4.1\n✔ lubridate   1.9.4     ✔ fable       0.4.1\n✔ ggplot2     3.5.1     \n\n\n── Conflicts ───────────────────────────────────────────────── fpp3_conflicts ──\n✖ lubridate::date()    masks base::date()\n✖ dplyr::filter()      masks stats::filter()\n✖ tsibble::intersect() masks base::intersect()\n✖ tsibble::interval()  masks lubridate::interval()\n✖ dplyr::lag()         masks stats::lag()\n✖ tsibble::setdiff()   masks base::setdiff()\n✖ tsibble::union()     masks base::union()\n\n\n\naus_suv &lt;- aus_vehicle_sales |&gt; \n  filter(Type == \"SUV\")|&gt;\n  select(-Type)\n\nsuv_train &lt;- \n  aus_suv |&gt; \n  filter(year(Month) &lt;= 2016)\n\n\n\nQuestions\n\nPlot and discuss the time series. Use autoplot, ggsubseries and gg_season graphs.\n\n\nInvestigate if there is significant autocorrelation. Use gg_lag() and ACF() |&gt; autoplot() to make the graphs. Does this information agree with your previous discussion in (1)?\n\n\nUsing your already created graphs, is the relationship between season and trend additive or multiplicative? Explain. If multiplicative, explain what that implies about modeling and forecasting with your series.\n\n\nRegardless of your previous answer, apply a log transformation on the Count and then do an STL decomposition on your series. Discuss if the decomposition components agree with your answers in (1) and (2). You will need model(STL(log(Count))) |&gt; components() |&gt; autoplot().\n\n\nThe code below can be modified to fit all benchmark models and a decomposition model to forecast the number of SUV sales in Australia in the next 1 year. Discuss which methods are best and why.\n\n\nNow, we want to compare models using metrics. Use the provided code to get model metrics, then choose the best model.\n\n\nUsing the chosen model form in (6), refit that type of model on the complete data and provide forecasts (plot) for 2018. You should use parts of the code provided above.\n\n\nAssess the final chosen model. You may want the functions gg_tsresiduals(), report(), and augment(), to get information about the model and relevant plots, but you can also use others."
  },
  {
    "objectID": "course-links.html",
    "href": "course-links.html",
    "title": "Useful links",
    "section": "",
    "text": "RStudio Server\n🔗 on Cornell College Cluster\n\n\nGradebook\n🔗 on Moodle",
    "crumbs": [
      "Course Contents",
      "Useful links"
    ]
  },
  {
    "objectID": "course-links.html#course-links",
    "href": "course-links.html#course-links",
    "title": "Useful links",
    "section": "",
    "text": "RStudio Server\n🔗 on Cornell College Cluster\n\n\nGradebook\n🔗 on Moodle",
    "crumbs": [
      "Course Contents",
      "Useful links"
    ]
  },
  {
    "objectID": "course-links.html#other-useful-links",
    "href": "course-links.html#other-useful-links",
    "title": "Useful links",
    "section": "Other Useful Links",
    "text": "Other Useful Links\n\nData Wrangling and Viz Interactive Tutorials\nRStudio Cheatsheets\nIntroduction to dplyr\nR Date Examples\nNY Times Cornell College Sign-up\nR for Data Science 2nd Ed\nQuarto Documentation\nData visualization\n\nggplot2 Reference\nggplot2: Elegant Graphics for Data Analysis\nData Visualization: A Practice Introduction\nPatchwork R Package\n\nIntroduction to feasts R package",
    "crumbs": [
      "Course Contents",
      "Useful links"
    ]
  },
  {
    "objectID": "course-links.html#data-links",
    "href": "course-links.html#data-links",
    "title": "Useful links",
    "section": "Data Links",
    "text": "Data Links\n\nTidyTuesday\nR Data Sources for Regression Analysis\nFiveThirtyEight data\nAmazon Registry of Open Data\nOpen data StackExchange\nData.gov\nUS Census\nNew York City data\nGeorge Mason University Data Link List\nToward Data Science list of Data Sources\nNHS Scotland Open Data\nEdinburgh Open Data\nOpen access to Scotland’s official statistics\nBikeshare data portal\nUK Gov Data\nKaggle datasets\nOpenIntro datasets\nAwesome public datasets\nYouth Risk Behavior Surveillance System (YRBSS)\nPRISM Data Archive Project\nHarvard Dataverse\nAndrew G. Reiter Poly Scie Datasets\nEuropean Statistics\nStatistics Canada\nPew Research\nUNICEF\nCDC\nWorld Bank\nElection Studies\nU.S. Data\nWorld Health Organization\nThe National Bureau of Economic Research\nInternational Monetary Fund\nGeneral Social Survey\nUnited Nations Data\nUnited Nations Statistics Division\nState of Iowa Open Geospatial Data\nIf you know of others, let me know!",
    "crumbs": [
      "Course Contents",
      "Useful links"
    ]
  },
  {
    "objectID": "computing-access.html",
    "href": "computing-access.html",
    "title": "Computing access",
    "section": "",
    "text": "To access computing resources the course, Introduction to Data Science, offered by the Cornell College Department of Mathematics and Statistics, go to the RStudio Server while on campus and connected to campus internet.\nYour account will be pre-created before the class begins and will use your Cornell College username. The default password will be shared in class and you will need to change it.",
    "crumbs": [
      "Course information",
      "R/RStudio Access"
    ]
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "About this site\n\n1 + 1\n\n[1] 2"
  },
  {
    "objectID": "course-instructor.html",
    "href": "course-instructor.html",
    "title": "Instructor",
    "section": "",
    "text": "Dr. Tyler George (he/him) is a Assistant Professor of Statistics at Cornell College. He received his PhD in Statistics and Analytics from Central Michigan University. During his PhD he also studied mathematics and statistics education. His dissertation work involved creating a new lack of fit test for linear regression models. His interests are broadly in statistics, data science and best pedagogy to teach them.\n\n\n\nOffice hours\nLocation\n\n\n\n\nMonday - Thursday 3:05pm - 4:05pm\nWest 311\n\n\nOther Times by Appointment\nWest 311\n\n\n\nOffice hours are for STUDENTS. Please take advantage of them to get help with class, advising, and/or getting to know your professor! If you miss class, check out course calendar to verify there have been no changes.",
    "crumbs": [
      "Course information",
      "Instructor"
    ]
  },
  {
    "objectID": "course-instructor.html#instructor",
    "href": "course-instructor.html#instructor",
    "title": "Instructor",
    "section": "",
    "text": "Dr. Tyler George (he/him) is a Assistant Professor of Statistics at Cornell College. He received his PhD in Statistics and Analytics from Central Michigan University. During his PhD he also studied mathematics and statistics education. His dissertation work involved creating a new lack of fit test for linear regression models. His interests are broadly in statistics, data science and best pedagogy to teach them.\n\n\n\nOffice hours\nLocation\n\n\n\n\nMonday - Thursday 3:05pm - 4:05pm\nWest 311\n\n\nOther Times by Appointment\nWest 311\n\n\n\nOffice hours are for STUDENTS. Please take advantage of them to get help with class, advising, and/or getting to know your professor! If you miss class, check out course calendar to verify there have been no changes.",
    "crumbs": [
      "Course information",
      "Instructor"
    ]
  },
  {
    "objectID": "course-overview.html",
    "href": "course-overview.html",
    "title": "Time Series Applications",
    "section": "",
    "text": "Course Description\nTime series analysis is a vital tool for investigating data from many fields, such as business, economics, engineering, biology, medicine, social sciences, and politics. Understanding and anticipating a variable’s change over time is valuable. This class will cover an array of time series methods, including those for correlation analysis and forecasting, stochastic models, regression analysis with time-related variables, and stationary/nonstationary models.",
    "crumbs": [
      "Course information",
      "Overview"
    ]
  },
  {
    "objectID": "hw/hw-01.html",
    "href": "hw/hw-01.html",
    "title": "Homework 1",
    "section": "",
    "text": "The goal of this assignment is to introduce you to R, RStudio, and Time Series!"
  },
  {
    "objectID": "hw/hw-01.html#terminology",
    "href": "hw/hw-01.html#terminology",
    "title": "Homework 1",
    "section": "Terminology",
    "text": "Terminology\nWe’ve already thrown around a few new terms, so let’s define them before we proceed.\n\nR: The name of the programming language we will be using throughout the course.\nRStudio: An integrated development environment for R. In other words, it is a convenient interface for writing and running R code."
  },
  {
    "objectID": "hw/hw-01.html#rrstudio-in-class",
    "href": "hw/hw-01.html#rrstudio-in-class",
    "title": "Homework 1",
    "section": "R/Rstudio in Class",
    "text": "R/Rstudio in Class\n\nGo to our RStudio Server at http://turing.cornellcollege.edu:8787/\nOn the bottom right of RStudio, you should see a Files tab. Click that tab.\n\nYou should now see a folder with your name on it. In this shared folder, we can both create, edit, and delete files.\nYou should also see a folder named STA364_inst_files. This is where I will place the files you will need for homework, exams, labs, etc.\n\n\n\nEach of your assignments will begin with the following setup steps.\n\nFinding the instructions on our website: https://stats-tgeorge.github.io/STA363_AdvReg/\nGoing to our RStudio Server at http://turing.cornellcollege.edu:8787/\nOpen the respective file from the shared STA364_inst_files folder mentioned above. It will be named something like hw-01_LAST_NAME.qmd.\nThen you need to save your copy. Click File -&gt; Save as -&gt; Navigate to the folder STA364_Projects (that we share) -&gt; Change the “LAST_NAME part of the file name to your last name -&gt; Save.\nUpdate the top of the document, called the YAML with your name."
  },
  {
    "objectID": "hw/hw-01.html#hello-rstudio",
    "href": "hw/hw-01.html#hello-rstudio",
    "title": "Homework 1",
    "section": "Hello RStudio!",
    "text": "Hello RStudio!\nRStudio is comprised of four panes.\n\n\n\n\n\n\n\n\n\n\nOn the bottom left is the Console, this is where you can write code that will be evaluated. Try typing 2 + 2 here and hit enter, what do you get?\nOn the bottom right is the Files pane, as well as other panes that will come handy as we start our analysis.\nIf you click on a file, it will open in the editor, on the top left pane. *The image shows an rmd file but we will be working with Quarto files (qmd).\nFinally, the top right pane shows your Environment. If you define a variable it would show up there. Try typing x &lt;- 2 in the Console and hit enter, what do you get in the Environment pane?"
  },
  {
    "objectID": "hw/hw-01.html#packages",
    "href": "hw/hw-01.html#packages",
    "title": "Homework 1",
    "section": "Packages",
    "text": "Packages\nR is an open-source language, and developers contribute functionality to R via packages. In this assignment we will use the following packages:\n\ntidyverse: a collection of packages for doing data analysis in a “tidy” way\nfpp3: a package that contains functions and datasets for our course/book\n\nWe use the library() function to load packages. In your Quarto document you should see an R chunk labelled load-packages which has the necessary code for loading both packages. You should also load these packages in your Console, which you can do by sending the code to your Console by clicking on the Run Current Chunk icon (green arrow pointing right icon).\n\n\n\n\n\n\n\n\n\nNote that these packages also get loaded in your Quarto environment when you Render your Quarto document."
  },
  {
    "objectID": "hw/hw-03.html",
    "href": "hw/hw-03.html",
    "title": "Homework 3",
    "section": "",
    "text": "Getting started\n\nStart with the following steps:\n\nGo to our RStudio Server at http://turing.cornellcollege.edu:8787/\nOpen the respective file from the shared STA364_inst_files folder mentioned above. It will be named something like hw-03_LAST_NAME.qmd.\nThen you need to save your copy. Click File -&gt; Save as -&gt; Navigate to the folder STA364_Projects (that we share) -&gt; Change the “LAST_NAME part of the file name to your last name -&gt; Save.\nUpdate the top of the document, called the YAML, with your name.\n\n\n\n\nHomework Instructions\n\n\n\n\n\n\nNote\n\n\n\nBe sure to include the relevant R code and complete sentences answering each question (e.g., if I ask for the average, you can output the answer in R but also write a complete sentence with the answer). Be sure to save your files frequently!\nFrom this point forward, you need to start commenting on your graphs. What do you observe? Are there trends/cycles/seasonal effects? Outliers? Other interesting features?\n\n\nData for the homework is in the STA364_inst_files &gt; data folder.\n\n\nExercises\n\nQuestion 1 (fpp7)\n\nMonthly Australian retail data is provided in aus_retail. Select one of the time series as follows (but choose a different seed value):\n\n\nset.seed(12345678)\nmyseries &lt;- aus_retail |&gt;\n  filter(`Series ID` == sample(aus_retail$`Series ID`,1))\n\nExplore your chosen retail time series using the following functions: autoplot, gg_season(), gg_subseries(), gg_lag(), ACF()|&gt;autoplot().\n\n\nQuestion 2 (fpp8)\n\nUse the following graphics functions: autoplot(), gg_season(), gg_subseries(), gg_lag(), ACF() and explore features from the following time series: “Total Private” Employed from us_employment, Bricks from aus_production, Hare from pelt, “H02” Cost from PBS, and Barrels from us_gasoline.\n\n\n\nCan you spot any seasonality, cyclicity, or trend?\nWhat do you learn about the series?\nWhat can you say about the seasonal patterns?\nCan you identify any unusual years?\n\n\n\nQuestion 3 (fpp10)\n\nThe aus_livestock data contains the monthly total number of pigs slaughtered in Victoria, Australia, from Jul 1972 to Dec 2018. Use filter() to extract pig slaughters in Victoria between 1990 and 1995. Use autoplot() and ACF() for this data. How do they differ from white noise? If a more extended period of data is used, what difference does it make to the ACF?\n\n\n\nQuestion 4 (fpp11)\n\n\nUse the following code to compute the daily changes in Google closing stock prices. Explain what lines 2 through 5 are doing.\n\n\n\ndgoog &lt;- gafa_stock |&gt;                                    # line 1\n  filter(Symbol == \"GOOG\", year(Date) &gt;= 2018) |&gt;         # line 2\n  mutate(trading_day = row_number()) |&gt;                   # line 3\n  update_tsibble(index = trading_day, regular = TRUE) |&gt;  # line 4\n  mutate(diff = difference(Close))                        # line 5\n\n\nWhy was it necessary to re-index the tsibble?\nPlot these differences and their ACF.\nDo the changes in the stock prices look like white noise?\n\n\n\n\nSubmission\nWhen you are finished with your homework, be sure to Render the final document. Once rendered, you can download your file by:\n\nFinding the .html file in your File pane of RStudio (on the bottom right of the screen)\nClick the check box next to the file\nClick the blue gear above and then click “Export” to download\nSubmit your final HTML document to the respective assignment on Moodle"
  },
  {
    "objectID": "hw/hw-05.html",
    "href": "hw/hw-05.html",
    "title": "Homework 5",
    "section": "",
    "text": "Go to our RStudio Server at http://turing.cornellcollege.edu:8787/\nOpen the respective file from the shared STA364_inst_files folder mentioned above. It will be named something like hw-0X_LAST_NAME.qmd.\nThen you need to save your copy. Click File -&gt; Save as -&gt; Navigate to the folder STA364_Projects (that we share) -&gt; Change the “LAST_NAME part of the file name to your last name -&gt; Save.\nUpdate the top of the document, called the YAML, with your name."
  },
  {
    "objectID": "hw/hw-05.html#reading",
    "href": "hw/hw-05.html#reading",
    "title": "Homework 5",
    "section": "Reading",
    "text": "Reading\nRead 5.1, 5.2, and 5.8."
  },
  {
    "objectID": "hw/hw-05.html#problems",
    "href": "hw/hw-05.html#problems",
    "title": "Homework 5",
    "section": "Problems",
    "text": "Problems\n\nQuestion 1 (fpp5_1)\nPlot the time series and produce forecasts for the following series using whichever of NAIVE(y), SNAIVE(y) or RW(y ~ drift()) is more appropriate in each case. Explain your choice in each case with 1 sentence.\n\nAustralian Population (global_economy)\nBricks (aus_production)\nNSW Lambs (aus_livestock). NSW stands for new south wales, use a filter on territory.\nHousehold wealth (hh_budget). Choose a country with a filter.\n\n\n\nQuestion 2 (fpp5_2)\nUse the Facebook stock price (data set gafa_stock) to do the following:\n\nProduce a time plot of the series.\nProduce forecasts using the drift method and plot them.\nShow that the forecasts are identical to extending the line drawn between the first and last observations.\n\n\n\nQuestion 3 (fpp5_3)\nApply a seasonal naïve method to the quarterly Australian beer production data from 1992. Check if the residuals look like white noise, and plot the forecasts. The following code will help.\n\n# Extract data of interest\nrecent_production &lt;- aus_production |&gt;\n  filter(year(Quarter) &gt;= 1992)\n# Define and estimate a model\nfit &lt;- recent_production |&gt; model(SNAIVE(Beer))\n# Look at the residuals\nfit |&gt; gg_tsresiduals()\n# Look a some forecasts\nfit |&gt; forecast() |&gt; autoplot(recent_production)\n\nDiscuss quality of this model using the residuals.\n\n\nQuestion 4 (fpp5_6)\nAre the following statements true or false? Explain your answer.\n\nGood forecast methods should have normally distributed residuals.\nA model with small residuals will give good forecasts.\nThe best measure of forecast accuracy is MAPE.\nIf your model doesn’t forecast well, you should make it more complicated.\nAlways choose the model with the best forecast accuracy as measured on the test set.\n\n\n\nQuestion 5 (fpp5_7)\nMonthly Australian retail data is provided in aus_retail. Select one of the time series as follows (but choose your own seed value):\n\nset.seed(12345678)\nmyseries &lt;- aus_retail |&gt;\n  filter(`Series ID` == sample(aus_retail$`Series ID`,1))\n\n\nCreate a training dataset consisting of observations before 2011 using\n\n\nmyseries_train &lt;- myseries |&gt;\n  filter(year(Month) &lt; 2011)\n\n\nCheck that your data have been split appropriately by producing the following plot.\n\n\nautoplot(myseries, Turnover) +\n  autolayer(myseries_train, Turnover, colour = \"red\")\n\n\nFit a seasonal naïve model using SNAIVE() applied to your training data (myseries_train).\n\n\nfit &lt;- myseries_train |&gt;\n  model(SNAIVE())\n\n\nCheck the residuals.\n\n\nfit |&gt; gg_tsresiduals()\n\nDo the residuals appear to be uncorrelated and normally distributed?\n\nProduce forecasts for the test data\n\n\nfc &lt;- fit |&gt;\n  forecast(new_data = anti_join(myseries, myseries_train))\nfc |&gt; autoplot(myseries)\n\n\nCompare the accuracy of your forecasts against the actual values.\n\n\nfit |&gt; accuracy()\nfc |&gt; accuracy(myseries)\n\n\nHow sensitive are the accuracy measures to the amount of training data used? You will need to copy some of your code above and play around with the amount of data held out and the amount used to check the forecast. Make sure to answer this using a metric that does not depend on the amount of data in your testing set.\n\n\n\nQuestion 6 (fpp5_9)\n\nCreate a training set for household wealth (hh_budget) by withholding the last four years as a test set and choosing a country with a filter.\nFit all the appropriate benchmark methods to the training set and forecast the periods covered by the test set.\nCompute the accuracy of your forecasts. Which method does best?\nDo the residuals from the best method resemble white noise?\n\n\n\nQuestion 7 (fpp5_11)\nWe will use the Bricks data from aus_production (Australian quarterly clay brick production 1956–2005) for this exercise.\n\nUse an STL decomposition to calculate the trend-cycle and seasonal indices. (Experiment with having fixed or changing seasonality. This is changing the window in the season() function within the STL() function.)\nCompute and plot the seasonally adjusted data.\nUse a naïve method to produce forecasts of the seasonally adjusted data.\nUse decomposition_model() to reseasonalise the results, giving forecasts for the original data.\nDo the residuals look uncorrelated?\nRepeat with a robust STL decomposition. Does it make much difference?\nCompare forecasts from decomposition_model() with those from SNAIVE(), using a test set comprising the last 2 years of data. Which is better?"
  },
  {
    "objectID": "hw/hw-07.html",
    "href": "hw/hw-07.html",
    "title": "Homework 7",
    "section": "",
    "text": "Go to our RStudio Server at http://turing.cornellcollege.edu:8787/\nOpen the respective file from the shared STA364_inst_files folder mentioned above. It will be named something like hw-0X_LAST_NAME.qmd.\nThen you need to save your copy. Click File -&gt; Save as -&gt; Navigate to the folder STA364_Projects (that we share) -&gt; Change the “LAST_NAME part of the file name to your last name -&gt; Save.\nUpdate the top of the document, called the YAML, with your name."
  },
  {
    "objectID": "hw/hw-07.html#problems",
    "href": "hw/hw-07.html#problems",
    "title": "Homework 7",
    "section": "Problems",
    "text": "Problems\n\nQuestion 1 (fpp8_5)\nThe data set global_economy contains the annual Imports from many countries. Select the country you did in class.\n\nPlot the Imports series and discuss the main features of the data.\nForecast the series using an ETS(A,N,N) model and plot the forecasts.\nCompute the RMSE values for the training data.\nCompare the results to those from an ETS(A,A,N) model. (Remember that the trended model is using one more parameter than the simpler model.) Discuss the merits of the two forecasting methods for this data set.\nCompare the forecasts from both methods. Which do you think is best?\nCalculate a 95% prediction interval for the first forecast for each model, using the RMSE values and assuming normal errors. Compare your intervals with those produced using R.\n\n\n\nQuestion 2 (fpp8_6)\nForecast the Chinese GDP from the global_economy data set using an ETS model. Experiment with the options in the ETS() function to see how much the forecasts change with a damped trend or a Box-Cox transformation. Try to develop an intuition of what each is doing to the forecasts.\n\n\n\n\n\n\nTip\n\n\n\nUse a relatively large value of h when forecasting so you can clearly see the differences between the various options when plotting the forecasts.\n\n\n\n\nQuestion 3 (fpp8_8&9)\nRecall your retail time series data:\n\nset.seed(12345678)\nmyseries &lt;- aus_retail |&gt;\n  filter(`Series ID` == sample(aus_retail$`Series ID`,1))\n\n\nWhy is multiplicative seasonality necessary for this series?\nApply Holt-Winters’ multiplicative method to the data. Experiment with making the trend damped.\nCompare the RMSE of the one-step forecasts from the two methods. Which do you prefer?\nCheck that the residuals from the best method look like white noise.\nNow, find the test set RMSE while training the model until the end of 2010. Can you beat a seasonal naïve approach?\nTry an STL decomposition applied to the Box-Cox transformed series, followed by ETS on the seasonally adjusted data. How does that compare with your best previous forecasts on the test set?\n\n\n\nQuestion 4 (fpp8_10)\nCompute the total domestic overnight trips across Australia from the tourism dataset.\n\nPlot the data, but you do not need to describe the features (for time’s sake).\nDecompose the series using STL and obtain the seasonally adjusted data.\nForecast the next two years of the series using an additive damped trend method applied to the seasonally adjusted data. (This can be specified using decomposition_model().)\nForecast the next two years of the series using an appropriate model for Holt’s linear method applied to the seasonally adjusted data (as before but without a damped trend).\nNow, use ETS() to choose a seasonal model for the data.\nCompare the RMSE of the ETS model’s RMSE with the models you obtained using STL decompositions. Which gives the better in-sample fits?\n\n\n\nQuestion 5 (fpp8_11)\nThis exercise uses the quarterly number of arrivals to Australia from New Zealand, 1981 Q1 – 2012 Q3, from data set aus_arrivals.\n\nMake a time plot of your data but you do not need to describe the features (for time’s sake).\nCreate a training set that withholds the last two years of available data. Forecast the test set using an appropriate model for Holt-Winters’ multiplicative method.\nWhy is multiplicative seasonality necessary here?\nForecast the two-year test set using each of the following methods:\n\n\nAn ETS model.\nAn additive ETS model applied to a log-transformed series.\nA seasonal naïve method.\nAn STL decomposition applied to the log transformed data followed by an ETS model applied to the seasonally adjusted (transformed) data.\n\n\nWhich method gives the best forecasts? Does it pass the residual tests?"
  },
  {
    "objectID": "project/project_scrollytelling_desc.html",
    "href": "project/project_scrollytelling_desc.html",
    "title": "Time Series Scrollytelling Project",
    "section": "",
    "text": "In this project you will tell a data story using scrollytelling….\n\n\n\n\nWe will follow Cole Nussbaumer Knaflics’s six lessons of data stories from his book “storytelling with data: a data visualization guide for business professionals”\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nUnderstand the context\nChoose an appropriate visual display\nEliminate clutter\nFocus attention where you want it\nThink like a designer\nTell a story\n\n\n\n\n\n\n\n\n\n\nChoose an appropriate choice of time series data\n\n\n\n\nUsed external resources to add to your story (statistics, images, etc.)\n\n\n\n\nWrote a scrollytelling story appropriate for your choice of audience (high schoolers, general public, etc.)\n\n\n\n\nUsed plot or plots to help tell and enhance your story\n\n\n\n\nUtilized scrollytelling features (zoom, highlighting) to enhance the story\n\n\n\n\nUsed Clear writing, grammar, and gave references\n\n\n\n\n\n\n\nChoose a dataset that contains time series. Ideally, you are interested and think others will find it interesting. Make sure it’s relevant to your story and comes from a reliable source.\n\n\n\n\nEnhance your story by including additional information such as statistics, images, or results from reliable sources. These extras should help explain your main points and make your story more interesting.\n\n\n\n\nTailor your story to suit the people who will read it. Use language and examples that are appropriate for your audience, whether they are high school students, the general public, or another group. Try and test your a draft at the Writing Studio or elsewhere.\n\n\n\n\nUse relevant statistical plot or plots to present your data. These visuals should help explain your points clearly and make the data easier to understand. Discuss interesting features, such as outliers or interesting trends. Make their observation part of the story.\n\n\n\n\nAdd interactive elements such as zooming in on important data points or highlighting key trends. These features can make your story more engaging and help readers focus on the most important information. The features should help understanding and not be distracting.\n\n\n\n\nMake sure your writing is clear and free of errors. Check your grammar and spelling, and provide references for any data or information you use. This helps make your story professional and trustworthy.",
    "crumbs": [
      "Course Contents",
      "Project"
    ]
  },
  {
    "objectID": "project/project_scrollytelling_desc.html#time-series-scrollytelling-project",
    "href": "project/project_scrollytelling_desc.html#time-series-scrollytelling-project",
    "title": "Time Series Scrollytelling Project",
    "section": "",
    "text": "In this project you will tell a data story using scrollytelling….\n\n\n\n\nWe will follow Cole Nussbaumer Knaflics’s six lessons of data stories from his book “storytelling with data: a data visualization guide for business professionals”\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nUnderstand the context\nChoose an appropriate visual display\nEliminate clutter\nFocus attention where you want it\nThink like a designer\nTell a story\n\n\n\n\n\n\n\n\n\n\nChoose an appropriate choice of time series data\n\n\n\n\nUsed external resources to add to your story (statistics, images, etc.)\n\n\n\n\nWrote a scrollytelling story appropriate for your choice of audience (high schoolers, general public, etc.)\n\n\n\n\nUsed plot or plots to help tell and enhance your story\n\n\n\n\nUtilized scrollytelling features (zoom, highlighting) to enhance the story\n\n\n\n\nUsed Clear writing, grammar, and gave references\n\n\n\n\n\n\n\nChoose a dataset that contains time series. Ideally, you are interested and think others will find it interesting. Make sure it’s relevant to your story and comes from a reliable source.\n\n\n\n\nEnhance your story by including additional information such as statistics, images, or results from reliable sources. These extras should help explain your main points and make your story more interesting.\n\n\n\n\nTailor your story to suit the people who will read it. Use language and examples that are appropriate for your audience, whether they are high school students, the general public, or another group. Try and test your a draft at the Writing Studio or elsewhere.\n\n\n\n\nUse relevant statistical plot or plots to present your data. These visuals should help explain your points clearly and make the data easier to understand. Discuss interesting features, such as outliers or interesting trends. Make their observation part of the story.\n\n\n\n\nAdd interactive elements such as zooming in on important data points or highlighting key trends. These features can make your story more engaging and help readers focus on the most important information. The features should help understanding and not be distracting.\n\n\n\n\nMake sure your writing is clear and free of errors. Check your grammar and spelling, and provide references for any data or information you use. This helps make your story professional and trustworthy.",
    "crumbs": [
      "Course Contents",
      "Project"
    ]
  },
  {
    "objectID": "project/project_scrollytelling_desc.html#rubric",
    "href": "project/project_scrollytelling_desc.html#rubric",
    "title": "Time Series Scrollytelling Project",
    "section": "Rubric",
    "text": "Rubric\n\n\n\n\n\n\n\n\nPart\nDescription\nPoints\n\n\n\n\n1\nChoose an appropriate choice of time series data\n10\n\n\n2\nUsed external resources to add to story (publications, statistics, images, etc.)\n10\n\n\n3\nWrote a scrollytelling story appropriate for your choice of audience (high schoolers, general public, etc.)\n10\n\n\n4\nUsed plot or plots to help tell and enhance your story\n30\n\n\n5\nUtilized scrollytelling features (zoom, highlighting) to enhance your story\n30\n\n\n6\nUsed clear writing, grammar, and gave references\n10\n\n\n\n\nResources\n\nCloseread\nCloseread Examples\nData Sources",
    "crumbs": [
      "Course Contents",
      "Project"
    ]
  },
  {
    "objectID": "slides/2-ts-graphics_o.html",
    "href": "slides/2-ts-graphics_o.html",
    "title": "Chapter 2 Time Series Graphics",
    "section": "",
    "text": "library(patchwork)\nlibrary(fpp3)\nlibrary(tidyverse)\n\nglobal_economy &lt;- global_economy |&gt;\n  select(Year, Country, GDP, Imports, Exports, Population)\n\ntourism &lt;- tourism |&gt;\n  mutate(\n    State = recode(State,\n      \"Australian Capital Territory\" = \"ACT\",\n      \"New South Wales\" = \"NSW\",\n      \"Northern Territory\" = \"NT\",\n      \"Queensland\" = \"QLD\",\n      \"South Australia\" = \"SA\",\n      \"Tasmania\" = \"TAS\",\n      \"Victoria\" = \"VIC\",\n      \"Western Australia\" = \"WA\"\n    )\n  )"
  },
  {
    "objectID": "slides/2-ts-graphics_o.html#setup",
    "href": "slides/2-ts-graphics_o.html#setup",
    "title": "Chapter 2 Time Series Graphics",
    "section": "",
    "text": "library(patchwork)\nlibrary(fpp3)\nlibrary(tidyverse)\n\nglobal_economy &lt;- global_economy |&gt;\n  select(Year, Country, GDP, Imports, Exports, Population)\n\ntourism &lt;- tourism |&gt;\n  mutate(\n    State = recode(State,\n      \"Australian Capital Territory\" = \"ACT\",\n      \"New South Wales\" = \"NSW\",\n      \"Northern Territory\" = \"NT\",\n      \"Queensland\" = \"QLD\",\n      \"South Australia\" = \"SA\",\n      \"Tasmania\" = \"TAS\",\n      \"Victoria\" = \"VIC\",\n      \"Western Australia\" = \"WA\"\n    )\n  )"
  },
  {
    "objectID": "slides/2-ts-graphics_o.html#tsibble-objects",
    "href": "slides/2-ts-graphics_o.html#tsibble-objects",
    "title": "Chapter 2 Time Series Graphics",
    "section": "tsibble objects",
    "text": "tsibble objects\n\nglobal_economy\n\n# A tsibble: 15,150 x 6 [1Y]\n# Key:       Country [263]\n    Year Country             GDP Imports Exports Population\n   &lt;dbl&gt; &lt;fct&gt;             &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;      &lt;dbl&gt;\n 1  1960 Afghanistan  537777811.    7.02    4.13    8996351\n 2  1961 Afghanistan  548888896.    8.10    4.45    9166764\n 3  1962 Afghanistan  546666678.    9.35    4.88    9345868\n 4  1963 Afghanistan  751111191.   16.9     9.17    9533954\n 5  1964 Afghanistan  800000044.   18.1     8.89    9731361\n 6  1965 Afghanistan 1006666638.   21.4    11.3     9938414\n 7  1966 Afghanistan 1399999967.   18.6     8.57   10152331\n 8  1967 Afghanistan 1673333418.   14.2     6.77   10372630\n 9  1968 Afghanistan 1373333367.   15.2     8.90   10604346\n10  1969 Afghanistan 1408888922.   15.0    10.1    10854428\n# ℹ 15,140 more rows"
  },
  {
    "objectID": "slides/2-ts-graphics_o.html#tsibble-objects-1",
    "href": "slides/2-ts-graphics_o.html#tsibble-objects-1",
    "title": "Chapter 2 Time Series Graphics",
    "section": "tsibble objects",
    "text": "tsibble objects\n\ntourism |&gt; head(5)\n\n# A tsibble: 5 x 5 [1Q]\n# Key:       Region, State, Purpose [1]\n  Quarter Region   State Purpose  Trips\n    &lt;qtr&gt; &lt;chr&gt;    &lt;chr&gt; &lt;chr&gt;    &lt;dbl&gt;\n1 1998 Q1 Adelaide SA    Business  135.\n2 1998 Q2 Adelaide SA    Business  110.\n3 1998 Q3 Adelaide SA    Business  166.\n4 1998 Q4 Adelaide SA    Business  127.\n5 1999 Q1 Adelaide SA    Business  137.\n\n\n. . .\nDomestic visitor nights in thousands by state/region and purpose."
  },
  {
    "objectID": "slides/2-ts-graphics_o.html#tsibble-objects-2",
    "href": "slides/2-ts-graphics_o.html#tsibble-objects-2",
    "title": "Chapter 2 Time Series Graphics",
    "section": "tsibble objects",
    "text": "tsibble objects\n\nA tsibble allows storage and manipulation of multiple time series in R.\nIt contains:\n\nAn index: time information about the observation\nMeasured variable(s): numbers of interest\nKey variable(s): optional unique identifiers for each series\n\nIt works with tidyverse functions."
  },
  {
    "objectID": "slides/2-ts-graphics_o.html#the-tsibble-index",
    "href": "slides/2-ts-graphics_o.html#the-tsibble-index",
    "title": "Chapter 2 Time Series Graphics",
    "section": "The tsibble index",
    "text": "The tsibble index\n\nExample\n\nmydata &lt;- tsibble(\n    year = 2012:2016,\n    y = c(123, 39, 78, 52, 110),\n    index = year\n)\nmydata\n\n# A tsibble: 5 x 2 [1Y]\n   year     y\n  &lt;int&gt; &lt;dbl&gt;\n1  2012   123\n2  2013    39\n3  2014    78\n4  2015    52\n5  2016   110"
  },
  {
    "objectID": "slides/2-ts-graphics_o.html#the-tsibble-index-1",
    "href": "slides/2-ts-graphics_o.html#the-tsibble-index-1",
    "title": "Chapter 2 Time Series Graphics",
    "section": "The tsibble index",
    "text": "The tsibble index\n\nExample\n\nmydata &lt;- tibble(\n    year = 2012:2016,\n    y = c(123, 39, 78, 52, 110)\n  ) |&gt;\n  as_tsibble(index = year)\nmydata\n\n# A tsibble: 5 x 2 [1Y]\n   year     y\n  &lt;int&gt; &lt;dbl&gt;\n1  2012   123\n2  2013    39\n3  2014    78\n4  2015    52\n5  2016   110"
  },
  {
    "objectID": "slides/2-ts-graphics_o.html#the-tsibble-index-2",
    "href": "slides/2-ts-graphics_o.html#the-tsibble-index-2",
    "title": "Chapter 2 Time Series Graphics",
    "section": "The tsibble index",
    "text": "The tsibble index\nFor observations more frequent than once per year, we need to use a time class function on the index.\n. . .\n\nz\n\n# A tibble: 5 × 2\n  Month    Observation\n  &lt;chr&gt;          &lt;dbl&gt;\n1 2019 Jan          50\n2 2019 Feb          23\n3 2019 Mar          34\n4 2019 Apr          30\n5 2019 May          25"
  },
  {
    "objectID": "slides/2-ts-graphics_o.html#the-tsibble-index-3",
    "href": "slides/2-ts-graphics_o.html#the-tsibble-index-3",
    "title": "Chapter 2 Time Series Graphics",
    "section": "The tsibble index",
    "text": "The tsibble index\nFor observations more frequent than once per year, we need to use a time class function on the index.\n. . .\n\nz |&gt;\n  mutate(Month = yearmonth(Month)) |&gt;\n  as_tsibble(index = Month)\n\n# A tsibble: 5 x 2 [1M]\n     Month Observation\n     &lt;mth&gt;       &lt;dbl&gt;\n1 2019 Jan          50\n2 2019 Feb          23\n3 2019 Mar          34\n4 2019 Apr          30\n5 2019 May          25"
  },
  {
    "objectID": "slides/2-ts-graphics_o.html#the-tsibble-index-4",
    "href": "slides/2-ts-graphics_o.html#the-tsibble-index-4",
    "title": "Chapter 2 Time Series Graphics",
    "section": "The tsibble index",
    "text": "The tsibble index\nCommon time index variables can be created with these functions:\n. . .\n\n\n\n\n\nFrequency\nFunction\n\n\n\n\nAnnual\nstart:end\n\n\nQuarterly\nyearquarter()\n\n\nMonthly\nyearmonth()\n\n\nWeekly\nyearweek()\n\n\nDaily\nas_date(), ymd()\n\n\nSub-daily\nas_datetime()"
  },
  {
    "objectID": "slides/2-ts-graphics_o.html#australian-prison-population",
    "href": "slides/2-ts-graphics_o.html#australian-prison-population",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Australian prison population",
    "text": "Australian prison population"
  },
  {
    "objectID": "slides/2-ts-graphics_o.html#read-a-csv-file-and-convert-to-a-tsibble",
    "href": "slides/2-ts-graphics_o.html#read-a-csv-file-and-convert-to-a-tsibble",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Read a csv file and convert to a tsibble",
    "text": "Read a csv file and convert to a tsibble\n\nprison &lt;- readr::read_csv(\"data/prison_population.csv\")\n#readr::read_csv(\"~/STA364/data/prison_population.csv\")\n\n\n\n# A tibble: 3,072 × 6\n   date       state gender legal     indigenous count\n   &lt;date&gt;     &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;     &lt;chr&gt;      &lt;dbl&gt;\n 1 2005-03-01 ACT   Female Remanded  ATSI           0\n 2 2005-03-01 ACT   Female Remanded  Other          2\n 3 2005-03-01 ACT   Female Sentenced ATSI           0\n 4 2005-03-01 ACT   Female Sentenced Other          0\n 5 2005-03-01 ACT   Male   Remanded  ATSI           7\n 6 2005-03-01 ACT   Male   Remanded  Other         58\n 7 2005-03-01 ACT   Male   Sentenced ATSI           0\n 8 2005-03-01 ACT   Male   Sentenced Other          0\n 9 2005-03-01 NSW   Female Remanded  ATSI          51\n10 2005-03-01 NSW   Female Remanded  Other        131\n# ℹ 3,062 more rows"
  },
  {
    "objectID": "slides/2-ts-graphics_o.html#read-a-csv-file-and-convert-to-a-tsibble-1",
    "href": "slides/2-ts-graphics_o.html#read-a-csv-file-and-convert-to-a-tsibble-1",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Read a csv file and convert to a tsibble",
    "text": "Read a csv file and convert to a tsibble\n\nprison &lt;- readr::read_csv(\"data/prison_population.csv\") |&gt;\n  mutate(Quarter = yearquarter(date))\n\n\n\n# A tibble: 3,072 × 7\n   date       state gender legal     indigenous count Quarter\n   &lt;date&gt;     &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;     &lt;chr&gt;      &lt;dbl&gt;   &lt;qtr&gt;\n 1 2005-03-01 ACT   Female Remanded  ATSI           0 2005 Q1\n 2 2005-03-01 ACT   Female Remanded  Other          2 2005 Q1\n 3 2005-03-01 ACT   Female Sentenced ATSI           0 2005 Q1\n 4 2005-03-01 ACT   Female Sentenced Other          0 2005 Q1\n 5 2005-03-01 ACT   Male   Remanded  ATSI           7 2005 Q1\n 6 2005-03-01 ACT   Male   Remanded  Other         58 2005 Q1\n 7 2005-03-01 ACT   Male   Sentenced ATSI           0 2005 Q1\n 8 2005-03-01 ACT   Male   Sentenced Other          0 2005 Q1\n 9 2005-03-01 NSW   Female Remanded  ATSI          51 2005 Q1\n10 2005-03-01 NSW   Female Remanded  Other        131 2005 Q1\n# ℹ 3,062 more rows"
  },
  {
    "objectID": "slides/2-ts-graphics_o.html#read-a-csv-file-and-convert-to-a-tsibble-2",
    "href": "slides/2-ts-graphics_o.html#read-a-csv-file-and-convert-to-a-tsibble-2",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Read a csv file and convert to a tsibble",
    "text": "Read a csv file and convert to a tsibble\n\nprison &lt;- readr::read_csv(\"data/prison_population.csv\") |&gt;\n  mutate(Quarter = yearquarter(date)) |&gt;\n  select(-date)\n\n\n\n# A tibble: 3,072 × 6\n   state gender legal     indigenous count Quarter\n   &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;     &lt;chr&gt;      &lt;dbl&gt;   &lt;qtr&gt;\n 1 ACT   Female Remanded  ATSI           0 2005 Q1\n 2 ACT   Female Remanded  Other          2 2005 Q1\n 3 ACT   Female Sentenced ATSI           0 2005 Q1\n 4 ACT   Female Sentenced Other          0 2005 Q1\n 5 ACT   Male   Remanded  ATSI           7 2005 Q1\n 6 ACT   Male   Remanded  Other         58 2005 Q1\n 7 ACT   Male   Sentenced ATSI           0 2005 Q1\n 8 ACT   Male   Sentenced Other          0 2005 Q1\n 9 NSW   Female Remanded  ATSI          51 2005 Q1\n10 NSW   Female Remanded  Other        131 2005 Q1\n# ℹ 3,062 more rows"
  },
  {
    "objectID": "slides/2-ts-graphics_o.html#read-a-csv-file-and-convert-to-a-tsibble-3",
    "href": "slides/2-ts-graphics_o.html#read-a-csv-file-and-convert-to-a-tsibble-3",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Read a csv file and convert to a tsibble",
    "text": "Read a csv file and convert to a tsibble\n\nprison &lt;- readr::read_csv(\"data/prison_population.csv\") |&gt;\n  mutate(Quarter = yearquarter(date)) |&gt;\n  select(-date) |&gt;\n  as_tsibble(\n    index = Quarter,\n    key = c(state, gender, legal, indigenous)\n  )\n\n\n\n# A tsibble: 5 x 6 [1Q]\n# Key:       state, gender, legal, indigenous [1]\n  state gender legal    indigenous count Quarter\n  &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;    &lt;chr&gt;      &lt;dbl&gt;   &lt;qtr&gt;\n1 ACT   Female Remanded ATSI           0 2005 Q1\n2 ACT   Female Remanded ATSI           1 2005 Q2\n3 ACT   Female Remanded ATSI           0 2005 Q3\n4 ACT   Female Remanded ATSI           0 2005 Q4\n5 ACT   Female Remanded ATSI           1 2006 Q1"
  },
  {
    "objectID": "slides/2-ts-graphics_o.html#australian-pharmaceutical-benefits-scheme",
    "href": "slides/2-ts-graphics_o.html#australian-pharmaceutical-benefits-scheme",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Australian Pharmaceutical Benefits Scheme",
    "text": "Australian Pharmaceutical Benefits Scheme"
  },
  {
    "objectID": "slides/2-ts-graphics_o.html#australian-pharmaceutical-benefits-scheme-1",
    "href": "slides/2-ts-graphics_o.html#australian-pharmaceutical-benefits-scheme-1",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Australian Pharmaceutical Benefits Scheme",
    "text": "Australian Pharmaceutical Benefits Scheme\nThe Pharmaceutical Benefits Scheme (PBS) is the Australian government drugs subsidy scheme.\n\nMany drugs bought from pharmacies are subsidised to allow more equitable access to modern drugs.\nThe cost to government is determined by the number and types of drugs purchased. Currently nearly 1% of GDP.\nThe total cost is budgeted based on forecasts of drug usage.\nCosts are disaggregated by drug type (ATC1 x15 / ATC2 84), concession category (x2) and patient type (x2), giving \\(84\\times2\\times2=336\\) time series."
  },
  {
    "objectID": "slides/2-ts-graphics_o.html#working-with-tsibble-objects",
    "href": "slides/2-ts-graphics_o.html#working-with-tsibble-objects",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Working with tsibble objects",
    "text": "Working with tsibble objects\n\nPBS |&gt; head(5)\n\n# A tsibble: 5 x 9 [1M]\n# Key:       Concession, Type, ATC1, ATC2 [1]\n     Month Concession   Type        ATC1  ATC1_desc          ATC2  ATC2_desc Scripts  Cost\n     &lt;mth&gt; &lt;chr&gt;        &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt;              &lt;chr&gt; &lt;chr&gt;       &lt;dbl&gt; &lt;dbl&gt;\n1 1991 Jul Concessional Co-payments A     Alimentary tract … A01   STOMATOL…   18228 67877\n2 1991 Aug Concessional Co-payments A     Alimentary tract … A01   STOMATOL…   15327 57011\n3 1991 Sep Concessional Co-payments A     Alimentary tract … A01   STOMATOL…   14775 55020\n4 1991 Oct Concessional Co-payments A     Alimentary tract … A01   STOMATOL…   15380 57222\n5 1991 Nov Concessional Co-payments A     Alimentary tract … A01   STOMATOL…   14371 52120"
  },
  {
    "objectID": "slides/2-ts-graphics_o.html#working-with-tsibble-objects-1",
    "href": "slides/2-ts-graphics_o.html#working-with-tsibble-objects-1",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Working with tsibble objects",
    "text": "Working with tsibble objects\nWe can use the filter() function to select rows.\n\nPBS |&gt;\n  filter(ATC2 == \"A10\")|&gt; \n  head(5)\n\n# A tsibble: 5 x 9 [1M]\n# Key:       Concession, Type, ATC1, ATC2 [1]\n     Month Concession   Type        ATC1  ATC1_desc         ATC2  ATC2_desc Scripts   Cost\n     &lt;mth&gt; &lt;chr&gt;        &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt;             &lt;chr&gt; &lt;chr&gt;       &lt;dbl&gt;  &lt;dbl&gt;\n1 1991 Jul Concessional Co-payments A     Alimentary tract… A10   ANTIDIAB…   89733 2.09e6\n2 1991 Aug Concessional Co-payments A     Alimentary tract… A10   ANTIDIAB…   77101 1.80e6\n3 1991 Sep Concessional Co-payments A     Alimentary tract… A10   ANTIDIAB…   76255 1.78e6\n4 1991 Oct Concessional Co-payments A     Alimentary tract… A10   ANTIDIAB…   78681 1.85e6\n5 1991 Nov Concessional Co-payments A     Alimentary tract… A10   ANTIDIAB…   70554 1.69e6"
  },
  {
    "objectID": "slides/2-ts-graphics_o.html#working-with-tsibble-objects-2",
    "href": "slides/2-ts-graphics_o.html#working-with-tsibble-objects-2",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Working with tsibble objects",
    "text": "Working with tsibble objects\nWe can use the select() function to select columns.\n\nPBS |&gt;\n  filter(ATC2 == \"A10\") |&gt;\n  select(Month, Concession, Type, Cost)|&gt; \n  head(5)\n\n# A tsibble: 5 x 4 [1M]\n# Key:       Concession, Type [1]\n     Month Concession   Type           Cost\n     &lt;mth&gt; &lt;chr&gt;        &lt;chr&gt;         &lt;dbl&gt;\n1 1991 Jul Concessional Co-payments 2092878\n2 1991 Aug Concessional Co-payments 1795733\n3 1991 Sep Concessional Co-payments 1777231\n4 1991 Oct Concessional Co-payments 1848507\n5 1991 Nov Concessional Co-payments 1686458"
  },
  {
    "objectID": "slides/2-ts-graphics_o.html#working-with-tsibble-objects-3",
    "href": "slides/2-ts-graphics_o.html#working-with-tsibble-objects-3",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Working with tsibble objects",
    "text": "Working with tsibble objects\nWe can use the summarise() function to summarise over keys.\n\nPBS |&gt;\n  filter(ATC2 == \"A10\") |&gt;\n  select(Month, Concession, Type, Cost) |&gt;\n  summarise(total_cost = sum(Cost))|&gt; \n  head(5)\n\n# A tsibble: 5 x 2 [1M]\n     Month total_cost\n     &lt;mth&gt;      &lt;dbl&gt;\n1 1991 Jul    3526591\n2 1991 Aug    3180891\n3 1991 Sep    3252221\n4 1991 Oct    3611003\n5 1991 Nov    3565869"
  },
  {
    "objectID": "slides/2-ts-graphics_o.html#working-with-tsibble-objects-4",
    "href": "slides/2-ts-graphics_o.html#working-with-tsibble-objects-4",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Working with tsibble objects",
    "text": "Working with tsibble objects\nWe can use the mutate() function to create new variables.\n\nPBS |&gt;\n  filter(ATC2 == \"A10\") |&gt;\n  select(Month, Concession, Type, Cost) |&gt;\n  summarise(total_cost = sum(Cost)) |&gt;\n  mutate(total_cost = total_cost / 1e6)|&gt; \n  head(5)\n\n# A tsibble: 5 x 2 [1M]\n     Month total_cost\n     &lt;mth&gt;      &lt;dbl&gt;\n1 1991 Jul       3.53\n2 1991 Aug       3.18\n3 1991 Sep       3.25\n4 1991 Oct       3.61\n5 1991 Nov       3.57"
  },
  {
    "objectID": "slides/2-ts-graphics_o.html#working-with-tsibble-objects-5",
    "href": "slides/2-ts-graphics_o.html#working-with-tsibble-objects-5",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Working with tsibble objects",
    "text": "Working with tsibble objects\nWe can use the mutate() function to create new variables.\n\na10 &lt;- PBS |&gt;\n  filter(ATC2 == \"A10\") |&gt;\n  select(Month, Concession, Type, Cost) |&gt;\n  summarise(total_cost = sum(Cost)) |&gt;\n  mutate(total_cost = total_cost / 1e6) |&gt; \n  head(5)\n\n\n\n# A tsibble: 5 x 2 [1M]\n     Month total_cost\n     &lt;mth&gt;      &lt;dbl&gt;\n1 1991 Jul       3.53\n2 1991 Aug       3.18\n3 1991 Sep       3.25\n4 1991 Oct       3.61\n5 1991 Nov       3.57"
  },
  {
    "objectID": "slides/2-ts-graphics_o.html#time-plots-1",
    "href": "slides/2-ts-graphics_o.html#time-plots-1",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Time plots",
    "text": "Time plots\n\na10 |&gt;\n  autoplot(total_cost)"
  },
  {
    "objectID": "slides/2-ts-graphics_o.html#ansett-airlines",
    "href": "slides/2-ts-graphics_o.html#ansett-airlines",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Ansett airlines",
    "text": "Ansett airlines\n\nansett |&gt;\n  autoplot(Passengers)"
  },
  {
    "objectID": "slides/2-ts-graphics_o.html#ansett-airlines-1",
    "href": "slides/2-ts-graphics_o.html#ansett-airlines-1",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Ansett airlines",
    "text": "Ansett airlines\n\nansett |&gt;\n  filter(Class == \"Economy\") |&gt;\n  autoplot(Passengers)"
  },
  {
    "objectID": "slides/2-ts-graphics_o.html#ansett-airlines-2",
    "href": "slides/2-ts-graphics_o.html#ansett-airlines-2",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Ansett airlines",
    "text": "Ansett airlines\n\nansett |&gt;\n  filter(Airports == \"MEL-SYD\") |&gt;\n  autoplot(Passengers)"
  },
  {
    "objectID": "slides/2-ts-graphics_o.html#time-series-patterns",
    "href": "slides/2-ts-graphics_o.html#time-series-patterns",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Time series patterns",
    "text": "Time series patterns\n\nTrend\n\npattern exists when there is a long-term increase or decrease in the data.\n\nSeasonal\n\npattern exists when a series is influenced by seasonal factors (e.g., the quarter of the year, the month, or day of the week).\n\nCyclic\n\npattern exists when data exhibit rises and falls that are (duration usually of at least 2 years)."
  },
  {
    "objectID": "slides/2-ts-graphics_o.html#time-series-components",
    "href": "slides/2-ts-graphics_o.html#time-series-components",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Time series components",
    "text": "Time series components\n\nDifferences between seasonal and cyclic patterns:\n\nseasonal pattern constant length; cyclic pattern variable length\naverage length of cycle longer than length of seasonal pattern\nmagnitude of cycle more variable than magnitude of seasonal pattern"
  },
  {
    "objectID": "slides/2-ts-graphics_o.html#time-series-patterns-1",
    "href": "slides/2-ts-graphics_o.html#time-series-patterns-1",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Time series patterns",
    "text": "Time series patterns\n\naus_production |&gt;\n  filter(year(Quarter) &gt;= 1980) |&gt;\n  autoplot(Electricity) +\n  labs(y = \"GWh\", title = \"Australian electricity production\")"
  },
  {
    "objectID": "slides/2-ts-graphics_o.html#time-series-patterns-2",
    "href": "slides/2-ts-graphics_o.html#time-series-patterns-2",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Time series patterns",
    "text": "Time series patterns\n\naus_production |&gt;\n  autoplot(Bricks) +\n  labs(y = \"million units\", title = \"Australian clay brick production\")"
  },
  {
    "objectID": "slides/2-ts-graphics_o.html#time-series-patterns-3",
    "href": "slides/2-ts-graphics_o.html#time-series-patterns-3",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Time series patterns",
    "text": "Time series patterns\n\nus_employment |&gt;\n  filter(Title == \"Retail Trade\", year(Month) &gt;= 1980) |&gt;\n  autoplot(Employed / 1e3) +\n  labs(y = \"Million people\", title = \"Retail employment, USA\")"
  },
  {
    "objectID": "slides/2-ts-graphics_o.html#time-series-patterns-4",
    "href": "slides/2-ts-graphics_o.html#time-series-patterns-4",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Time series patterns",
    "text": "Time series patterns\n\ngafa_stock |&gt;\n  filter(Symbol == \"AMZN\", year(Date) &gt;= 2018) |&gt;\n  autoplot(Close) +\n  labs(y = \"$US\", title = \"Amazon closing stock price\")"
  },
  {
    "objectID": "slides/2-ts-graphics_o.html#time-series-patterns-5",
    "href": "slides/2-ts-graphics_o.html#time-series-patterns-5",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Time series patterns",
    "text": "Time series patterns\n\npelt |&gt;\n  autoplot(Lynx) +\n  labs(y=\"Number trapped\", title = \"Annual Canadian Lynx Trappings\")"
  },
  {
    "objectID": "slides/2-ts-graphics_o.html#seasonal-or-cyclic",
    "href": "slides/2-ts-graphics_o.html#seasonal-or-cyclic",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Seasonal or cyclic?",
    "text": "Seasonal or cyclic?\n\n\nseasonal pattern constant length; cyclic pattern variable length\naverage length of cycle longer than length of seasonal pattern\nmagnitude of cycle more variable than magnitude of seasonal pattern"
  },
  {
    "objectID": "slides/2-ts-graphics_o.html#seasonal-plots",
    "href": "slides/2-ts-graphics_o.html#seasonal-plots",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Seasonal plots",
    "text": "Seasonal plots\n\na10 |&gt; gg_season(total_cost, labels = \"both\") +\n  labs(y = \"$ million\", title = \"Seasonal plot: antidiabetic drug sales\")"
  },
  {
    "objectID": "slides/2-ts-graphics_o.html#seasonal-plots-1",
    "href": "slides/2-ts-graphics_o.html#seasonal-plots-1",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Seasonal plots",
    "text": "Seasonal plots\n\nData plotted against the individual “seasons” in which the data were observed. (In this case a “season” is a month.)\nSomething like a time plot except that the data from each season are overlapped.\nEnables the underlying seasonal pattern to be seen more clearly, and also allows any substantial departures from the seasonal pattern to be easily identified.\nIn R: gg_season()"
  },
  {
    "objectID": "slides/2-ts-graphics_o.html#seasonal-subseries-plots",
    "href": "slides/2-ts-graphics_o.html#seasonal-subseries-plots",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Seasonal subseries plots",
    "text": "Seasonal subseries plots\n\na10 |&gt;\n  gg_subseries(total_cost) +\n  labs(y = \"$ million\", title = \"Subseries plot: antidiabetic drug sales\")"
  },
  {
    "objectID": "slides/2-ts-graphics_o.html#seasonal-subseries-plots-1",
    "href": "slides/2-ts-graphics_o.html#seasonal-subseries-plots-1",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Seasonal subseries plots",
    "text": "Seasonal subseries plots\n\nData for each season collected together in time plot as separate time series.\nEnables the underlying seasonal pattern to be seen clearly, and changes in seasonality over time to be visualized.\nIn R: gg_subseries()"
  },
  {
    "objectID": "slides/2-ts-graphics_o.html#quarterly-australian-beer-production",
    "href": "slides/2-ts-graphics_o.html#quarterly-australian-beer-production",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Quarterly Australian Beer Production",
    "text": "Quarterly Australian Beer Production\n\nbeer &lt;- aus_production |&gt;\n  select(Quarter, Beer) |&gt;\n  filter(year(Quarter) &gt;= 1992)\nbeer |&gt; autoplot(Beer)"
  },
  {
    "objectID": "slides/2-ts-graphics_o.html#quarterly-australian-beer-production-1",
    "href": "slides/2-ts-graphics_o.html#quarterly-australian-beer-production-1",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Quarterly Australian Beer Production",
    "text": "Quarterly Australian Beer Production\n\nbeer |&gt; gg_season(Beer, labels=\"right\")"
  },
  {
    "objectID": "slides/2-ts-graphics_o.html#quarterly-australian-beer-production-2",
    "href": "slides/2-ts-graphics_o.html#quarterly-australian-beer-production-2",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Quarterly Australian Beer Production",
    "text": "Quarterly Australian Beer Production\n\nbeer |&gt; gg_subseries(Beer)"
  },
  {
    "objectID": "slides/2-ts-graphics_o.html#multiple-seasonal-periods",
    "href": "slides/2-ts-graphics_o.html#multiple-seasonal-periods",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Multiple seasonal periods",
    "text": "Multiple seasonal periods\n\nvic_elec\n\n# A tsibble: 52,608 x 5 [30m] &lt;Australia/Melbourne&gt;\n   Time                Demand Temperature Date       Holiday\n   &lt;dttm&gt;               &lt;dbl&gt;       &lt;dbl&gt; &lt;date&gt;     &lt;lgl&gt;  \n 1 2012-01-01 00:00:00  4383.        21.4 2012-01-01 TRUE   \n 2 2012-01-01 00:30:00  4263.        21.0 2012-01-01 TRUE   \n 3 2012-01-01 01:00:00  4049.        20.7 2012-01-01 TRUE   \n 4 2012-01-01 01:30:00  3878.        20.6 2012-01-01 TRUE   \n 5 2012-01-01 02:00:00  4036.        20.4 2012-01-01 TRUE   \n 6 2012-01-01 02:30:00  3866.        20.2 2012-01-01 TRUE   \n 7 2012-01-01 03:00:00  3694.        20.1 2012-01-01 TRUE   \n 8 2012-01-01 03:30:00  3562.        19.6 2012-01-01 TRUE   \n 9 2012-01-01 04:00:00  3433.        19.1 2012-01-01 TRUE   \n10 2012-01-01 04:30:00  3359.        19.0 2012-01-01 TRUE   \n# ℹ 52,598 more rows"
  },
  {
    "objectID": "slides/2-ts-graphics_o.html#multiple-seasonal-periods-1",
    "href": "slides/2-ts-graphics_o.html#multiple-seasonal-periods-1",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Multiple seasonal periods",
    "text": "Multiple seasonal periods\n\nvic_elec |&gt; gg_season(Demand)"
  },
  {
    "objectID": "slides/2-ts-graphics_o.html#multiple-seasonal-periods-2",
    "href": "slides/2-ts-graphics_o.html#multiple-seasonal-periods-2",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Multiple seasonal periods",
    "text": "Multiple seasonal periods\n\nvic_elec |&gt; gg_season(Demand, period = \"week\")"
  },
  {
    "objectID": "slides/2-ts-graphics_o.html#multiple-seasonal-periods-3",
    "href": "slides/2-ts-graphics_o.html#multiple-seasonal-periods-3",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Multiple seasonal periods",
    "text": "Multiple seasonal periods\n\nvic_elec |&gt; gg_season(Demand, period = \"day\")"
  },
  {
    "objectID": "slides/2-ts-graphics_o.html#australian-holidays",
    "href": "slides/2-ts-graphics_o.html#australian-holidays",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Australian holidays",
    "text": "Australian holidays\n\nholidays &lt;- tourism |&gt;\n  filter(Purpose == \"Holiday\") |&gt;\n  group_by(State) |&gt;\n  summarise(Trips = sum(Trips))\n\n\n\n# A tsibble: 640 x 3 [1Q]\n# Key:       State [8]\n   State Quarter Trips\n   &lt;chr&gt;   &lt;qtr&gt; &lt;dbl&gt;\n 1 ACT   1998 Q1  196.\n 2 ACT   1998 Q2  127.\n 3 ACT   1998 Q3  111.\n 4 ACT   1998 Q4  170.\n 5 ACT   1999 Q1  108.\n 6 ACT   1999 Q2  125.\n 7 ACT   1999 Q3  178.\n 8 ACT   1999 Q4  218.\n 9 ACT   2000 Q1  158.\n10 ACT   2000 Q2  155.\n# ℹ 630 more rows"
  },
  {
    "objectID": "slides/2-ts-graphics_o.html#australian-holidays-1",
    "href": "slides/2-ts-graphics_o.html#australian-holidays-1",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Australian holidays",
    "text": "Australian holidays\n\nholidays |&gt; autoplot(Trips) +\n  labs(y = \"thousands of trips\", title = \"Australian domestic holiday nights\")"
  },
  {
    "objectID": "slides/2-ts-graphics_o.html#seasonal-plots-2",
    "href": "slides/2-ts-graphics_o.html#seasonal-plots-2",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Seasonal plots",
    "text": "Seasonal plots\n\nholidays |&gt; gg_season(Trips) +\n  labs(y = \"thousands of trips\", title = \"Australian domestic holiday nights\")"
  },
  {
    "objectID": "slides/2-ts-graphics_o.html#seasonal-subseries-plots-2",
    "href": "slides/2-ts-graphics_o.html#seasonal-subseries-plots-2",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Seasonal subseries plots",
    "text": "Seasonal subseries plots\n\nholidays |&gt;\n  gg_subseries(Trips) +\n  labs(y = \"thousands of trips\", title = \"Australian domestic holiday nights\")"
  },
  {
    "objectID": "slides/2-ts-graphics_o.html#example-beer-production",
    "href": "slides/2-ts-graphics_o.html#example-beer-production",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Example: Beer production",
    "text": "Example: Beer production\n\nnew_production &lt;- aus_production |&gt;\n  filter(year(Quarter) &gt;= 1992)\nnew_production\n\n# A tsibble: 74 x 7 [1Q]\n   Quarter  Beer Tobacco Bricks Cement Electricity   Gas\n     &lt;qtr&gt; &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt;\n 1 1992 Q1   443    5777    383   1289       38332   117\n 2 1992 Q2   410    5853    404   1501       39774   151\n 3 1992 Q3   420    6416    446   1539       42246   175\n 4 1992 Q4   532    5825    420   1568       38498   129\n 5 1993 Q1   433    5724    394   1450       39460   116\n 6 1993 Q2   421    6036    462   1668       41356   149\n 7 1993 Q3   410    6570    475   1648       42949   163\n 8 1993 Q4   512    5675    443   1863       40974   138\n 9 1994 Q1   449    5311    421   1468       40162   127\n10 1994 Q2   381    5717    475   1755       41199   159\n# ℹ 64 more rows"
  },
  {
    "objectID": "slides/2-ts-graphics_o.html#example-beer-production-1",
    "href": "slides/2-ts-graphics_o.html#example-beer-production-1",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Example: Beer production",
    "text": "Example: Beer production\n\nnew_production |&gt; gg_lag(Beer)"
  },
  {
    "objectID": "slides/2-ts-graphics_o.html#example-beer-production-2",
    "href": "slides/2-ts-graphics_o.html#example-beer-production-2",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Example: Beer production",
    "text": "Example: Beer production\n\nnew_production |&gt; gg_lag(Beer, geom='point')"
  },
  {
    "objectID": "slides/2-ts-graphics_o.html#lagged-scatterplots",
    "href": "slides/2-ts-graphics_o.html#lagged-scatterplots",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Lagged scatterplots",
    "text": "Lagged scatterplots\n\nEach graph shows \\(y_t\\) plotted against \\(y_{t-k}\\) for different values of \\(k\\).\nThe autocorrelations are the correlations associated with these scatterplots.\nACF (autocorrelation function):\n\n\\(r_1=\\text{Correlation}(y_{t}, y_{t-1})\\)\n\\(r_2=\\text{Correlation}(y_{t}, y_{t-2})\\)\n\\(r_3=\\text{Correlation}(y_{t}, y_{t-3})\\)\netc."
  },
  {
    "objectID": "slides/2-ts-graphics_o.html#autocorrelation",
    "href": "slides/2-ts-graphics_o.html#autocorrelation",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Autocorrelation",
    "text": "Autocorrelation\nCovariance and correlation: measure extent of linear relationship between two variables (\\(y\\) and \\(X\\)).\nAutocovariance and autocorrelation: measure linear relationship between lagged values of a time series \\(y\\).\nWe measure the relationship between:\n\n\\(y_{t}\\) and \\(y_{t-1}\\)\n\\(y_{t}\\) and \\(y_{t-2}\\)\n\\(y_{t}\\) and \\(y_{t-3}\\)\netc."
  },
  {
    "objectID": "slides/2-ts-graphics_o.html#autocorrelation-1",
    "href": "slides/2-ts-graphics_o.html#autocorrelation-1",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Autocorrelation",
    "text": "Autocorrelation\nWe denote the sample autocovariance at lag \\(k\\) by \\(c_k\\) and the sample autocorrelation at lag \\(k\\) by \\(r_k\\). Then define\n\n\\(r_1\\) indicates how successive values of \\(y\\) relate to each other\n\\(r_2\\) indicates how \\(y\\) values two periods apart relate to each other\n\\(r_k\\) is the same as the sample correlation between \\(y_t\\) and \\(y_{t-k}\\)."
  },
  {
    "objectID": "slides/2-ts-graphics_o.html#autocorrelation-2",
    "href": "slides/2-ts-graphics_o.html#autocorrelation-2",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Autocorrelation",
    "text": "Autocorrelation\nResults for first 9 lags for beer data:\n\nnew_production |&gt; ACF(Beer, lag_max = 9)\n\n# A tsibble: 9 x 2 [1Q]\n       lag     acf\n  &lt;cf_lag&gt;   &lt;dbl&gt;\n1       1Q -0.102 \n2       2Q -0.657 \n3       3Q -0.0603\n4       4Q  0.869 \n5       5Q -0.0892\n6       6Q -0.635 \n7       7Q -0.0542\n8       8Q  0.832 \n9       9Q -0.108"
  },
  {
    "objectID": "slides/2-ts-graphics_o.html#autocorrelation-3",
    "href": "slides/2-ts-graphics_o.html#autocorrelation-3",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Autocorrelation",
    "text": "Autocorrelation\nResults for first 9 lags for beer data:\n\nnew_production |&gt; ACF(Beer, lag_max = 9) |&gt; autoplot()\n\n\n\n\n\n\n\n\n\nTogether, the autocorrelations at lags 1, 2, , make up the or ACF.\nThe plot is known as a correlogram"
  },
  {
    "objectID": "slides/2-ts-graphics_o.html#autocorrelation-4",
    "href": "slides/2-ts-graphics_o.html#autocorrelation-4",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Autocorrelation",
    "text": "Autocorrelation\n\nnew_production |&gt; ACF(Beer) |&gt; autoplot()\n\n\n\n\n\n\n\n\n\n\\(r_{4}\\) higher than for the other lags. This is due to the seasonal pattern in the data: the peaks tend to be 4 quarters apart and the troughs tend to be 2 quarters apart.\n\\(r_2\\) is more negative than for the other lags because troughs tend to be 2 quarters behind peaks."
  },
  {
    "objectID": "slides/2-ts-graphics_o.html#trend-and-seasonality-in-acf-plots",
    "href": "slides/2-ts-graphics_o.html#trend-and-seasonality-in-acf-plots",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Trend and seasonality in ACF plots",
    "text": "Trend and seasonality in ACF plots\n\nWhen data have a trend, the autocorrelations for small lags tend to be large and positive.\nWhen data are seasonal, the autocorrelations will be larger at the seasonal lags (i.e., at multiples of the seasonal frequency)\nWhen data are trended and seasonal, you see a combination of these effects."
  },
  {
    "objectID": "slides/2-ts-graphics_o.html#autocorrelation-functions",
    "href": "slides/2-ts-graphics_o.html#autocorrelation-functions",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Autocorrelation functions",
    "text": "Autocorrelation functions\n\n\n\nArtwork by @allison_horst"
  },
  {
    "objectID": "slides/2-ts-graphics_o.html#us-retail-trade-employment",
    "href": "slides/2-ts-graphics_o.html#us-retail-trade-employment",
    "title": "Chapter 2 Time Series Graphics",
    "section": "US retail trade employment",
    "text": "US retail trade employment\n\nretail &lt;- us_employment |&gt;\n  filter(Title == \"Retail Trade\", year(Month) &gt;= 1980)\nretail |&gt; autoplot(Employed)"
  },
  {
    "objectID": "slides/2-ts-graphics_o.html#us-retail-trade-employment-1",
    "href": "slides/2-ts-graphics_o.html#us-retail-trade-employment-1",
    "title": "Chapter 2 Time Series Graphics",
    "section": "US retail trade employment",
    "text": "US retail trade employment\n\nretail |&gt;\n  ACF(Employed, lag_max = 48) |&gt;\n  autoplot()"
  },
  {
    "objectID": "slides/2-ts-graphics_o.html#google-stock-price",
    "href": "slides/2-ts-graphics_o.html#google-stock-price",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Google stock price",
    "text": "Google stock price\n\ngoogle_2015 &lt;- gafa_stock |&gt;\n  filter(Symbol == \"GOOG\", year(Date) == 2015) |&gt;\n  select(Date, Close)\ngoogle_2015\n\n# A tsibble: 252 x 2 [!]\n   Date       Close\n   &lt;date&gt;     &lt;dbl&gt;\n 1 2015-01-02  522.\n 2 2015-01-05  511.\n 3 2015-01-06  499.\n 4 2015-01-07  498.\n 5 2015-01-08  500.\n 6 2015-01-09  493.\n 7 2015-01-12  490.\n 8 2015-01-13  493.\n 9 2015-01-14  498.\n10 2015-01-15  499.\n# ℹ 242 more rows"
  },
  {
    "objectID": "slides/2-ts-graphics_o.html#google-stock-price-1",
    "href": "slides/2-ts-graphics_o.html#google-stock-price-1",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Google stock price",
    "text": "Google stock price\n\ngoogle_2015 |&gt; autoplot(Close)"
  },
  {
    "objectID": "slides/2-ts-graphics_o.html#google-stock-price-2",
    "href": "slides/2-ts-graphics_o.html#google-stock-price-2",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Google stock price",
    "text": "Google stock price\n\ngoogle_2015 |&gt;\n  ACF(Close, lag_max=100)\n\n# A tsibble: 100 x 2 [1]\n        lag   acf\n   &lt;cf_lag&gt; &lt;dbl&gt;\n 1        1 0.982\n 2        2 0.959\n 3        3 0.937\n 4        4 0.918\n 5        5 0.901\n 6        6 0.883\n 7        7 0.865\n 8        8 0.849\n 9        9 0.834\n10       10 0.818\n# ℹ 90 more rows"
  },
  {
    "objectID": "slides/2-ts-graphics_o.html#google-stock-price-3",
    "href": "slides/2-ts-graphics_o.html#google-stock-price-3",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Google stock price",
    "text": "Google stock price\n\ngoogle_2015 |&gt;\n  ACF(Close, lag_max = 100) |&gt;\n  autoplot()"
  },
  {
    "objectID": "slides/2-ts-graphics_o.html#which-is-which",
    "href": "slides/2-ts-graphics_o.html#which-is-which",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Which is which?",
    "text": "Which is which?"
  },
  {
    "objectID": "slides/2-ts-graphics_o.html#example-white-noise",
    "href": "slides/2-ts-graphics_o.html#example-white-noise",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Example: White noise",
    "text": "Example: White noise\n\nset.seed(30)\nwn &lt;- tsibble(t = 1:50, y = rnorm(50), index = t)\nwn |&gt; autoplot(y)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nNote\n\n\n\nWhite noise data is uncorrelated across time with zero mean and constant variance.\n(Technically, we require independence as well.)"
  },
  {
    "objectID": "slides/2-ts-graphics_o.html#example-white-noise-1",
    "href": "slides/2-ts-graphics_o.html#example-white-noise-1",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Example: White noise",
    "text": "Example: White noise\nwn |&gt; ACF(y)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\\(r_{1}\\)\n\\(r_{2}\\)\n\\(r_{3}\\)\n\\(r_{4}\\)\n\\(r_{5}\\)\n\\(r_{6}\\)\n\\(r_{7}\\)\n\\(r_{8}\\)\n\\(r_{9}\\)\n\\(r_{10}\\)\n\n\n\n\n0.014\n-0.163\n0.163\n-0.259\n-0.198\n0.064\n-0.139\n-0.032\n0.199\n-0.024\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n. . .\n\nSample autocorrelations for white noise series.\nExpect each autocorrelation to be close to zero.\nBlue lines show 95% critical values."
  },
  {
    "objectID": "slides/2-ts-graphics_o.html#sampling-distribution-of-autocorrelations",
    "href": "slides/2-ts-graphics_o.html#sampling-distribution-of-autocorrelations",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Sampling distribution of autocorrelations",
    "text": "Sampling distribution of autocorrelations\nSampling distribution of \\(r_k\\) for white noise data is asymptotically N(0,\\(1/T\\)).\n\n95% of all \\(r_k\\) for white noise must lie within \\(\\pm 1.96/\\sqrt{T}\\).\nIf this is not the case, the series is probably not WN.\nCommon to plot lines at \\(\\pm 1.96/\\sqrt{T}\\) when plotting ACF. These are the ."
  },
  {
    "objectID": "slides/2-ts-graphics_o.html#example-pigs-slaughtered",
    "href": "slides/2-ts-graphics_o.html#example-pigs-slaughtered",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Example: Pigs slaughtered",
    "text": "Example: Pigs slaughtered\n\npigs &lt;- aus_livestock |&gt;\n  filter(State == \"Victoria\", Animal == \"Pigs\", year(Month) &gt;= 2014)\npigs |&gt; autoplot(Count/1e3) +\n  labs(y = \"Thousands\", title = \"Number of pigs slaughtered in Victoria\")"
  },
  {
    "objectID": "slides/2-ts-graphics_o.html#example-pigs-slaughtered-1",
    "href": "slides/2-ts-graphics_o.html#example-pigs-slaughtered-1",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Example: Pigs slaughtered",
    "text": "Example: Pigs slaughtered\n\npigs |&gt; ACF(Count) |&gt; autoplot()"
  },
  {
    "objectID": "slides/2-ts-graphics_o.html#example-pigs-slaughtered-2",
    "href": "slides/2-ts-graphics_o.html#example-pigs-slaughtered-2",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Example: Pigs slaughtered",
    "text": "Example: Pigs slaughtered\nMonthly total number of pigs slaughtered in the state of Victoria, Australia, from January 2014 through December 2018 (Source: Australian Bureau of Statistics.)\n\nDifficult to detect pattern in time plot.\nACF shows significant autocorrelation for lag 2 and 12.\nIndicate some slight seasonality.\n\n. . .\n\n\n\n\n\n\nImportant\n\n\n\nThese show the series is not a white noise series."
  },
  {
    "objectID": "slides/2-ts-graphics_o.html#your-turn",
    "href": "slides/2-ts-graphics_o.html#your-turn",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Your turn",
    "text": "Your turn\nYou can compute the daily changes in the Google stock price in 2018 using\n\ndgoog &lt;- gafa_stock |&gt;\n  filter(Symbol == \"GOOG\", year(Date) &gt;= 2018) |&gt;\n  mutate(diff = difference(Close))\n\n. . .\nDoes diff look like white noise?"
  },
  {
    "objectID": "slides/2-ts-graphics.html#setup",
    "href": "slides/2-ts-graphics.html#setup",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Setup",
    "text": "Setup\n\nlibrary(patchwork)\nlibrary(fpp3)\nlibrary(tidyverse)\n\nglobal_economy &lt;- global_economy |&gt;\n  select(Year, Country, GDP, Imports, Exports, Population)\n\ntourism &lt;- tourism |&gt;\n  mutate(\n    State = recode(State,\n      \"Australian Capital Territory\" = \"ACT\",\n      \"New South Wales\" = \"NSW\",\n      \"Northern Territory\" = \"NT\",\n      \"Queensland\" = \"QLD\",\n      \"South Australia\" = \"SA\",\n      \"Tasmania\" = \"TAS\",\n      \"Victoria\" = \"VIC\",\n      \"Western Australia\" = \"WA\"\n    )\n  )"
  },
  {
    "objectID": "slides/2-ts-graphics.html#tsibble-objects",
    "href": "slides/2-ts-graphics.html#tsibble-objects",
    "title": "Chapter 2 Time Series Graphics",
    "section": "tsibble objects",
    "text": "tsibble objects\n\nglobal_economy\n\n# A tsibble: 15,150 x 6 [1Y]\n# Key:       Country [263]\n    Year Country             GDP Imports Exports Population\n   &lt;dbl&gt; &lt;fct&gt;             &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;      &lt;dbl&gt;\n 1  1960 Afghanistan  537777811.    7.02    4.13    8996351\n 2  1961 Afghanistan  548888896.    8.10    4.45    9166764\n 3  1962 Afghanistan  546666678.    9.35    4.88    9345868\n 4  1963 Afghanistan  751111191.   16.9     9.17    9533954\n 5  1964 Afghanistan  800000044.   18.1     8.89    9731361\n 6  1965 Afghanistan 1006666638.   21.4    11.3     9938414\n 7  1966 Afghanistan 1399999967.   18.6     8.57   10152331\n 8  1967 Afghanistan 1673333418.   14.2     6.77   10372630\n 9  1968 Afghanistan 1373333367.   15.2     8.90   10604346\n10  1969 Afghanistan 1408888922.   15.0    10.1    10854428\n# ℹ 15,140 more rows"
  },
  {
    "objectID": "slides/2-ts-graphics.html#tsibble-objects-1",
    "href": "slides/2-ts-graphics.html#tsibble-objects-1",
    "title": "Chapter 2 Time Series Graphics",
    "section": "tsibble objects",
    "text": "tsibble objects\n\ntourism |&gt; head(5)\n\n# A tsibble: 5 x 5 [1Q]\n# Key:       Region, State, Purpose [1]\n  Quarter Region   State Purpose  Trips\n    &lt;qtr&gt; &lt;chr&gt;    &lt;chr&gt; &lt;chr&gt;    &lt;dbl&gt;\n1 1998 Q1 Adelaide SA    Business  135.\n2 1998 Q2 Adelaide SA    Business  110.\n3 1998 Q3 Adelaide SA    Business  166.\n4 1998 Q4 Adelaide SA    Business  127.\n5 1999 Q1 Adelaide SA    Business  137.\n\n\n\nDomestic visitor nights in thousands by state/region and purpose."
  },
  {
    "objectID": "slides/2-ts-graphics.html#tsibble-objects-2",
    "href": "slides/2-ts-graphics.html#tsibble-objects-2",
    "title": "Chapter 2 Time Series Graphics",
    "section": "tsibble objects",
    "text": "tsibble objects\n\nA tsibble allows storage and manipulation of multiple time series in R.\nIt contains:\n\nAn index: time information about the observation\nMeasured variable(s): numbers of interest\nKey variable(s): optional unique identifiers for each series\n\nIt works with tidyverse functions."
  },
  {
    "objectID": "slides/2-ts-graphics.html#the-tsibble-index",
    "href": "slides/2-ts-graphics.html#the-tsibble-index",
    "title": "Chapter 2 Time Series Graphics",
    "section": "The tsibble index",
    "text": "The tsibble index\nExample\n\nmydata &lt;- tsibble(\n    year = 2012:2016,\n    y = c(123, 39, 78, 52, 110),\n    index = year\n)\nmydata\n\n# A tsibble: 5 x 2 [1Y]\n   year     y\n  &lt;int&gt; &lt;dbl&gt;\n1  2012   123\n2  2013    39\n3  2014    78\n4  2015    52\n5  2016   110"
  },
  {
    "objectID": "slides/2-ts-graphics.html#the-tsibble-index-1",
    "href": "slides/2-ts-graphics.html#the-tsibble-index-1",
    "title": "Chapter 2 Time Series Graphics",
    "section": "The tsibble index",
    "text": "The tsibble index\nExample\n\nmydata &lt;- tibble(\n    year = 2012:2016,\n    y = c(123, 39, 78, 52, 110)\n  ) |&gt;\n  as_tsibble(index = year)\nmydata\n\n# A tsibble: 5 x 2 [1Y]\n   year     y\n  &lt;int&gt; &lt;dbl&gt;\n1  2012   123\n2  2013    39\n3  2014    78\n4  2015    52\n5  2016   110"
  },
  {
    "objectID": "slides/2-ts-graphics.html#the-tsibble-index-2",
    "href": "slides/2-ts-graphics.html#the-tsibble-index-2",
    "title": "Chapter 2 Time Series Graphics",
    "section": "The tsibble index",
    "text": "The tsibble index\nFor observations more frequent than once per year, we need to use a time class function on the index.\n\n\nz\n\n# A tibble: 5 × 2\n  Month    Observation\n  &lt;chr&gt;          &lt;dbl&gt;\n1 2019 Jan          50\n2 2019 Feb          23\n3 2019 Mar          34\n4 2019 Apr          30\n5 2019 May          25"
  },
  {
    "objectID": "slides/2-ts-graphics.html#the-tsibble-index-3",
    "href": "slides/2-ts-graphics.html#the-tsibble-index-3",
    "title": "Chapter 2 Time Series Graphics",
    "section": "The tsibble index",
    "text": "The tsibble index\nFor observations more frequent than once per year, we need to use a time class function on the index.\n\n\nz |&gt;\n  mutate(Month = yearmonth(Month)) |&gt;\n  as_tsibble(index = Month)\n\n# A tsibble: 5 x 2 [1M]\n     Month Observation\n     &lt;mth&gt;       &lt;dbl&gt;\n1 2019 Jan          50\n2 2019 Feb          23\n3 2019 Mar          34\n4 2019 Apr          30\n5 2019 May          25"
  },
  {
    "objectID": "slides/2-ts-graphics.html#the-tsibble-index-4",
    "href": "slides/2-ts-graphics.html#the-tsibble-index-4",
    "title": "Chapter 2 Time Series Graphics",
    "section": "The tsibble index",
    "text": "The tsibble index\nCommon time index variables can be created with these functions:\n\n\n\n\n\n\nFrequency\nFunction\n\n\n\n\nAnnual\nstart:end\n\n\nQuarterly\nyearquarter()\n\n\nMonthly\nyearmonth()\n\n\nWeekly\nyearweek()\n\n\nDaily\nas_date(), ymd()\n\n\nSub-daily\nas_datetime()"
  },
  {
    "objectID": "slides/2-ts-graphics.html#australian-prison-population",
    "href": "slides/2-ts-graphics.html#australian-prison-population",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Australian prison population",
    "text": "Australian prison population"
  },
  {
    "objectID": "slides/2-ts-graphics.html#read-a-csv-file-and-convert-to-a-tsibble",
    "href": "slides/2-ts-graphics.html#read-a-csv-file-and-convert-to-a-tsibble",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Read a csv file and convert to a tsibble",
    "text": "Read a csv file and convert to a tsibble\n\nprison &lt;- readr::read_csv(\"data/prison_population.csv\")\n#readr::read_csv(\"~/STA364/data/prison_population.csv\")\n\n\n\n# A tibble: 3,072 × 6\n   date       state gender legal     indigenous count\n   &lt;date&gt;     &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;     &lt;chr&gt;      &lt;dbl&gt;\n 1 2005-03-01 ACT   Female Remanded  ATSI           0\n 2 2005-03-01 ACT   Female Remanded  Other          2\n 3 2005-03-01 ACT   Female Sentenced ATSI           0\n 4 2005-03-01 ACT   Female Sentenced Other          0\n 5 2005-03-01 ACT   Male   Remanded  ATSI           7\n 6 2005-03-01 ACT   Male   Remanded  Other         58\n 7 2005-03-01 ACT   Male   Sentenced ATSI           0\n 8 2005-03-01 ACT   Male   Sentenced Other          0\n 9 2005-03-01 NSW   Female Remanded  ATSI          51\n10 2005-03-01 NSW   Female Remanded  Other        131\n# ℹ 3,062 more rows"
  },
  {
    "objectID": "slides/2-ts-graphics.html#read-a-csv-file-and-convert-to-a-tsibble-1",
    "href": "slides/2-ts-graphics.html#read-a-csv-file-and-convert-to-a-tsibble-1",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Read a csv file and convert to a tsibble",
    "text": "Read a csv file and convert to a tsibble\n\nprison &lt;- readr::read_csv(\"data/prison_population.csv\") |&gt;\n  mutate(Quarter = yearquarter(date))\n\n\n\n# A tibble: 3,072 × 7\n   date       state gender legal     indigenous count Quarter\n   &lt;date&gt;     &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;     &lt;chr&gt;      &lt;dbl&gt;   &lt;qtr&gt;\n 1 2005-03-01 ACT   Female Remanded  ATSI           0 2005 Q1\n 2 2005-03-01 ACT   Female Remanded  Other          2 2005 Q1\n 3 2005-03-01 ACT   Female Sentenced ATSI           0 2005 Q1\n 4 2005-03-01 ACT   Female Sentenced Other          0 2005 Q1\n 5 2005-03-01 ACT   Male   Remanded  ATSI           7 2005 Q1\n 6 2005-03-01 ACT   Male   Remanded  Other         58 2005 Q1\n 7 2005-03-01 ACT   Male   Sentenced ATSI           0 2005 Q1\n 8 2005-03-01 ACT   Male   Sentenced Other          0 2005 Q1\n 9 2005-03-01 NSW   Female Remanded  ATSI          51 2005 Q1\n10 2005-03-01 NSW   Female Remanded  Other        131 2005 Q1\n# ℹ 3,062 more rows"
  },
  {
    "objectID": "slides/2-ts-graphics.html#read-a-csv-file-and-convert-to-a-tsibble-2",
    "href": "slides/2-ts-graphics.html#read-a-csv-file-and-convert-to-a-tsibble-2",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Read a csv file and convert to a tsibble",
    "text": "Read a csv file and convert to a tsibble\n\nprison &lt;- readr::read_csv(\"data/prison_population.csv\") |&gt;\n  mutate(Quarter = yearquarter(date)) |&gt;\n  select(-date)\n\n\n\n# A tibble: 3,072 × 6\n   state gender legal     indigenous count Quarter\n   &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;     &lt;chr&gt;      &lt;dbl&gt;   &lt;qtr&gt;\n 1 ACT   Female Remanded  ATSI           0 2005 Q1\n 2 ACT   Female Remanded  Other          2 2005 Q1\n 3 ACT   Female Sentenced ATSI           0 2005 Q1\n 4 ACT   Female Sentenced Other          0 2005 Q1\n 5 ACT   Male   Remanded  ATSI           7 2005 Q1\n 6 ACT   Male   Remanded  Other         58 2005 Q1\n 7 ACT   Male   Sentenced ATSI           0 2005 Q1\n 8 ACT   Male   Sentenced Other          0 2005 Q1\n 9 NSW   Female Remanded  ATSI          51 2005 Q1\n10 NSW   Female Remanded  Other        131 2005 Q1\n# ℹ 3,062 more rows"
  },
  {
    "objectID": "slides/2-ts-graphics.html#read-a-csv-file-and-convert-to-a-tsibble-3",
    "href": "slides/2-ts-graphics.html#read-a-csv-file-and-convert-to-a-tsibble-3",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Read a csv file and convert to a tsibble",
    "text": "Read a csv file and convert to a tsibble\n\nprison &lt;- readr::read_csv(\"data/prison_population.csv\") |&gt;\n  mutate(Quarter = yearquarter(date)) |&gt;\n  select(-date) |&gt;\n  as_tsibble(\n    index = Quarter,\n    key = c(state, gender, legal, indigenous)\n  )\n\n\n\n# A tsibble: 5 x 6 [1Q]\n# Key:       state, gender, legal, indigenous [1]\n  state gender legal    indigenous count Quarter\n  &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;    &lt;chr&gt;      &lt;dbl&gt;   &lt;qtr&gt;\n1 ACT   Female Remanded ATSI           0 2005 Q1\n2 ACT   Female Remanded ATSI           1 2005 Q2\n3 ACT   Female Remanded ATSI           0 2005 Q3\n4 ACT   Female Remanded ATSI           0 2005 Q4\n5 ACT   Female Remanded ATSI           1 2006 Q1"
  },
  {
    "objectID": "slides/2-ts-graphics.html#australian-pharmaceutical-benefits-scheme",
    "href": "slides/2-ts-graphics.html#australian-pharmaceutical-benefits-scheme",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Australian Pharmaceutical Benefits Scheme",
    "text": "Australian Pharmaceutical Benefits Scheme"
  },
  {
    "objectID": "slides/2-ts-graphics.html#australian-pharmaceutical-benefits-scheme-1",
    "href": "slides/2-ts-graphics.html#australian-pharmaceutical-benefits-scheme-1",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Australian Pharmaceutical Benefits Scheme",
    "text": "Australian Pharmaceutical Benefits Scheme\nThe Pharmaceutical Benefits Scheme (PBS) is the Australian government drugs subsidy scheme.\n\nMany drugs bought from pharmacies are subsidised to allow more equitable access to modern drugs.\nThe cost to government is determined by the number and types of drugs purchased. Currently nearly 1% of GDP.\nThe total cost is budgeted based on forecasts of drug usage.\nCosts are disaggregated by drug type (ATC1 x15 / ATC2 84), concession category (x2) and patient type (x2), giving \\(84\\times2\\times2=336\\) time series."
  },
  {
    "objectID": "slides/2-ts-graphics.html#working-with-tsibble-objects",
    "href": "slides/2-ts-graphics.html#working-with-tsibble-objects",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Working with tsibble objects",
    "text": "Working with tsibble objects\n\nPBS |&gt; head(5)\n\n# A tsibble: 5 x 9 [1M]\n# Key:       Concession, Type, ATC1, ATC2 [1]\n     Month Concession   Type        ATC1  ATC1_desc          ATC2  ATC2_desc Scripts  Cost\n     &lt;mth&gt; &lt;chr&gt;        &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt;              &lt;chr&gt; &lt;chr&gt;       &lt;dbl&gt; &lt;dbl&gt;\n1 1991 Jul Concessional Co-payments A     Alimentary tract … A01   STOMATOL…   18228 67877\n2 1991 Aug Concessional Co-payments A     Alimentary tract … A01   STOMATOL…   15327 57011\n3 1991 Sep Concessional Co-payments A     Alimentary tract … A01   STOMATOL…   14775 55020\n4 1991 Oct Concessional Co-payments A     Alimentary tract … A01   STOMATOL…   15380 57222\n5 1991 Nov Concessional Co-payments A     Alimentary tract … A01   STOMATOL…   14371 52120"
  },
  {
    "objectID": "slides/2-ts-graphics.html#working-with-tsibble-objects-1",
    "href": "slides/2-ts-graphics.html#working-with-tsibble-objects-1",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Working with tsibble objects",
    "text": "Working with tsibble objects\nWe can use the filter() function to select rows.\n\nPBS |&gt;\n  filter(ATC2 == \"A10\")|&gt; \n  head(5)\n\n# A tsibble: 5 x 9 [1M]\n# Key:       Concession, Type, ATC1, ATC2 [1]\n     Month Concession   Type        ATC1  ATC1_desc         ATC2  ATC2_desc Scripts   Cost\n     &lt;mth&gt; &lt;chr&gt;        &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt;             &lt;chr&gt; &lt;chr&gt;       &lt;dbl&gt;  &lt;dbl&gt;\n1 1991 Jul Concessional Co-payments A     Alimentary tract… A10   ANTIDIAB…   89733 2.09e6\n2 1991 Aug Concessional Co-payments A     Alimentary tract… A10   ANTIDIAB…   77101 1.80e6\n3 1991 Sep Concessional Co-payments A     Alimentary tract… A10   ANTIDIAB…   76255 1.78e6\n4 1991 Oct Concessional Co-payments A     Alimentary tract… A10   ANTIDIAB…   78681 1.85e6\n5 1991 Nov Concessional Co-payments A     Alimentary tract… A10   ANTIDIAB…   70554 1.69e6"
  },
  {
    "objectID": "slides/2-ts-graphics.html#working-with-tsibble-objects-2",
    "href": "slides/2-ts-graphics.html#working-with-tsibble-objects-2",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Working with tsibble objects",
    "text": "Working with tsibble objects\nWe can use the select() function to select columns.\n\nPBS |&gt;\n  filter(ATC2 == \"A10\") |&gt;\n  select(Month, Concession, Type, Cost)|&gt; \n  head(5)\n\n# A tsibble: 5 x 4 [1M]\n# Key:       Concession, Type [1]\n     Month Concession   Type           Cost\n     &lt;mth&gt; &lt;chr&gt;        &lt;chr&gt;         &lt;dbl&gt;\n1 1991 Jul Concessional Co-payments 2092878\n2 1991 Aug Concessional Co-payments 1795733\n3 1991 Sep Concessional Co-payments 1777231\n4 1991 Oct Concessional Co-payments 1848507\n5 1991 Nov Concessional Co-payments 1686458"
  },
  {
    "objectID": "slides/2-ts-graphics.html#working-with-tsibble-objects-3",
    "href": "slides/2-ts-graphics.html#working-with-tsibble-objects-3",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Working with tsibble objects",
    "text": "Working with tsibble objects\nWe can use the summarise() function to summarise over keys.\n\nPBS |&gt;\n  filter(ATC2 == \"A10\") |&gt;\n  select(Month, Concession, Type, Cost) |&gt;\n  summarise(total_cost = sum(Cost))|&gt; \n  head(5)\n\n# A tsibble: 5 x 2 [1M]\n     Month total_cost\n     &lt;mth&gt;      &lt;dbl&gt;\n1 1991 Jul    3526591\n2 1991 Aug    3180891\n3 1991 Sep    3252221\n4 1991 Oct    3611003\n5 1991 Nov    3565869"
  },
  {
    "objectID": "slides/2-ts-graphics.html#working-with-tsibble-objects-4",
    "href": "slides/2-ts-graphics.html#working-with-tsibble-objects-4",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Working with tsibble objects",
    "text": "Working with tsibble objects\nWe can use the mutate() function to create new variables.\n\nPBS |&gt;\n  filter(ATC2 == \"A10\") |&gt;\n  select(Month, Concession, Type, Cost) |&gt;\n  summarise(total_cost = sum(Cost)) |&gt;\n  mutate(total_cost = total_cost / 1e6)|&gt; \n  head(5)\n\n# A tsibble: 5 x 2 [1M]\n     Month total_cost\n     &lt;mth&gt;      &lt;dbl&gt;\n1 1991 Jul       3.53\n2 1991 Aug       3.18\n3 1991 Sep       3.25\n4 1991 Oct       3.61\n5 1991 Nov       3.57"
  },
  {
    "objectID": "slides/2-ts-graphics.html#working-with-tsibble-objects-5",
    "href": "slides/2-ts-graphics.html#working-with-tsibble-objects-5",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Working with tsibble objects",
    "text": "Working with tsibble objects\nWe can use the mutate() function to create new variables.\n\na10 &lt;- PBS |&gt;\n  filter(ATC2 == \"A10\") |&gt;\n  select(Month, Concession, Type, Cost) |&gt;\n  summarise(total_cost = sum(Cost)) |&gt;\n  mutate(total_cost = total_cost / 1e6) |&gt; \n  head(5)\n\n\n\n# A tsibble: 5 x 2 [1M]\n     Month total_cost\n     &lt;mth&gt;      &lt;dbl&gt;\n1 1991 Jul       3.53\n2 1991 Aug       3.18\n3 1991 Sep       3.25\n4 1991 Oct       3.61\n5 1991 Nov       3.57"
  },
  {
    "objectID": "slides/2-ts-graphics.html#time-plots-1",
    "href": "slides/2-ts-graphics.html#time-plots-1",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Time plots",
    "text": "Time plots\n\na10 |&gt;\n  autoplot(total_cost)"
  },
  {
    "objectID": "slides/2-ts-graphics.html#ansett-airlines",
    "href": "slides/2-ts-graphics.html#ansett-airlines",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Ansett airlines",
    "text": "Ansett airlines\n\nansett |&gt;\n  autoplot(Passengers)"
  },
  {
    "objectID": "slides/2-ts-graphics.html#ansett-airlines-1",
    "href": "slides/2-ts-graphics.html#ansett-airlines-1",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Ansett airlines",
    "text": "Ansett airlines\n\nansett |&gt;\n  filter(Class == \"Economy\") |&gt;\n  autoplot(Passengers)"
  },
  {
    "objectID": "slides/2-ts-graphics.html#ansett-airlines-2",
    "href": "slides/2-ts-graphics.html#ansett-airlines-2",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Ansett airlines",
    "text": "Ansett airlines\n\nansett |&gt;\n  filter(Airports == \"MEL-SYD\") |&gt;\n  autoplot(Passengers)"
  },
  {
    "objectID": "slides/2-ts-graphics.html#time-series-patterns",
    "href": "slides/2-ts-graphics.html#time-series-patterns",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Time series patterns",
    "text": "Time series patterns\n\nTrend\n\npattern exists when there is a long-term increase or decrease in the data.\n\nSeasonal\n\npattern exists when a series is influenced by seasonal factors (e.g., the quarter of the year, the month, or day of the week).\n\nCyclic\n\npattern exists when data exhibit rises and falls that are (duration usually of at least 2 years)."
  },
  {
    "objectID": "slides/2-ts-graphics.html#time-series-components",
    "href": "slides/2-ts-graphics.html#time-series-components",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Time series components",
    "text": "Time series components\nDifferences between seasonal and cyclic patterns:\n\nseasonal pattern constant length; cyclic pattern variable length\naverage length of cycle longer than length of seasonal pattern\nmagnitude of cycle more variable than magnitude of seasonal pattern"
  },
  {
    "objectID": "slides/2-ts-graphics.html#time-series-patterns-1",
    "href": "slides/2-ts-graphics.html#time-series-patterns-1",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Time series patterns",
    "text": "Time series patterns\n\naus_production |&gt;\n  filter(year(Quarter) &gt;= 1980) |&gt;\n  autoplot(Electricity) +\n  labs(y = \"GWh\", title = \"Australian electricity production\")"
  },
  {
    "objectID": "slides/2-ts-graphics.html#time-series-patterns-2",
    "href": "slides/2-ts-graphics.html#time-series-patterns-2",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Time series patterns",
    "text": "Time series patterns\n\naus_production |&gt;\n  autoplot(Bricks) +\n  labs(y = \"million units\", title = \"Australian clay brick production\")"
  },
  {
    "objectID": "slides/2-ts-graphics.html#time-series-patterns-3",
    "href": "slides/2-ts-graphics.html#time-series-patterns-3",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Time series patterns",
    "text": "Time series patterns\n\nus_employment |&gt;\n  filter(Title == \"Retail Trade\", year(Month) &gt;= 1980) |&gt;\n  autoplot(Employed / 1e3) +\n  labs(y = \"Million people\", title = \"Retail employment, USA\")"
  },
  {
    "objectID": "slides/2-ts-graphics.html#time-series-patterns-4",
    "href": "slides/2-ts-graphics.html#time-series-patterns-4",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Time series patterns",
    "text": "Time series patterns\n\ngafa_stock |&gt;\n  filter(Symbol == \"AMZN\", year(Date) &gt;= 2018) |&gt;\n  autoplot(Close) +\n  labs(y = \"$US\", title = \"Amazon closing stock price\")"
  },
  {
    "objectID": "slides/2-ts-graphics.html#time-series-patterns-5",
    "href": "slides/2-ts-graphics.html#time-series-patterns-5",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Time series patterns",
    "text": "Time series patterns\n\npelt |&gt;\n  autoplot(Lynx) +\n  labs(y=\"Number trapped\", title = \"Annual Canadian Lynx Trappings\")"
  },
  {
    "objectID": "slides/2-ts-graphics.html#seasonal-or-cyclic",
    "href": "slides/2-ts-graphics.html#seasonal-or-cyclic",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Seasonal or cyclic?",
    "text": "Seasonal or cyclic?\n\n\nseasonal pattern constant length; cyclic pattern variable length\naverage length of cycle longer than length of seasonal pattern\nmagnitude of cycle more variable than magnitude of seasonal pattern"
  },
  {
    "objectID": "slides/2-ts-graphics.html#seasonal-plots",
    "href": "slides/2-ts-graphics.html#seasonal-plots",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Seasonal plots",
    "text": "Seasonal plots\n\na10 |&gt; gg_season(total_cost, labels = \"both\") +\n  labs(y = \"$ million\", title = \"Seasonal plot: antidiabetic drug sales\")"
  },
  {
    "objectID": "slides/2-ts-graphics.html#seasonal-plots-1",
    "href": "slides/2-ts-graphics.html#seasonal-plots-1",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Seasonal plots",
    "text": "Seasonal plots\n\nData plotted against the individual “seasons” in which the data were observed. (In this case a “season” is a month.)\nSomething like a time plot except that the data from each season are overlapped.\nEnables the underlying seasonal pattern to be seen more clearly, and also allows any substantial departures from the seasonal pattern to be easily identified.\nIn R: gg_season()"
  },
  {
    "objectID": "slides/2-ts-graphics.html#seasonal-subseries-plots",
    "href": "slides/2-ts-graphics.html#seasonal-subseries-plots",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Seasonal subseries plots",
    "text": "Seasonal subseries plots\n\na10 |&gt;\n  gg_subseries(total_cost) +\n  labs(y = \"$ million\", title = \"Subseries plot: antidiabetic drug sales\")"
  },
  {
    "objectID": "slides/2-ts-graphics.html#seasonal-subseries-plots-1",
    "href": "slides/2-ts-graphics.html#seasonal-subseries-plots-1",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Seasonal subseries plots",
    "text": "Seasonal subseries plots\n\nData for each season collected together in time plot as separate time series.\nEnables the underlying seasonal pattern to be seen clearly, and changes in seasonality over time to be visualized.\nIn R: gg_subseries()"
  },
  {
    "objectID": "slides/2-ts-graphics.html#quarterly-australian-beer-production",
    "href": "slides/2-ts-graphics.html#quarterly-australian-beer-production",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Quarterly Australian Beer Production",
    "text": "Quarterly Australian Beer Production\n\nbeer &lt;- aus_production |&gt;\n  select(Quarter, Beer) |&gt;\n  filter(year(Quarter) &gt;= 1992)\nbeer |&gt; autoplot(Beer)"
  },
  {
    "objectID": "slides/2-ts-graphics.html#quarterly-australian-beer-production-1",
    "href": "slides/2-ts-graphics.html#quarterly-australian-beer-production-1",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Quarterly Australian Beer Production",
    "text": "Quarterly Australian Beer Production\n\nbeer |&gt; gg_season(Beer, labels=\"right\")"
  },
  {
    "objectID": "slides/2-ts-graphics.html#quarterly-australian-beer-production-2",
    "href": "slides/2-ts-graphics.html#quarterly-australian-beer-production-2",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Quarterly Australian Beer Production",
    "text": "Quarterly Australian Beer Production\n\nbeer |&gt; gg_subseries(Beer)"
  },
  {
    "objectID": "slides/2-ts-graphics.html#multiple-seasonal-periods",
    "href": "slides/2-ts-graphics.html#multiple-seasonal-periods",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Multiple seasonal periods",
    "text": "Multiple seasonal periods\n\nvic_elec\n\n# A tsibble: 52,608 x 5 [30m] &lt;Australia/Melbourne&gt;\n   Time                Demand Temperature Date       Holiday\n   &lt;dttm&gt;               &lt;dbl&gt;       &lt;dbl&gt; &lt;date&gt;     &lt;lgl&gt;  \n 1 2012-01-01 00:00:00  4383.        21.4 2012-01-01 TRUE   \n 2 2012-01-01 00:30:00  4263.        21.0 2012-01-01 TRUE   \n 3 2012-01-01 01:00:00  4049.        20.7 2012-01-01 TRUE   \n 4 2012-01-01 01:30:00  3878.        20.6 2012-01-01 TRUE   \n 5 2012-01-01 02:00:00  4036.        20.4 2012-01-01 TRUE   \n 6 2012-01-01 02:30:00  3866.        20.2 2012-01-01 TRUE   \n 7 2012-01-01 03:00:00  3694.        20.1 2012-01-01 TRUE   \n 8 2012-01-01 03:30:00  3562.        19.6 2012-01-01 TRUE   \n 9 2012-01-01 04:00:00  3433.        19.1 2012-01-01 TRUE   \n10 2012-01-01 04:30:00  3359.        19.0 2012-01-01 TRUE   \n# ℹ 52,598 more rows"
  },
  {
    "objectID": "slides/2-ts-graphics.html#multiple-seasonal-periods-1",
    "href": "slides/2-ts-graphics.html#multiple-seasonal-periods-1",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Multiple seasonal periods",
    "text": "Multiple seasonal periods\n\nvic_elec |&gt; gg_season(Demand)"
  },
  {
    "objectID": "slides/2-ts-graphics.html#multiple-seasonal-periods-2",
    "href": "slides/2-ts-graphics.html#multiple-seasonal-periods-2",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Multiple seasonal periods",
    "text": "Multiple seasonal periods\n\nvic_elec |&gt; gg_season(Demand, period = \"week\")"
  },
  {
    "objectID": "slides/2-ts-graphics.html#multiple-seasonal-periods-3",
    "href": "slides/2-ts-graphics.html#multiple-seasonal-periods-3",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Multiple seasonal periods",
    "text": "Multiple seasonal periods\n\nvic_elec |&gt; gg_season(Demand, period = \"day\")"
  },
  {
    "objectID": "slides/2-ts-graphics.html#australian-holidays",
    "href": "slides/2-ts-graphics.html#australian-holidays",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Australian holidays",
    "text": "Australian holidays\n\nholidays &lt;- tourism |&gt;\n  filter(Purpose == \"Holiday\") |&gt;\n  group_by(State) |&gt;\n  summarise(Trips = sum(Trips))\n\n\n\n# A tsibble: 640 x 3 [1Q]\n# Key:       State [8]\n   State Quarter Trips\n   &lt;chr&gt;   &lt;qtr&gt; &lt;dbl&gt;\n 1 ACT   1998 Q1  196.\n 2 ACT   1998 Q2  127.\n 3 ACT   1998 Q3  111.\n 4 ACT   1998 Q4  170.\n 5 ACT   1999 Q1  108.\n 6 ACT   1999 Q2  125.\n 7 ACT   1999 Q3  178.\n 8 ACT   1999 Q4  218.\n 9 ACT   2000 Q1  158.\n10 ACT   2000 Q2  155.\n# ℹ 630 more rows"
  },
  {
    "objectID": "slides/2-ts-graphics.html#australian-holidays-1",
    "href": "slides/2-ts-graphics.html#australian-holidays-1",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Australian holidays",
    "text": "Australian holidays\n\nholidays |&gt; autoplot(Trips) +\n  labs(y = \"thousands of trips\", title = \"Australian domestic holiday nights\")"
  },
  {
    "objectID": "slides/2-ts-graphics.html#seasonal-plots-2",
    "href": "slides/2-ts-graphics.html#seasonal-plots-2",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Seasonal plots",
    "text": "Seasonal plots\n\nholidays |&gt; gg_season(Trips) +\n  labs(y = \"thousands of trips\", title = \"Australian domestic holiday nights\")"
  },
  {
    "objectID": "slides/2-ts-graphics.html#seasonal-subseries-plots-2",
    "href": "slides/2-ts-graphics.html#seasonal-subseries-plots-2",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Seasonal subseries plots",
    "text": "Seasonal subseries plots\n\nholidays |&gt;\n  gg_subseries(Trips) +\n  labs(y = \"thousands of trips\", title = \"Australian domestic holiday nights\")"
  },
  {
    "objectID": "slides/2-ts-graphics.html#example-beer-production",
    "href": "slides/2-ts-graphics.html#example-beer-production",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Example: Beer production",
    "text": "Example: Beer production\n\nnew_production &lt;- aus_production |&gt;\n  filter(year(Quarter) &gt;= 1992)\nnew_production\n\n# A tsibble: 74 x 7 [1Q]\n   Quarter  Beer Tobacco Bricks Cement Electricity   Gas\n     &lt;qtr&gt; &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;       &lt;dbl&gt; &lt;dbl&gt;\n 1 1992 Q1   443    5777    383   1289       38332   117\n 2 1992 Q2   410    5853    404   1501       39774   151\n 3 1992 Q3   420    6416    446   1539       42246   175\n 4 1992 Q4   532    5825    420   1568       38498   129\n 5 1993 Q1   433    5724    394   1450       39460   116\n 6 1993 Q2   421    6036    462   1668       41356   149\n 7 1993 Q3   410    6570    475   1648       42949   163\n 8 1993 Q4   512    5675    443   1863       40974   138\n 9 1994 Q1   449    5311    421   1468       40162   127\n10 1994 Q2   381    5717    475   1755       41199   159\n# ℹ 64 more rows"
  },
  {
    "objectID": "slides/2-ts-graphics.html#example-beer-production-1",
    "href": "slides/2-ts-graphics.html#example-beer-production-1",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Example: Beer production",
    "text": "Example: Beer production\n\nnew_production |&gt; gg_lag(Beer)"
  },
  {
    "objectID": "slides/2-ts-graphics.html#example-beer-production-2",
    "href": "slides/2-ts-graphics.html#example-beer-production-2",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Example: Beer production",
    "text": "Example: Beer production\n\nnew_production |&gt; gg_lag(Beer, geom='point')"
  },
  {
    "objectID": "slides/2-ts-graphics.html#lagged-scatterplots",
    "href": "slides/2-ts-graphics.html#lagged-scatterplots",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Lagged scatterplots",
    "text": "Lagged scatterplots\n\nEach graph shows \\(y_t\\) plotted against \\(y_{t-k}\\) for different values of \\(k\\).\nThe autocorrelations are the correlations associated with these scatterplots.\nACF (autocorrelation function):\n\n\\(r_1=\\text{Correlation}(y_{t}, y_{t-1})\\)\n\\(r_2=\\text{Correlation}(y_{t}, y_{t-2})\\)\n\\(r_3=\\text{Correlation}(y_{t}, y_{t-3})\\)\netc."
  },
  {
    "objectID": "slides/2-ts-graphics.html#autocorrelation",
    "href": "slides/2-ts-graphics.html#autocorrelation",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Autocorrelation",
    "text": "Autocorrelation\nCovariance and correlation: measure extent of linear relationship between two variables (\\(y\\) and \\(X\\)).\nAutocovariance and autocorrelation: measure linear relationship between lagged values of a time series \\(y\\).\nWe measure the relationship between:\n\n\\(y_{t}\\) and \\(y_{t-1}\\)\n\\(y_{t}\\) and \\(y_{t-2}\\)\n\\(y_{t}\\) and \\(y_{t-3}\\)\netc."
  },
  {
    "objectID": "slides/2-ts-graphics.html#autocorrelation-1",
    "href": "slides/2-ts-graphics.html#autocorrelation-1",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Autocorrelation",
    "text": "Autocorrelation\nWe denote the sample autocovariance at lag \\(k\\) by \\(c_k\\) and the sample autocorrelation at lag \\(k\\) by \\(r_k\\). Then define\n\n\\(r_1\\) indicates how successive values of \\(y\\) relate to each other\n\\(r_2\\) indicates how \\(y\\) values two periods apart relate to each other\n\\(r_k\\) is the same as the sample correlation between \\(y_t\\) and \\(y_{t-k}\\)."
  },
  {
    "objectID": "slides/2-ts-graphics.html#autocorrelation-2",
    "href": "slides/2-ts-graphics.html#autocorrelation-2",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Autocorrelation",
    "text": "Autocorrelation\nResults for first 9 lags for beer data:\n\nnew_production |&gt; ACF(Beer, lag_max = 9)\n\n# A tsibble: 9 x 2 [1Q]\n       lag     acf\n  &lt;cf_lag&gt;   &lt;dbl&gt;\n1       1Q -0.102 \n2       2Q -0.657 \n3       3Q -0.0603\n4       4Q  0.869 \n5       5Q -0.0892\n6       6Q -0.635 \n7       7Q -0.0542\n8       8Q  0.832 \n9       9Q -0.108"
  },
  {
    "objectID": "slides/2-ts-graphics.html#autocorrelation-3",
    "href": "slides/2-ts-graphics.html#autocorrelation-3",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Autocorrelation",
    "text": "Autocorrelation\nResults for first 9 lags for beer data:\n\nnew_production |&gt; ACF(Beer, lag_max = 9) |&gt; autoplot()\n\n\n\nTogether, the autocorrelations at lags 1, 2, , make up the or ACF.\nThe plot is known as a correlogram"
  },
  {
    "objectID": "slides/2-ts-graphics.html#autocorrelation-4",
    "href": "slides/2-ts-graphics.html#autocorrelation-4",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Autocorrelation",
    "text": "Autocorrelation\n\nnew_production |&gt; ACF(Beer) |&gt; autoplot()\n\n\n\n\\(r_{4}\\) higher than for the other lags. This is due to the seasonal pattern in the data: the peaks tend to be 4 quarters apart and the troughs tend to be 2 quarters apart.\n\\(r_2\\) is more negative than for the other lags because troughs tend to be 2 quarters behind peaks."
  },
  {
    "objectID": "slides/2-ts-graphics.html#trend-and-seasonality-in-acf-plots",
    "href": "slides/2-ts-graphics.html#trend-and-seasonality-in-acf-plots",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Trend and seasonality in ACF plots",
    "text": "Trend and seasonality in ACF plots\n\nWhen data have a trend, the autocorrelations for small lags tend to be large and positive.\nWhen data are seasonal, the autocorrelations will be larger at the seasonal lags (i.e., at multiples of the seasonal frequency)\nWhen data are trended and seasonal, you see a combination of these effects."
  },
  {
    "objectID": "slides/2-ts-graphics.html#autocorrelation-functions",
    "href": "slides/2-ts-graphics.html#autocorrelation-functions",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Autocorrelation functions",
    "text": "Autocorrelation functions\n\n\n\nArtwork by @allison_horst"
  },
  {
    "objectID": "slides/2-ts-graphics.html#us-retail-trade-employment",
    "href": "slides/2-ts-graphics.html#us-retail-trade-employment",
    "title": "Chapter 2 Time Series Graphics",
    "section": "US retail trade employment",
    "text": "US retail trade employment\n\nretail &lt;- us_employment |&gt;\n  filter(Title == \"Retail Trade\", year(Month) &gt;= 1980)\nretail |&gt; autoplot(Employed)"
  },
  {
    "objectID": "slides/2-ts-graphics.html#us-retail-trade-employment-1",
    "href": "slides/2-ts-graphics.html#us-retail-trade-employment-1",
    "title": "Chapter 2 Time Series Graphics",
    "section": "US retail trade employment",
    "text": "US retail trade employment\n\nretail |&gt;\n  ACF(Employed, lag_max = 48) |&gt;\n  autoplot()"
  },
  {
    "objectID": "slides/2-ts-graphics.html#google-stock-price",
    "href": "slides/2-ts-graphics.html#google-stock-price",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Google stock price",
    "text": "Google stock price\n\ngoogle_2015 &lt;- gafa_stock |&gt;\n  filter(Symbol == \"GOOG\", year(Date) == 2015) |&gt;\n  select(Date, Close)\ngoogle_2015\n\n# A tsibble: 252 x 2 [!]\n   Date       Close\n   &lt;date&gt;     &lt;dbl&gt;\n 1 2015-01-02  522.\n 2 2015-01-05  511.\n 3 2015-01-06  499.\n 4 2015-01-07  498.\n 5 2015-01-08  500.\n 6 2015-01-09  493.\n 7 2015-01-12  490.\n 8 2015-01-13  493.\n 9 2015-01-14  498.\n10 2015-01-15  499.\n# ℹ 242 more rows"
  },
  {
    "objectID": "slides/2-ts-graphics.html#google-stock-price-1",
    "href": "slides/2-ts-graphics.html#google-stock-price-1",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Google stock price",
    "text": "Google stock price\n\ngoogle_2015 |&gt; autoplot(Close)"
  },
  {
    "objectID": "slides/2-ts-graphics.html#google-stock-price-2",
    "href": "slides/2-ts-graphics.html#google-stock-price-2",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Google stock price",
    "text": "Google stock price\n\ngoogle_2015 |&gt;\n  ACF(Close, lag_max=100)\n\n# A tsibble: 100 x 2 [1]\n        lag   acf\n   &lt;cf_lag&gt; &lt;dbl&gt;\n 1        1 0.982\n 2        2 0.959\n 3        3 0.937\n 4        4 0.918\n 5        5 0.901\n 6        6 0.883\n 7        7 0.865\n 8        8 0.849\n 9        9 0.834\n10       10 0.818\n# ℹ 90 more rows"
  },
  {
    "objectID": "slides/2-ts-graphics.html#google-stock-price-3",
    "href": "slides/2-ts-graphics.html#google-stock-price-3",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Google stock price",
    "text": "Google stock price\n\ngoogle_2015 |&gt;\n  ACF(Close, lag_max = 100) |&gt;\n  autoplot()"
  },
  {
    "objectID": "slides/2-ts-graphics.html#which-is-which",
    "href": "slides/2-ts-graphics.html#which-is-which",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Which is which?",
    "text": "Which is which?"
  },
  {
    "objectID": "slides/2-ts-graphics.html#example-white-noise",
    "href": "slides/2-ts-graphics.html#example-white-noise",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Example: White noise",
    "text": "Example: White noise\n\nset.seed(30)\nwn &lt;- tsibble(t = 1:50, y = rnorm(50), index = t)\nwn |&gt; autoplot(y)\n\n\n\n\n\n\n\n\nNote\n\n\nWhite noise data is uncorrelated across time with zero mean and constant variance.\n(Technically, we require independence as well.)"
  },
  {
    "objectID": "slides/2-ts-graphics.html#example-white-noise-1",
    "href": "slides/2-ts-graphics.html#example-white-noise-1",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Example: White noise",
    "text": "Example: White noise\nwn |&gt; ACF(y)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\\(r_{1}\\)\n\\(r_{2}\\)\n\\(r_{3}\\)\n\\(r_{4}\\)\n\\(r_{5}\\)\n\\(r_{6}\\)\n\\(r_{7}\\)\n\\(r_{8}\\)\n\\(r_{9}\\)\n\\(r_{10}\\)\n\n\n\n\n0.014\n-0.163\n0.163\n-0.259\n-0.198\n0.064\n-0.139\n-0.032\n0.199\n-0.024\n\n\n\n\n\n\n\n\nSample autocorrelations for white noise series.\nExpect each autocorrelation to be close to zero.\nBlue lines show 95% critical values."
  },
  {
    "objectID": "slides/2-ts-graphics.html#sampling-distribution-of-autocorrelations",
    "href": "slides/2-ts-graphics.html#sampling-distribution-of-autocorrelations",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Sampling distribution of autocorrelations",
    "text": "Sampling distribution of autocorrelations\nSampling distribution of \\(r_k\\) for white noise data is asymptotically N(0,\\(1/T\\)).\n\n95% of all \\(r_k\\) for white noise must lie within \\(\\pm 1.96/\\sqrt{T}\\).\nIf this is not the case, the series is probably not WN.\nCommon to plot lines at \\(\\pm 1.96/\\sqrt{T}\\) when plotting ACF. These are the ."
  },
  {
    "objectID": "slides/2-ts-graphics.html#example-pigs-slaughtered",
    "href": "slides/2-ts-graphics.html#example-pigs-slaughtered",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Example: Pigs slaughtered",
    "text": "Example: Pigs slaughtered\n\npigs &lt;- aus_livestock |&gt;\n  filter(State == \"Victoria\", Animal == \"Pigs\", year(Month) &gt;= 2014)\npigs |&gt; autoplot(Count/1e3) +\n  labs(y = \"Thousands\", title = \"Number of pigs slaughtered in Victoria\")"
  },
  {
    "objectID": "slides/2-ts-graphics.html#example-pigs-slaughtered-1",
    "href": "slides/2-ts-graphics.html#example-pigs-slaughtered-1",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Example: Pigs slaughtered",
    "text": "Example: Pigs slaughtered\n\npigs |&gt; ACF(Count) |&gt; autoplot()"
  },
  {
    "objectID": "slides/2-ts-graphics.html#example-pigs-slaughtered-2",
    "href": "slides/2-ts-graphics.html#example-pigs-slaughtered-2",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Example: Pigs slaughtered",
    "text": "Example: Pigs slaughtered\nMonthly total number of pigs slaughtered in the state of Victoria, Australia, from January 2014 through December 2018 (Source: Australian Bureau of Statistics.)\n\nDifficult to detect pattern in time plot.\nACF shows significant autocorrelation for lag 2 and 12.\nIndicate some slight seasonality.\n\n\n\n\n\n\n\n\nImportant\n\n\nThese show the series is not a white noise series."
  },
  {
    "objectID": "slides/2-ts-graphics.html#your-turn",
    "href": "slides/2-ts-graphics.html#your-turn",
    "title": "Chapter 2 Time Series Graphics",
    "section": "Your turn",
    "text": "Your turn\nYou can compute the daily changes in the Google stock price in 2018 using\n\ndgoog &lt;- gafa_stock |&gt;\n  filter(Symbol == \"GOOG\", year(Date) &gt;= 2018) |&gt;\n  mutate(diff = difference(Close))\n\n\nDoes diff look like white noise?"
  },
  {
    "objectID": "slides/5-toolbox_o.html",
    "href": "slides/5-toolbox_o.html",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "",
    "text": "library(fpp3)\n\n\n\n\nThe process of producing forecasts can be split up into a few fundamental steps.\n\nPreparing data\nData visualization\nSpecifying a model\nModel estimation\nAccuracy & performance evaluation\nProducing forecasts\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\ngdppc &lt;- global_economy |&gt;\n  mutate(GDP_per_capita = GDP/Population) |&gt;\n  select(Year, Country, GDP, Population, GDP_per_capita)\ngdppc\n\n# A tsibble: 15,150 x 5 [1Y]\n# Key:       Country [263]\n    Year Country             GDP Population GDP_per_capita\n   &lt;dbl&gt; &lt;fct&gt;             &lt;dbl&gt;      &lt;dbl&gt;          &lt;dbl&gt;\n 1  1960 Afghanistan  537777811.    8996351           59.8\n 2  1961 Afghanistan  548888896.    9166764           59.9\n 3  1962 Afghanistan  546666678.    9345868           58.5\n 4  1963 Afghanistan  751111191.    9533954           78.8\n 5  1964 Afghanistan  800000044.    9731361           82.2\n 6  1965 Afghanistan 1006666638.    9938414          101. \n 7  1966 Afghanistan 1399999967.   10152331          138. \n 8  1967 Afghanistan 1673333418.   10372630          161. \n 9  1968 Afghanistan 1373333367.   10604346          130. \n10  1969 Afghanistan 1408888922.   10854428          130. \n# ℹ 15,140 more rows\n\n\n\n\n\n\ngdppc |&gt;\n  filter(Country==\"Sweden\") |&gt;\n  autoplot(GDP_per_capita) +\n    labs(title = \"GDP per capita for Sweden\", y = \"$US\")\n\n\n\n\n\n\n\n\n\n\n\nThe model() function trains models to data.\n\nfit &lt;- gdppc |&gt;\n  model(trend_model = TSLM(GDP_per_capita ~ trend())) # TSLM to be covered later\nfit |&gt; head(5)\n\n# A mable: 5 x 2\n# Key:     Country [5]\n  Country        trend_model\n  &lt;fct&gt;              &lt;model&gt;\n1 Afghanistan         &lt;TSLM&gt;\n2 Albania             &lt;TSLM&gt;\n3 Algeria             &lt;TSLM&gt;\n4 American Samoa      &lt;TSLM&gt;\n5 Andorra             &lt;TSLM&gt;\n\n\n\n\n\n\n\n\nNote\n\n\n\nA is a model table, each cell corresponds to a fitted model.\n\n\n\n\n\n\nfit |&gt; forecast(h = \"3 years\")\n\n# A fable: 789 x 5 [1Y]\n# Key:     Country, .model [263]\n   Country  .model  Year   GDP_per_capita\n   &lt;fct&gt;    &lt;chr&gt;  &lt;dbl&gt;           &lt;dist&gt;\n 1 Afghani… trend…  2018     N(526, 9653)\n 2 Afghani… trend…  2019     N(534, 9689)\n 3 Afghani… trend…  2020     N(542, 9727)\n 4 Albania  trend…  2018  N(4716, 476419)\n 5 Albania  trend…  2019  N(4867, 481086)\n 6 Albania  trend…  2020  N(5018, 486012)\n 7 Algeria  trend…  2018  N(4410, 643094)\n 8 Algeria  trend…  2019  N(4489, 645311)\n 9 Algeria  trend…  2020  N(4568, 647602)\n10 America… trend…  2018 N(12491, 652926)\n# ℹ 779 more rows\n# ℹ 1 more variable: .mean &lt;dbl&gt;\n\n\n\n\n\n\n\n\nNote\n\n\n\nA is a forecast table with point forecasts and distributions.\n\n\n\n\n\n\nfit |&gt; forecast(h = \"3 years\") |&gt;\n  filter(Country==\"Sweden\") |&gt;\n  autoplot(gdppc) +\n    labs(title = \"GDP per capita for Sweden\", y = \"$US\")"
  },
  {
    "objectID": "slides/5-toolbox_o.html#setup",
    "href": "slides/5-toolbox_o.html#setup",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "",
    "text": "library(fpp3)"
  },
  {
    "objectID": "slides/5-toolbox_o.html#a-tidy-forecasting-workflow-1",
    "href": "slides/5-toolbox_o.html#a-tidy-forecasting-workflow-1",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "",
    "text": "The process of producing forecasts can be split up into a few fundamental steps.\n\nPreparing data\nData visualization\nSpecifying a model\nModel estimation\nAccuracy & performance evaluation\nProducing forecasts"
  },
  {
    "objectID": "slides/5-toolbox_o.html#data-preparation-tidy",
    "href": "slides/5-toolbox_o.html#data-preparation-tidy",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "",
    "text": "gdppc &lt;- global_economy |&gt;\n  mutate(GDP_per_capita = GDP/Population) |&gt;\n  select(Year, Country, GDP, Population, GDP_per_capita)\ngdppc\n\n# A tsibble: 15,150 x 5 [1Y]\n# Key:       Country [263]\n    Year Country             GDP Population GDP_per_capita\n   &lt;dbl&gt; &lt;fct&gt;             &lt;dbl&gt;      &lt;dbl&gt;          &lt;dbl&gt;\n 1  1960 Afghanistan  537777811.    8996351           59.8\n 2  1961 Afghanistan  548888896.    9166764           59.9\n 3  1962 Afghanistan  546666678.    9345868           58.5\n 4  1963 Afghanistan  751111191.    9533954           78.8\n 5  1964 Afghanistan  800000044.    9731361           82.2\n 6  1965 Afghanistan 1006666638.    9938414          101. \n 7  1966 Afghanistan 1399999967.   10152331          138. \n 8  1967 Afghanistan 1673333418.   10372630          161. \n 9  1968 Afghanistan 1373333367.   10604346          130. \n10  1969 Afghanistan 1408888922.   10854428          130. \n# ℹ 15,140 more rows"
  },
  {
    "objectID": "slides/5-toolbox_o.html#data-visualisation",
    "href": "slides/5-toolbox_o.html#data-visualisation",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "",
    "text": "gdppc |&gt;\n  filter(Country==\"Sweden\") |&gt;\n  autoplot(GDP_per_capita) +\n    labs(title = \"GDP per capita for Sweden\", y = \"$US\")"
  },
  {
    "objectID": "slides/5-toolbox_o.html#model-estimation",
    "href": "slides/5-toolbox_o.html#model-estimation",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "",
    "text": "The model() function trains models to data.\n\nfit &lt;- gdppc |&gt;\n  model(trend_model = TSLM(GDP_per_capita ~ trend())) # TSLM to be covered later\nfit |&gt; head(5)\n\n# A mable: 5 x 2\n# Key:     Country [5]\n  Country        trend_model\n  &lt;fct&gt;              &lt;model&gt;\n1 Afghanistan         &lt;TSLM&gt;\n2 Albania             &lt;TSLM&gt;\n3 Algeria             &lt;TSLM&gt;\n4 American Samoa      &lt;TSLM&gt;\n5 Andorra             &lt;TSLM&gt;\n\n\n\n\n\n\n\n\nNote\n\n\n\nA is a model table, each cell corresponds to a fitted model."
  },
  {
    "objectID": "slides/5-toolbox_o.html#producing-forecasts",
    "href": "slides/5-toolbox_o.html#producing-forecasts",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "",
    "text": "fit |&gt; forecast(h = \"3 years\")\n\n# A fable: 789 x 5 [1Y]\n# Key:     Country, .model [263]\n   Country  .model  Year   GDP_per_capita\n   &lt;fct&gt;    &lt;chr&gt;  &lt;dbl&gt;           &lt;dist&gt;\n 1 Afghani… trend…  2018     N(526, 9653)\n 2 Afghani… trend…  2019     N(534, 9689)\n 3 Afghani… trend…  2020     N(542, 9727)\n 4 Albania  trend…  2018  N(4716, 476419)\n 5 Albania  trend…  2019  N(4867, 481086)\n 6 Albania  trend…  2020  N(5018, 486012)\n 7 Algeria  trend…  2018  N(4410, 643094)\n 8 Algeria  trend…  2019  N(4489, 645311)\n 9 Algeria  trend…  2020  N(4568, 647602)\n10 America… trend…  2018 N(12491, 652926)\n# ℹ 779 more rows\n# ℹ 1 more variable: .mean &lt;dbl&gt;\n\n\n\n\n\n\n\n\nNote\n\n\n\nA is a forecast table with point forecasts and distributions."
  },
  {
    "objectID": "slides/5-toolbox_o.html#visualising-forecasts",
    "href": "slides/5-toolbox_o.html#visualising-forecasts",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "",
    "text": "fit |&gt; forecast(h = \"3 years\") |&gt;\n  filter(Country==\"Sweden\") |&gt;\n  autoplot(gdppc) +\n    labs(title = \"GDP per capita for Sweden\", y = \"$US\")"
  },
  {
    "objectID": "slides/5-toolbox_o.html#meany-average-method",
    "href": "slides/5-toolbox_o.html#meany-average-method",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "MEAN(y): Average method",
    "text": "MEAN(y): Average method\n\nForecast of all future values is equal to mean of historical data \\(\\{y_1,\\dots,y_T\\}\\).\nForecasts: \\(\\hat{y}_{T+h|T} = \\bar{y} = (y_1+\\dots+y_T)/T\\)\n\n. . ."
  },
  {
    "objectID": "slides/5-toolbox_o.html#meany-average-method-plot",
    "href": "slides/5-toolbox_o.html#meany-average-method-plot",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "MEAN(y): Average method Plot",
    "text": "MEAN(y): Average method Plot\n\nCodePlot\n\n\n\nbricks &lt;- aus_production |&gt;\n  filter(!is.na(Bricks)) |&gt;\n  mutate(average = mean(Bricks))\n\nfc &lt;- bricks |&gt;\n  filter(row_number() == n()) |&gt; as_tibble() |&gt;\n  unnest(Quarter = list(as.Date(Quarter) + months(c(0, 12*5))))\n\nbricks |&gt;\n  ggplot(aes(x = Quarter, y = Bricks)) +\n  geom_line() +\n  geom_line(aes(y = average), colour = \"#0072B2\", linetype = \"dashed\") +\n  geom_line(aes(y = average), data = fc, colour = \"#0072B2\") +\n  labs(title = \"Clay brick production in Australia\")"
  },
  {
    "objectID": "slides/5-toolbox_o.html#naivey-naïve-method",
    "href": "slides/5-toolbox_o.html#naivey-naïve-method",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "NAIVE(y): Naïve method",
    "text": "NAIVE(y): Naïve method\n\nForecasts equal to last observed value.\nForecasts: \\(\\hat{y}_{T+h|T} =y_T\\).\nConsequence of efficient market hypothesis.\n\n. . .\n\nCodePlot\n\n\n\nbricks |&gt;\n  filter(!is.na(Bricks)) |&gt;\n  model(NAIVE(Bricks)) |&gt;\n  forecast(h = \"5 years\") |&gt;\n  autoplot(filter(bricks, year(Quarter) &gt; 1990), level = NULL) +\n    geom_point(data = slice(bricks, n()), aes(y=Bricks), colour = \"#0072B2\") +\n    labs(title = \"Clay brick production in Australia\")"
  },
  {
    "objectID": "slides/5-toolbox_o.html#snaivey-lagm-seasonal-naïve-method",
    "href": "slides/5-toolbox_o.html#snaivey-lagm-seasonal-naïve-method",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "SNAIVE(y ~ lag(m)): Seasonal naïve method",
    "text": "SNAIVE(y ~ lag(m)): Seasonal naïve method\n\nForecasts equal to last value from same season.\nForecasts: \\(\\hat{y}_{T+h|T} =y_{T+h-m(k+1)}\\), where \\(m=\\) seasonal period and \\(k\\) is the integer part of \\((h-1)/m\\).\n\n. . .\n\nCodePlot\n\n\n\nbricks |&gt;\n  model(SNAIVE(Bricks ~ lag(\"year\"))) |&gt;\n  forecast(h = \"5 years\") |&gt;\n  autoplot(filter(bricks, year(Quarter) &gt; 1990), level = NULL) +\n  geom_point(data = slice(bricks, (n()-3):n()), aes(y=Bricks), colour = \"#0072B2\") +\n  labs(title = \"Clay brick production in Australia\")"
  },
  {
    "objectID": "slides/5-toolbox_o.html#rwy-drift-drift-method",
    "href": "slides/5-toolbox_o.html#rwy-drift-drift-method",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "RW(y ~ drift()): Drift method",
    "text": "RW(y ~ drift()): Drift method\n\nDefinitionCode & Plot\n\n\n\nForecasts equal to last value plus average change.\nForecasts:\n\n\\[\\begin{align*}\n\\hat{y}_{T+h|T} & =  y_{T} + \\frac{h}{T-1}\\sum_{t=2}^T (y_t-y_{t-1})\\\\\n                 & = y_T + \\frac{h}{T-1}(y_T -y_1).\n\\end{align*}\\]\n\nEquivalent to extrapolating a line drawn between first and last observations.\n\n\n\n\naus_production |&gt;\n  filter(!is.na(Bricks)) |&gt;\n  model(RW(Bricks ~ drift())) |&gt;\n  forecast(h = \"5 years\") |&gt;\n  autoplot(aus_production, level = NULL) +\n  geom_line(data = slice(aus_production, range(cumsum(!is.na(Bricks)))),\n            aes(y=Bricks), linetype = \"dashed\", colour = \"#0072B2\") +\n  labs(title = \"Clay brick production in Australia\")"
  },
  {
    "objectID": "slides/5-toolbox_o.html#model-fitting",
    "href": "slides/5-toolbox_o.html#model-fitting",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Model fitting",
    "text": "Model fitting\nThe model() function trains models to data.\n\nbrick_fit &lt;-  aus_production |&gt;\n  filter(!is.na(Bricks)) |&gt;\n  model(\n    Seasonal_naive = SNAIVE(Bricks),\n    Naive = NAIVE(Bricks),\n    Drift = RW(Bricks ~ drift()),\n    Mean = MEAN(Bricks)\n  )\n\n\n\n# A mable: 1 x 4\n  Seasonal_naive   Naive         Drift    Mean\n         &lt;model&gt; &lt;model&gt;       &lt;model&gt; &lt;model&gt;\n1       &lt;SNAIVE&gt; &lt;NAIVE&gt; &lt;RW w/ drift&gt;  &lt;MEAN&gt;"
  },
  {
    "objectID": "slides/5-toolbox_o.html#producing-forecasts-1",
    "href": "slides/5-toolbox_o.html#producing-forecasts-1",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Producing forecasts",
    "text": "Producing forecasts\n\nbrick_fc &lt;- brick_fit |&gt;\n  forecast(h = \"5 years\")\n\n\n\n# A fable: 80 x 4 [1Q]\n# Key:     .model [4]\n  .model   Quarter       Bricks .mean\n  &lt;chr&gt;      &lt;qtr&gt;       &lt;dist&gt; &lt;dbl&gt;\n1 Seasona… 2005 Q3 N(428, 2336)   428\n2 Seasona… 2005 Q4 N(397, 2336)   397\n3 Seasona… 2006 Q1 N(355, 2336)   355\n4 Seasona… 2006 Q2 N(435, 2336)   435\n# ℹ 76 more rows"
  },
  {
    "objectID": "slides/5-toolbox_o.html#visualising-forecasts-1",
    "href": "slides/5-toolbox_o.html#visualising-forecasts-1",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Visualising forecasts",
    "text": "Visualising forecasts\n\nbrick_fc |&gt;\n  autoplot(aus_production, level = NULL) +\n  labs(title = \"Clay brick production in Australia\",\n       y = \"Millions of bricks\") +\n  guides(colour = guide_legend(title = \"Forecast\"))"
  },
  {
    "objectID": "slides/5-toolbox_o.html#facebook-closing-stock-price",
    "href": "slides/5-toolbox_o.html#facebook-closing-stock-price",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Facebook closing stock price",
    "text": "Facebook closing stock price\n\nCodePlot\n\n\n\n# Extract training data\nfb_stock &lt;- gafa_stock |&gt;\n  filter(Symbol == \"FB\") |&gt;\n  mutate(trading_day = row_number()) |&gt;\n  update_tsibble(index=trading_day, regular=TRUE)\n\n# Specify, estimate and forecast\nfb_stock |&gt;\n  model(\n    Mean = MEAN(Close),\n    Naive = NAIVE(Close),\n    Drift = RW(Close ~ drift())\n  ) |&gt;\n  forecast(h=42) |&gt;\n  autoplot(fb_stock, level = NULL) +\n  labs(title = \"Facebook closing stock price\", y=\"$US\") +\n  guides(colour=guide_legend(title=\"Forecast\"))"
  },
  {
    "objectID": "slides/5-toolbox_o.html#your-turn",
    "href": "slides/5-toolbox_o.html#your-turn",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Your turn",
    "text": "Your turn\n\nProduce forecasts using an appropriate benchmark method for household wealth (hh_budget). Plot the results using autoplot().\nProduce forecasts using an appropriate benchmark method for Australian takeaway food turnover (aus_retail). Plot the results using autoplot()."
  },
  {
    "objectID": "slides/5-toolbox_o.html#fitted-values",
    "href": "slides/5-toolbox_o.html#fitted-values",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Fitted values",
    "text": "Fitted values\n\n\\(\\hat{y}_{t|t-1}\\) is the forecast of \\(y_t\\) based on observations \\(y_1,\\dots,y_{t-1}\\).\nWe call these “fitted values”.\nSometimes drop the subscript: \\(\\hat{y}_t \\equiv \\hat{y}_{t|t-1}\\).\nOften not true forecasts since parameters are estimated on all data.\n\n. . .\nFor example:\n\n\\(\\hat{y}_{t} = \\bar{y}\\) for average method.\n\\(\\hat{y}_{t} = y_{t-1} + (y_{T}-y_1)/(T-1)\\) for drift method."
  },
  {
    "objectID": "slides/5-toolbox_o.html#forecasting-residuals",
    "href": "slides/5-toolbox_o.html#forecasting-residuals",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Forecasting residuals",
    "text": "Forecasting residuals\nResiduals in forecasting: difference between observed value and its fitted value: \\(e_t = y_t-\\hat{y}_{t|t-1}\\).\n. . .\nAssumptions\n\n\\(\\{e_t\\}\\) uncorrelated. If they aren’t, then information left in residuals that should be used in computing forecasts.\n\\(\\{e_t\\}\\) have mean zero. If they don’t, then forecasts are biased.\n\n. . .\nUseful properties (for distributions & prediction intervals)\n\n\\(\\{e_t\\}\\) have constant variance.\n\\(\\{e_t\\}\\) are normally distributed."
  },
  {
    "objectID": "slides/5-toolbox_o.html#facebook-closing-stock-price-1",
    "href": "slides/5-toolbox_o.html#facebook-closing-stock-price-1",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Facebook closing stock price",
    "text": "Facebook closing stock price\n\nfb_stock |&gt; autoplot(Close)"
  },
  {
    "objectID": "slides/5-toolbox_o.html#facebook-closing-stock-price-2",
    "href": "slides/5-toolbox_o.html#facebook-closing-stock-price-2",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Facebook closing stock price",
    "text": "Facebook closing stock price\n\nfit &lt;- fb_stock |&gt; model(NAIVE(Close))\naugment(fit) |&gt; head(5)\n\n# A tsibble: 5 x 7 [1]\n# Key:       Symbol, .model [1]\n  Symbol .model       trading_day Close .fitted .resid .innov\n  &lt;chr&gt;  &lt;chr&gt;              &lt;int&gt; &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;\n1 FB     NAIVE(Close)           1  54.7    NA   NA     NA    \n2 FB     NAIVE(Close)           2  54.6    54.7 -0.150 -0.150\n3 FB     NAIVE(Close)           3  57.2    54.6  2.64   2.64 \n4 FB     NAIVE(Close)           4  57.9    57.2  0.720  0.720\n5 FB     NAIVE(Close)           5  58.2    57.9  0.310  0.310\n\n\n. . .\nNaive forecasts:\n\\(\\hat{y}_{t|t-1} = y_{t-1}\\)\n\\(e_t  = y_t - \\hat{y}_{t|t-1} = y_t-y_{t-1}\\)\nWhere .fitted = \\(\\hat{y}_{t|t-1}\\) and .resid = \\(\\phantom{\\hat{y}_{|}}{e}_{t}\\phantom{\\hat{y}_{|}}\\)"
  },
  {
    "objectID": "slides/5-toolbox_o.html#facebook-closing-stock-price-3",
    "href": "slides/5-toolbox_o.html#facebook-closing-stock-price-3",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Facebook closing stock price",
    "text": "Facebook closing stock price\n\naugment(fit) |&gt;\n  ggplot(aes(x = trading_day)) +\n  geom_line(aes(y = Close, colour = \"Data\")) +\n  geom_line(aes(y = .fitted, colour = \"Fitted\"))"
  },
  {
    "objectID": "slides/5-toolbox_o.html#facebook-closing-stock-price-4",
    "href": "slides/5-toolbox_o.html#facebook-closing-stock-price-4",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Facebook closing stock price",
    "text": "Facebook closing stock price\n\naugment(fit) |&gt;\n  filter(trading_day &gt; 1100) |&gt;\n  ggplot(aes(x = trading_day)) +\n  geom_line(aes(y = Close, colour = \"Data\")) +\n  geom_line(aes(y = .fitted, colour = \"Fitted\"))"
  },
  {
    "objectID": "slides/5-toolbox_o.html#facebook-closing-stock-price-5",
    "href": "slides/5-toolbox_o.html#facebook-closing-stock-price-5",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Facebook closing stock price",
    "text": "Facebook closing stock price\n\naugment(fit) |&gt;\n  autoplot(.resid) +\n  labs(y = \"$US\",\n       title = \"Residuals from naïve method\")"
  },
  {
    "objectID": "slides/5-toolbox_o.html#facebook-closing-stock-price-6",
    "href": "slides/5-toolbox_o.html#facebook-closing-stock-price-6",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Facebook closing stock price",
    "text": "Facebook closing stock price\n\naugment(fit) |&gt;\n  ggplot(aes(x = .resid)) +\n  geom_histogram(bins = 150) +\n  labs(title = \"Histogram of residuals\")"
  },
  {
    "objectID": "slides/5-toolbox_o.html#facebook-closing-stock-price-7",
    "href": "slides/5-toolbox_o.html#facebook-closing-stock-price-7",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Facebook closing stock price",
    "text": "Facebook closing stock price\n\naugment(fit) |&gt;\n  ACF(.resid) |&gt;\n  autoplot() + labs(title = \"ACF of residuals\")"
  },
  {
    "objectID": "slides/5-toolbox_o.html#gg_tsresiduals-function",
    "href": "slides/5-toolbox_o.html#gg_tsresiduals-function",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "gg_tsresiduals() function",
    "text": "gg_tsresiduals() function\n\ngg_tsresiduals(fit)"
  },
  {
    "objectID": "slides/5-toolbox_o.html#acf-of-residuals",
    "href": "slides/5-toolbox_o.html#acf-of-residuals",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "ACF of residuals",
    "text": "ACF of residuals\n\nWe assume that the residuals are white noise (uncorrelated, mean zero, constant variance). If they aren’t, then there is information left in the residuals that should be used in computing forecasts.\nSo a standard residual diagnostic is to check the ACF of the residuals of a forecasting method.\nWe expect these to look like white noise."
  },
  {
    "objectID": "slides/5-toolbox_o.html#portmanteau-tests-box-pierce-test",
    "href": "slides/5-toolbox_o.html#portmanteau-tests-box-pierce-test",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Portmanteau tests: Box-Pierce test",
    "text": "Portmanteau tests: Box-Pierce test\n\\(r_k =\\) autocorrelation of residual at lag \\(k\\)\n. . .\nConsider a whole set of \\(r_{k}\\) values, and develop a test to see whether the set is significantly different from a zero set.\nBox-Pierce test \\[Q = T \\sum_{k=1}^\\ell r_k^2\\] where \\(\\ell\\) is max lag being considered and \\(T\\) is number of observations.\n\nIf each \\(r_k\\) close to zero, \\(Q\\) will be small.\nIf some \\(r_k\\) values large (positive or negative), \\(Q\\) will be large."
  },
  {
    "objectID": "slides/5-toolbox_o.html#portmanteau-tests-ljung-box-test-more-accurate-12",
    "href": "slides/5-toolbox_o.html#portmanteau-tests-ljung-box-test-more-accurate-12",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Portmanteau tests: Ljung-Box test (more accurate) (1/2)",
    "text": "Portmanteau tests: Ljung-Box test (more accurate) (1/2)\n\\(r_k =\\) autocorrelation of residual at lag \\(k\\)\n. . .\nConsider a whole set of \\(r_{k}\\) values, and develop a test to see whether the set is significantly different from a zero set.\nLjung-Box test \\[Q^* = T(T+2) \\sum_{k=1}^\\ell (T-k)^{-1}r_k^2\\]$ where \\(\\ell\\) is max lag being considered and \\(T\\) is number of observations."
  },
  {
    "objectID": "slides/5-toolbox_o.html#portmanteau-tests-ljung-box-test-more-accurate-22",
    "href": "slides/5-toolbox_o.html#portmanteau-tests-ljung-box-test-more-accurate-22",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Portmanteau tests: Ljung-Box test (more accurate) (2/2)",
    "text": "Portmanteau tests: Ljung-Box test (more accurate) (2/2)\n\nIf each \\(r_k\\) close to zero, \\(Q^*\\) will be small.\nIf some \\(r_k\\) values large (positive or negative), \\(Q\\) will be large.\nUse \\(\\ell=10\\) for non-seasonal data, \\(\\ell=2m\\) for seasonal data (where \\(m\\) is seasonal period).\nBetter performance, especially in small samples. Test is not good when \\(\\ell\\) is large, so if these values are larger than \\(T/5\\), then use \\(\\ell=T/5\\)\nHow large is too large?"
  },
  {
    "objectID": "slides/5-toolbox_o.html#portmanteau-tests",
    "href": "slides/5-toolbox_o.html#portmanteau-tests",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Portmanteau tests",
    "text": "Portmanteau tests\n\nIf data are WN, \\(Q\\) and \\(Q^*\\) have \\(\\chi^2\\) distribution with \\(\\ell\\) degrees of freedom.\nlag \\(= \\ell\\)\n\n. . .\n\naugment(fit) |&gt;\n  features(.resid, box_pierce, lag=10)\n\n# A tibble: 1 × 4\n  Symbol .model       bp_stat bp_pvalue\n  &lt;chr&gt;  &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;\n1 FB     NAIVE(Close)    12.1     0.281\n\n\n. . .\n\naugment(fit) |&gt;\n  features(.resid, ljung_box, lag=10)\n\n# A tibble: 1 × 4\n  Symbol .model       lb_stat lb_pvalue\n  &lt;chr&gt;  &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;\n1 FB     NAIVE(Close)    12.1     0.276"
  },
  {
    "objectID": "slides/5-toolbox_o.html#forecast-distributions",
    "href": "slides/5-toolbox_o.html#forecast-distributions",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Forecast distributions",
    "text": "Forecast distributions\n\nA forecast \\(\\hat{y}_{T+h|T}\\) is (usually) the mean of the conditional distribution \\(y_{T+h} \\mid y_1, \\dots, y_{T}\\).\nMost time series models produce normally distributed forecasts.\nThe forecast distribution describes the probability of observing any future value."
  },
  {
    "objectID": "slides/5-toolbox_o.html#forecast-distributions-1",
    "href": "slides/5-toolbox_o.html#forecast-distributions-1",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Forecast distributions",
    "text": "Forecast distributions\nAssuming residuals are normal, uncorrelated, sd = \\(\\hat\\sigma\\):\n. . .\n\n\n\n\n\n\n\nMethod\nForecast Distribution\n\n\n\n\nMean:\n\\(y_{T+h\\|T} \\sim N(\\bar{y}, (1 + 1/T)\\hat{\\sigma}^2)\\)\n\n\nNaïve:\n\\(y_{T+h\\|T} \\sim N(y_T, h\\hat{\\sigma}^2)\\)\n\n\nSeasonal naïve:\n\\(y_{T+h\\|T} \\sim N(y_{T+h-m(k+1)}, (k+1)\\hat{\\sigma}^2)\\)\n\n\nDrift:\n\\(y_{T+h\\|T} \\sim N(y_T + \\frac{h}{T-1}(y_T - y_1),h\\frac{T+h}{T}\\hat{\\sigma}^2)\\)\n\n\n\nwhere \\(k\\) is the integer part of \\((h-1)/m\\).\n. . .\n\n\n\n\n\n\nNote\n\n\n\nWhen \\(h=1\\) and \\(T\\) is large, these all give the same approximate forecast variance: \\(\\hat{\\sigma}^2\\)."
  },
  {
    "objectID": "slides/5-toolbox_o.html#prediction-intervals",
    "href": "slides/5-toolbox_o.html#prediction-intervals",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Prediction intervals",
    "text": "Prediction intervals\n\nA prediction interval gives a region within which we expect \\(y_{T+h}\\) to lie with a specified probability.\nAssuming forecast errors are normally distributed, then a 95% PI is\n\n. . .\n\\[\\hat{y}_{T+h|T} \\pm 1.96 \\hat\\sigma_h\\]\nwhere \\(\\hat\\sigma_h\\) is the st dev of the \\(h\\)-step distribution.\n. . .\n\n\n\n\n\n\nNote\n\n\n\nWhen \\(h=1\\), \\(\\hat\\sigma_h\\) can be estimated from the residuals."
  },
  {
    "objectID": "slides/5-toolbox_o.html#prediction-intervals-1",
    "href": "slides/5-toolbox_o.html#prediction-intervals-1",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Prediction intervals",
    "text": "Prediction intervals\n\nbrick_fc |&gt; hilo(level = 95)\n\n# A tsibble: 80 x 5 [1Q]\n# Key:       .model [4]\n   .model  Quarter       Bricks .mean\n   &lt;chr&gt;     &lt;qtr&gt;       &lt;dist&gt; &lt;dbl&gt;\n 1 Season… 2005 Q3 N(428, 2336)   428\n 2 Season… 2005 Q4 N(397, 2336)   397\n 3 Season… 2006 Q1 N(355, 2336)   355\n 4 Season… 2006 Q2 N(435, 2336)   435\n 5 Season… 2006 Q3 N(428, 4672)   428\n 6 Season… 2006 Q4 N(397, 4672)   397\n 7 Season… 2007 Q1 N(355, 4672)   355\n 8 Season… 2007 Q2 N(435, 4672)   435\n 9 Season… 2007 Q3 N(428, 7008)   428\n10 Season… 2007 Q4 N(397, 7008)   397\n# ℹ 70 more rows\n# ℹ 1 more variable: `95%` &lt;hilo&gt;"
  },
  {
    "objectID": "slides/5-toolbox_o.html#prediction-intervals-2",
    "href": "slides/5-toolbox_o.html#prediction-intervals-2",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Prediction intervals",
    "text": "Prediction intervals\n\nPoint forecasts often useless without a measure of uncertainty (such as prediction intervals).\nPrediction intervals require a stochastic model (with random errors, etc).\nFor most models, prediction intervals get wider as the forecast horizon increases.\nUse level argument to control coverage.\nCheck residual assumptions before believing them.\nUsually too narrow due to unaccounted uncertainty."
  },
  {
    "objectID": "slides/5-toolbox_o.html#modelling-with-transformations",
    "href": "slides/5-toolbox_o.html#modelling-with-transformations",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Modelling with transformations",
    "text": "Modelling with transformations\n\neggs &lt;- prices |&gt;\n  filter(!is.na(eggs)) |&gt; select(eggs)\neggs |&gt; autoplot() +\n  labs(title=\"Annual egg prices\",\n       y=\"$US (adjusted for inflation)\")"
  },
  {
    "objectID": "slides/5-toolbox_o.html#modelling-with-transformations-1",
    "href": "slides/5-toolbox_o.html#modelling-with-transformations-1",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Modelling with transformations",
    "text": "Modelling with transformations\nTransformations used in the left of the formula will be automatically back-transformed. To model log-transformed egg prices, you could use:\n\nfit &lt;- eggs |&gt;\n  model(RW(log(eggs) ~ drift()))\nfit\n\n# A mable: 1 x 1\n  `RW(log(eggs) ~ drift())`\n                    &lt;model&gt;\n1             &lt;RW w/ drift&gt;"
  },
  {
    "objectID": "slides/5-toolbox_o.html#forecasting-with-transformations-1",
    "href": "slides/5-toolbox_o.html#forecasting-with-transformations-1",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Forecasting with transformations",
    "text": "Forecasting with transformations\n\nfc &lt;- fit |&gt;\n  forecast(h = 50)\nfc\n\n# A fable: 50 x 4 [1Y]\n# Key:     .model [1]\n   .model                   year             eggs .mean\n   &lt;chr&gt;                   &lt;dbl&gt;           &lt;dist&gt; &lt;dbl&gt;\n 1 RW(log(eggs) ~ drift())  1994 t(N(4.1, 0.018))  61.8\n 2 RW(log(eggs) ~ drift())  1995 t(N(4.1, 0.036))  61.4\n 3 RW(log(eggs) ~ drift())  1996 t(N(4.1, 0.055))  61.0\n 4 RW(log(eggs) ~ drift())  1997 t(N(4.1, 0.074))  60.6\n 5 RW(log(eggs) ~ drift())  1998 t(N(4.1, 0.093))  60.2\n 6 RW(log(eggs) ~ drift())  1999    t(N(4, 0.11))  59.8\n 7 RW(log(eggs) ~ drift())  2000    t(N(4, 0.13))  59.4\n 8 RW(log(eggs) ~ drift())  2001    t(N(4, 0.15))  59.0\n 9 RW(log(eggs) ~ drift())  2002    t(N(4, 0.18))  58.6\n10 RW(log(eggs) ~ drift())  2003     t(N(4, 0.2))  58.3\n# ℹ 40 more rows"
  },
  {
    "objectID": "slides/5-toolbox_o.html#forecasting-with-transformations-2",
    "href": "slides/5-toolbox_o.html#forecasting-with-transformations-2",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Forecasting with transformations",
    "text": "Forecasting with transformations\n\nfc |&gt; autoplot(eggs) +\n  labs(title=\"Annual egg prices\",\n       y=\"US$ (adjusted for inflation)\")"
  },
  {
    "objectID": "slides/5-toolbox_o.html#bias-adjustment",
    "href": "slides/5-toolbox_o.html#bias-adjustment",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Bias adjustment",
    "text": "Bias adjustment\n\nBack-transformed point forecasts are medians.\nBack-transformed PI have the correct coverage.\n\n. . .\nBack-transformed means (if you are math inclined)\nLet \\(X\\) be have mean \\(\\mu\\) and variance \\(\\sigma^2\\).\nLet \\(f(x)\\) be back-transformation function, and \\(Y=f(X)\\).\nTaylor series expansion about \\(\\mu\\): \\[f(X) = f(\\mu) + (X-\\mu)f'(\\mu) + \\frac{1}{2}(X-\\mu)^2f''(\\mu).\\]\n\n\n\n\n\n\nNote\n\n\n\n\\(E[Y] = E[f(X)] = f(\\mu) + \\frac12 \\sigma^2 f''(\\mu)\\)"
  },
  {
    "objectID": "slides/5-toolbox_o.html#bias-adjustment-1",
    "href": "slides/5-toolbox_o.html#bias-adjustment-1",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Bias adjustment",
    "text": "Bias adjustment\nBox-Cox back-transformation (if math inclined): \\[\\begin{align*}\ny_t &= \\left\\{\\begin{array}{ll}\n        \\exp(w_t)      & \\quad \\lambda = 0; \\\\\n        (\\lambda W_t+1)^{1/\\lambda}  & \\quad \\lambda \\ne 0.\n\\end{array}\\right. \\\\\nf(x) &= \\begin{cases}\n                        e^x & \\quad\\lambda=0;\\\\\n(\\lambda x + 1)^{1/\\lambda} & \\quad\\lambda\\ne0.\n\\end{cases}\\\\\nf''(x) &= \\begin{cases}\n                        e^x & \\quad\\lambda=0;\\\\\n(1-\\lambda)(\\lambda x + 1)^{1/\\lambda-2} & \\quad\\lambda\\ne0.\n\\end{cases}\n\\end{align*}\\]\n\n\n\n\n\n\nNote\n\n\n\n\\(E[Y] = \\begin{cases}\n                        e^\\mu\\left[1+\\frac{\\sigma^2}{2}\\right] & \\quad\\lambda=0;\\\\\n(\\lambda \\mu + 1)^{1/\\lambda}\\left[1+\\frac{\\sigma^2(1-\\lambda)}{2(\\lambda\\mu+1)^2}\\right] & \\quad\\lambda\\ne0.\n\\end{cases}\\)"
  },
  {
    "objectID": "slides/5-toolbox_o.html#bias-adjustment-2",
    "href": "slides/5-toolbox_o.html#bias-adjustment-2",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Bias adjustment",
    "text": "Bias adjustment\n\nfc |&gt;\n  autoplot(eggs, level = 80, point_forecast = lst(mean, median)) +\n  labs(title=\"Annual egg prices\",\n       y=\"US$ (adjusted for inflation)\")"
  },
  {
    "objectID": "slides/5-toolbox_o.html#forecasting-and-decomposition-1",
    "href": "slides/5-toolbox_o.html#forecasting-and-decomposition-1",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Forecasting and decomposition",
    "text": "Forecasting and decomposition\n\\[y_t = \\hat{S}_t + \\hat{A}_t\\]\n\n\\(\\hat{A}_t\\) is seasonally adjusted component\n\\(\\hat{S}_t\\) is seasonal component.\n\nForecast \\(\\hat{S}_t\\) using SNAIVE.\nForecast \\(\\hat{A}_t\\) using non-seasonal time series method.\nCombine forecasts of \\(\\hat{S}_t\\) and \\(\\hat{A}_t\\) to get forecasts of original data."
  },
  {
    "objectID": "slides/5-toolbox_o.html#us-retail-employment",
    "href": "slides/5-toolbox_o.html#us-retail-employment",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "US Retail Employment",
    "text": "US Retail Employment\n\nus_retail_employment &lt;- us_employment |&gt;\n  filter(year(Month) &gt;= 1990, Title == \"Retail Trade\") |&gt;\n  select(-Series_ID)\nus_retail_employment\n\n# A tsibble: 357 x 3 [1M]\n      Month Title        Employed\n      &lt;mth&gt; &lt;chr&gt;           &lt;dbl&gt;\n 1 1990 Jan Retail Trade   13256.\n 2 1990 Feb Retail Trade   12966.\n 3 1990 Mar Retail Trade   12938.\n 4 1990 Apr Retail Trade   13012.\n 5 1990 May Retail Trade   13108.\n 6 1990 Jun Retail Trade   13183.\n 7 1990 Jul Retail Trade   13170.\n 8 1990 Aug Retail Trade   13160.\n 9 1990 Sep Retail Trade   13113.\n10 1990 Oct Retail Trade   13185.\n# ℹ 347 more rows"
  },
  {
    "objectID": "slides/5-toolbox_o.html#us-retail-employment-1",
    "href": "slides/5-toolbox_o.html#us-retail-employment-1",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "US Retail Employment",
    "text": "US Retail Employment\n\ndcmp &lt;- us_retail_employment |&gt;\n  model(STL(Employed)) |&gt;\n  components() |&gt; select(-.model)\ndcmp\n\n# A tsibble: 357 x 6 [1M]\n      Month Employed  trend season_year remainder season_adjust\n      &lt;mth&gt;    &lt;dbl&gt;  &lt;dbl&gt;       &lt;dbl&gt;     &lt;dbl&gt;         &lt;dbl&gt;\n 1 1990 Jan   13256. 13288.      -33.0      0.836        13289.\n 2 1990 Feb   12966. 13269.     -258.     -44.6          13224.\n 3 1990 Mar   12938. 13250.     -290.     -22.1          13228.\n 4 1990 Apr   13012. 13231.     -220.       1.05         13232.\n 5 1990 May   13108. 13211.     -114.      11.3          13223.\n 6 1990 Jun   13183. 13192.      -24.3     15.5          13207.\n 7 1990 Jul   13170. 13172.      -23.2     21.6          13193.\n 8 1990 Aug   13160. 13151.       -9.52    17.8          13169.\n 9 1990 Sep   13113. 13131.      -39.5     22.0          13153.\n10 1990 Oct   13185. 13110.       61.6     13.2          13124.\n# ℹ 347 more rows"
  },
  {
    "objectID": "slides/5-toolbox_o.html#us-retail-employment-2",
    "href": "slides/5-toolbox_o.html#us-retail-employment-2",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "US Retail Employment",
    "text": "US Retail Employment\n\ndcmp_forecast&lt;- dcmp |&gt;\n                model(NAIVE(season_adjust)) |&gt;\n                forecast()\n\n  autoplot(dcmp_forecast,dcmp) +\n  labs(title = \"Naive forecasts of seasonally adjusted data\")"
  },
  {
    "objectID": "slides/5-toolbox_o.html#us-retail-employment-3",
    "href": "slides/5-toolbox_o.html#us-retail-employment-3",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "US Retail Employment",
    "text": "US Retail Employment\n\nus_retail_employment |&gt;\n  model(stlf = decomposition_model(\n    STL(Employed ~ trend(window = 7), robust = TRUE),\n    NAIVE(season_adjust)\n  )) |&gt;\n  forecast() |&gt;\n  autoplot(us_retail_employment)"
  },
  {
    "objectID": "slides/5-toolbox_o.html#decomposition-models",
    "href": "slides/5-toolbox_o.html#decomposition-models",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Decomposition models",
    "text": "Decomposition models\ndecomposition_model() creates a decomposition model\n\nYou must provide a method for forecasting the season_adjust series.\nA seasonal naive method is used by default for the seasonal components.\nThe variances from both the seasonally adjusted and seasonal forecasts are combined."
  },
  {
    "objectID": "slides/5-toolbox_o.html#training-and-test-sets-12",
    "href": "slides/5-toolbox_o.html#training-and-test-sets-12",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Training and test sets (1/2)",
    "text": "Training and test sets (1/2)"
  },
  {
    "objectID": "slides/5-toolbox_o.html#training-and-test-sets-22",
    "href": "slides/5-toolbox_o.html#training-and-test-sets-22",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Training and test sets (2/2)",
    "text": "Training and test sets (2/2)\n\nA model which fits the training data well will not necessarily forecast well.\nA perfect fit can always be obtained by using a model with enough parameters.\nOver-fitting a model to data is just as bad as failing to identify a systematic pattern in the data.\nThe test set must not be used for any aspect of model development or calculation of forecasts.\nForecast accuracy is based only on the test set."
  },
  {
    "objectID": "slides/5-toolbox_o.html#forecast-errors",
    "href": "slides/5-toolbox_o.html#forecast-errors",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Forecast errors",
    "text": "Forecast errors\nForecast “error”: the difference between an observed value and its forecast. \\[\n  e_{T+h} = y_{T+h} - \\hat{y}_{T+h|T},\n\\] where the training data is given by \\(\\{y_1,\\dots,y_T\\}\\)\n\nUnlike residuals, forecast errors on the test set involve multi-step forecasts.\nThese are true forecast errors as the test data is not used in computing \\(\\hat{y}_{T+h|T}\\)."
  },
  {
    "objectID": "slides/5-toolbox_o.html#measures-of-forecast-accuracy",
    "href": "slides/5-toolbox_o.html#measures-of-forecast-accuracy",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Measures of forecast accuracy",
    "text": "Measures of forecast accuracy\n\nCodePlot\n\n\n\ntrain &lt;- aus_production |&gt;\n  filter(between(year(Quarter), 1992, 2007))\nbeer &lt;- aus_production |&gt;\n  filter(year(Quarter) &gt;= 1992)\nbeer_fc_plot &lt;- train |&gt;\n  model(\n    Mean = MEAN(Beer),\n    Naive = NAIVE(Beer),\n    Seasonal_naive = SNAIVE(Beer),\n    Drift = RW(Beer ~ drift())\n  ) |&gt;\n  forecast(h=11) |&gt;\n  autoplot(beer, level = NULL) +\n    labs(title = \"Forecasts for quarterly beer production\",\n         y = \"Megalitres\") +\n    guides(colour=guide_legend(title=\"Forecast\"))\nbeer_fc_plot"
  },
  {
    "objectID": "slides/5-toolbox_o.html#measures-of-forecast-accuracy-1",
    "href": "slides/5-toolbox_o.html#measures-of-forecast-accuracy-1",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Measures of forecast accuracy",
    "text": "Measures of forecast accuracy\n\\(y_{T+h}=  (T+h)\\)th observation, \\(h=1,\\dots,H\\)\n\\(\\hat{y}_{T+h|T}=\\) its forecast based on data up to time \\(T\\).\n\\(e_{T+h} = y_{T+h} - \\hat{y}_{{T+h}|{T}}\\)\n. . .\n\n\n\n\n\n\n\n\nName\nAbb.\nFormula\n\n\n\n\nMean Abosolue Error\nMAE\n\\(\\text{mean}(\\|e_{T+h}\\|)\\)\n\n\nMean Squared Error\nMSE\n\\(\\text{mean}(e_{T+h}^2)\\)\n\n\nRoot MSE\nRMSE\n\\(\\sqrt{\\text{mean}(e_{T+h}^2)\\)\n\n\nMean Absolute Percent Error\nMAPE\n\\(100\\text{mean}(\\|e_{T+h}\\|/ \\|y_{T+h}\\|)\\)\n\n\n\n\nMAE, MSE, RMSE are all scale dependent.\nMAPE is scale independent but is only sensible if \\(y_t\\gg 0\\) for all \\(t\\), and \\(y\\) has a natural zero."
  },
  {
    "objectID": "slides/5-toolbox_o.html#mean-absolute-scaled-error-non-seasonal",
    "href": "slides/5-toolbox_o.html#mean-absolute-scaled-error-non-seasonal",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Mean Absolute Scaled Error (non-seasonal)",
    "text": "Mean Absolute Scaled Error (non-seasonal)\n\\[\n\\text{MASE} = \\text{mean}(|e_{T+h}|/Q)\n\\]\nwhere \\(Q\\) is a stable measure of the scale of the time series \\(\\{y_t\\}\\).\nProposed by Hyndman and Koehler (IJF, 2006).\nFor non-seasonal time series,\n\\[\n  Q = (T-1)^{-1}\\sum_{t=2}^T |y_t-y_{t-1}|\n\\] works well. Then MASE is equivalent to MAE relative to a naïve method."
  },
  {
    "objectID": "slides/5-toolbox_o.html#mean-absolute-scaled-error-seasonal",
    "href": "slides/5-toolbox_o.html#mean-absolute-scaled-error-seasonal",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Mean Absolute Scaled Error (seasonal)",
    "text": "Mean Absolute Scaled Error (seasonal)\n\\[\n\\text{MASE} = \\text{mean}(|e_{T+h}|/Q)\n\\]\nwhere \\(Q\\) is a stable measure of the scale of the time series \\(\\{y_t\\}\\).\nProposed by Hyndman and Koehler (IJF, 2006).\nFor seasonal time series, \\[\n  Q = (T-m)^{-1}\\sum_{t=m+1}^T |y_t-y_{t-m}|\n\\] works well. Then MASE is equivalent to MAE relative to a seasonal naïve method."
  },
  {
    "objectID": "slides/5-toolbox_o.html#measures-of-forecast-accuracy-time-series",
    "href": "slides/5-toolbox_o.html#measures-of-forecast-accuracy-time-series",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Measures of forecast accuracy: Time Series",
    "text": "Measures of forecast accuracy: Time Series\n\nbeer_fc_plot"
  },
  {
    "objectID": "slides/5-toolbox_o.html#measures-of-forecast-accuracy-model-fits",
    "href": "slides/5-toolbox_o.html#measures-of-forecast-accuracy-model-fits",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Measures of forecast accuracy: Model Fits",
    "text": "Measures of forecast accuracy: Model Fits\n\nrecent_production &lt;- aus_production |&gt;\n  filter(year(Quarter) &gt;= 1992)\ntrain &lt;- recent_production |&gt;\n  filter(year(Quarter) &lt;= 2007)\nbeer_fit &lt;- train |&gt;\n  model(\n    Mean = MEAN(Beer),\n    Naive = NAIVE(Beer),\n    Seasonal_naive = SNAIVE(Beer),\n    Drift = RW(Beer ~ drift())\n  )\nbeer_fc &lt;- beer_fit |&gt;\n  forecast(h = 10)"
  },
  {
    "objectID": "slides/5-toolbox_o.html#measures-of-forecast-accuracy-on-training-data-12",
    "href": "slides/5-toolbox_o.html#measures-of-forecast-accuracy-on-training-data-12",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Measures of forecast accuracy: On Training data (1/2)",
    "text": "Measures of forecast accuracy: On Training data (1/2)\n\nSmaller is better\nUse to evaluate models individually (based on training data, overfitting possible)\n\n. . .\n\naccuracy(beer_fit)\n\n# A tibble: 4 × 10\n  .model         .type           ME  RMSE   MAE    MPE  MAPE  MASE RMSSE   ACF1\n  &lt;chr&gt;          &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;\n1 Mean           Training  0         43.6  35.2 -0.937  7.89  2.46  2.60 -0.109\n2 Naive          Training  4.76e- 1  65.3  54.7 -0.916 12.2   3.83  3.89 -0.241\n3 Seasonal_naive Training -2.13e+ 0  16.8  14.3 -0.554  3.31  1     1    -0.288\n4 Drift          Training -5.41e-15  65.3  54.8 -1.03  12.2   3.83  3.89 -0.241"
  },
  {
    "objectID": "slides/5-toolbox_o.html#measures-of-forecast-accuracy-on-training-data-22",
    "href": "slides/5-toolbox_o.html#measures-of-forecast-accuracy-on-training-data-22",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Measures of forecast accuracy: On Training data (2/2)",
    "text": "Measures of forecast accuracy: On Training data (2/2)\n\naccuracy(beer_fit) |&gt;\n  arrange(.model) |&gt; # Sorts model names alphabetically\n  select(.model, .type, RMSE, MAE, MAPE, MASE) #The metrics we defined\n\n# A tibble: 4 × 6\n  .model         .type     RMSE   MAE  MAPE  MASE\n  &lt;chr&gt;          &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n1 Drift          Training  65.3  54.8 12.2   3.83\n2 Mean           Training  43.6  35.2  7.89  2.46\n3 Naive          Training  65.3  54.7 12.2   3.83\n4 Seasonal_naive Training  16.8  14.3  3.31  1"
  },
  {
    "objectID": "slides/5-toolbox_o.html#measures-of-forecast-accuracy-on-testing-data",
    "href": "slides/5-toolbox_o.html#measures-of-forecast-accuracy-on-testing-data",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Measures of forecast accuracy: On Testing data",
    "text": "Measures of forecast accuracy: On Testing data\n\nSmaller is better\nCan be used to compare models and evaluate models individually\nGives a realistic expectation of error if we rebuild model on all data for future forecasts\n\n. . .\n\naccuracy(beer_fc, recent_production) |&gt;\n  arrange(.model) |&gt;\n  select(.model, .type, RMSE, MAE, MAPE, MASE)\n\n# A tibble: 4 × 6\n  .model         .type  RMSE   MAE  MAPE  MASE\n  &lt;chr&gt;          &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n1 Drift          Test   64.9  58.9 14.6  4.12 \n2 Mean           Test   38.4  34.8  8.28 2.44 \n3 Naive          Test   62.7  57.4 14.2  4.01 \n4 Seasonal_naive Test   14.3  13.4  3.17 0.937"
  },
  {
    "objectID": "slides/5-toolbox.html#setup",
    "href": "slides/5-toolbox.html#setup",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Setup",
    "text": "Setup\n\nlibrary(fpp3)"
  },
  {
    "objectID": "slides/5-toolbox.html#a-tidy-forecasting-workflow-1",
    "href": "slides/5-toolbox.html#a-tidy-forecasting-workflow-1",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "A tidy forecasting workflow",
    "text": "A tidy forecasting workflow\nThe process of producing forecasts can be split up into a few fundamental steps.\n\nPreparing data\nData visualization\nSpecifying a model\nModel estimation\nAccuracy & performance evaluation\nProducing forecasts"
  },
  {
    "objectID": "slides/5-toolbox.html#a-tidy-forecasting-workflow-2",
    "href": "slides/5-toolbox.html#a-tidy-forecasting-workflow-2",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "A tidy forecasting workflow",
    "text": "A tidy forecasting workflow"
  },
  {
    "objectID": "slides/5-toolbox.html#data-preparation-tidy",
    "href": "slides/5-toolbox.html#data-preparation-tidy",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Data preparation (tidy)",
    "text": "Data preparation (tidy)\n\ngdppc &lt;- global_economy |&gt;\n  mutate(GDP_per_capita = GDP/Population) |&gt;\n  select(Year, Country, GDP, Population, GDP_per_capita)\ngdppc\n\n# A tsibble: 15,150 x 5 [1Y]\n# Key:       Country [263]\n    Year Country             GDP Population GDP_per_capita\n   &lt;dbl&gt; &lt;fct&gt;             &lt;dbl&gt;      &lt;dbl&gt;          &lt;dbl&gt;\n 1  1960 Afghanistan  537777811.    8996351           59.8\n 2  1961 Afghanistan  548888896.    9166764           59.9\n 3  1962 Afghanistan  546666678.    9345868           58.5\n 4  1963 Afghanistan  751111191.    9533954           78.8\n 5  1964 Afghanistan  800000044.    9731361           82.2\n 6  1965 Afghanistan 1006666638.    9938414          101. \n 7  1966 Afghanistan 1399999967.   10152331          138. \n 8  1967 Afghanistan 1673333418.   10372630          161. \n 9  1968 Afghanistan 1373333367.   10604346          130. \n10  1969 Afghanistan 1408888922.   10854428          130. \n# ℹ 15,140 more rows"
  },
  {
    "objectID": "slides/5-toolbox.html#data-visualisation",
    "href": "slides/5-toolbox.html#data-visualisation",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Data visualisation",
    "text": "Data visualisation\n\ngdppc |&gt;\n  filter(Country==\"Sweden\") |&gt;\n  autoplot(GDP_per_capita) +\n    labs(title = \"GDP per capita for Sweden\", y = \"$US\")"
  },
  {
    "objectID": "slides/5-toolbox.html#model-estimation",
    "href": "slides/5-toolbox.html#model-estimation",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Model estimation",
    "text": "Model estimation\nThe model() function trains models to data.\n\nfit &lt;- gdppc |&gt;\n  model(trend_model = TSLM(GDP_per_capita ~ trend())) # TSLM to be covered later\nfit |&gt; head(5)\n\n# A mable: 5 x 2\n# Key:     Country [5]\n  Country        trend_model\n  &lt;fct&gt;              &lt;model&gt;\n1 Afghanistan         &lt;TSLM&gt;\n2 Albania             &lt;TSLM&gt;\n3 Algeria             &lt;TSLM&gt;\n4 American Samoa      &lt;TSLM&gt;\n5 Andorra             &lt;TSLM&gt;\n\n\n\n\n\n\n\n\nNote\n\n\nA is a model table, each cell corresponds to a fitted model."
  },
  {
    "objectID": "slides/5-toolbox.html#producing-forecasts",
    "href": "slides/5-toolbox.html#producing-forecasts",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Producing forecasts",
    "text": "Producing forecasts\n\nfit |&gt; forecast(h = \"3 years\")\n\n# A fable: 789 x 5 [1Y]\n# Key:     Country, .model [263]\n   Country  .model  Year   GDP_per_capita\n   &lt;fct&gt;    &lt;chr&gt;  &lt;dbl&gt;           &lt;dist&gt;\n 1 Afghani… trend…  2018     N(526, 9653)\n 2 Afghani… trend…  2019     N(534, 9689)\n 3 Afghani… trend…  2020     N(542, 9727)\n 4 Albania  trend…  2018  N(4716, 476419)\n 5 Albania  trend…  2019  N(4867, 481086)\n 6 Albania  trend…  2020  N(5018, 486012)\n 7 Algeria  trend…  2018  N(4410, 643094)\n 8 Algeria  trend…  2019  N(4489, 645311)\n 9 Algeria  trend…  2020  N(4568, 647602)\n10 America… trend…  2018 N(12491, 652926)\n# ℹ 779 more rows\n# ℹ 1 more variable: .mean &lt;dbl&gt;\n\n\n\n\n\n\n\n\nNote\n\n\nA is a forecast table with point forecasts and distributions."
  },
  {
    "objectID": "slides/5-toolbox.html#visualising-forecasts",
    "href": "slides/5-toolbox.html#visualising-forecasts",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Visualising forecasts",
    "text": "Visualising forecasts\n\nfit |&gt; forecast(h = \"3 years\") |&gt;\n  filter(Country==\"Sweden\") |&gt;\n  autoplot(gdppc) +\n    labs(title = \"GDP per capita for Sweden\", y = \"$US\")"
  },
  {
    "objectID": "slides/5-toolbox.html#meany-average-method",
    "href": "slides/5-toolbox.html#meany-average-method",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "MEAN(y): Average method",
    "text": "MEAN(y): Average method\n\nForecast of all future values is equal to mean of historical data \\(\\{y_1,\\dots,y_T\\}\\).\nForecasts: \\(\\hat{y}_{T+h|T} = \\bar{y} = (y_1+\\dots+y_T)/T\\)"
  },
  {
    "objectID": "slides/5-toolbox.html#meany-average-method-plot",
    "href": "slides/5-toolbox.html#meany-average-method-plot",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "MEAN(y): Average method Plot",
    "text": "MEAN(y): Average method Plot\n\nCodePlot\n\n\n\nbricks &lt;- aus_production |&gt;\n  filter(!is.na(Bricks)) |&gt;\n  mutate(average = mean(Bricks))\n\nfc &lt;- bricks |&gt;\n  filter(row_number() == n()) |&gt; as_tibble() |&gt;\n  unnest(Quarter = list(as.Date(Quarter) + months(c(0, 12*5))))\n\nbricks |&gt;\n  ggplot(aes(x = Quarter, y = Bricks)) +\n  geom_line() +\n  geom_line(aes(y = average), colour = \"#0072B2\", linetype = \"dashed\") +\n  geom_line(aes(y = average), data = fc, colour = \"#0072B2\") +\n  labs(title = \"Clay brick production in Australia\")"
  },
  {
    "objectID": "slides/5-toolbox.html#naivey-naïve-method",
    "href": "slides/5-toolbox.html#naivey-naïve-method",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "NAIVE(y): Naïve method",
    "text": "NAIVE(y): Naïve method\n\nForecasts equal to last observed value.\nForecasts: \\(\\hat{y}_{T+h|T} =y_T\\).\nConsequence of efficient market hypothesis.\n\n\n\nCodePlot\n\n\n\nbricks |&gt;\n  filter(!is.na(Bricks)) |&gt;\n  model(NAIVE(Bricks)) |&gt;\n  forecast(h = \"5 years\") |&gt;\n  autoplot(filter(bricks, year(Quarter) &gt; 1990), level = NULL) +\n    geom_point(data = slice(bricks, n()), aes(y=Bricks), colour = \"#0072B2\") +\n    labs(title = \"Clay brick production in Australia\")"
  },
  {
    "objectID": "slides/5-toolbox.html#snaivey-lagm-seasonal-naïve-method",
    "href": "slides/5-toolbox.html#snaivey-lagm-seasonal-naïve-method",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "SNAIVE(y ~ lag(m)): Seasonal naïve method",
    "text": "SNAIVE(y ~ lag(m)): Seasonal naïve method\n\nForecasts equal to last value from same season.\nForecasts: \\(\\hat{y}_{T+h|T} =y_{T+h-m(k+1)}\\), where \\(m=\\) seasonal period and \\(k\\) is the integer part of \\((h-1)/m\\).\n\n\n\nCodePlot\n\n\n\nbricks |&gt;\n  model(SNAIVE(Bricks ~ lag(\"year\"))) |&gt;\n  forecast(h = \"5 years\") |&gt;\n  autoplot(filter(bricks, year(Quarter) &gt; 1990), level = NULL) +\n  geom_point(data = slice(bricks, (n()-3):n()), aes(y=Bricks), colour = \"#0072B2\") +\n  labs(title = \"Clay brick production in Australia\")"
  },
  {
    "objectID": "slides/5-toolbox.html#rwy-drift-drift-method",
    "href": "slides/5-toolbox.html#rwy-drift-drift-method",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "RW(y ~ drift()): Drift method",
    "text": "RW(y ~ drift()): Drift method\n\nDefinitionCode & Plot\n\n\n\nForecasts equal to last value plus average change.\nForecasts:\n\n\\[\\begin{align*}\n\\hat{y}_{T+h|T} & =  y_{T} + \\frac{h}{T-1}\\sum_{t=2}^T (y_t-y_{t-1})\\\\\n                 & = y_T + \\frac{h}{T-1}(y_T -y_1).\n\\end{align*}\\]\n\nEquivalent to extrapolating a line drawn between first and last observations.\n\n\n\n\naus_production |&gt;\n  filter(!is.na(Bricks)) |&gt;\n  model(RW(Bricks ~ drift())) |&gt;\n  forecast(h = \"5 years\") |&gt;\n  autoplot(aus_production, level = NULL) +\n  geom_line(data = slice(aus_production, range(cumsum(!is.na(Bricks)))),\n            aes(y=Bricks), linetype = \"dashed\", colour = \"#0072B2\") +\n  labs(title = \"Clay brick production in Australia\")"
  },
  {
    "objectID": "slides/5-toolbox.html#model-fitting",
    "href": "slides/5-toolbox.html#model-fitting",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Model fitting",
    "text": "Model fitting\nThe model() function trains models to data.\n\nbrick_fit &lt;-  aus_production |&gt;\n  filter(!is.na(Bricks)) |&gt;\n  model(\n    Seasonal_naive = SNAIVE(Bricks),\n    Naive = NAIVE(Bricks),\n    Drift = RW(Bricks ~ drift()),\n    Mean = MEAN(Bricks)\n  )\n\n\n\n# A mable: 1 x 4\n  Seasonal_naive   Naive         Drift    Mean\n         &lt;model&gt; &lt;model&gt;       &lt;model&gt; &lt;model&gt;\n1       &lt;SNAIVE&gt; &lt;NAIVE&gt; &lt;RW w/ drift&gt;  &lt;MEAN&gt;"
  },
  {
    "objectID": "slides/5-toolbox.html#producing-forecasts-1",
    "href": "slides/5-toolbox.html#producing-forecasts-1",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Producing forecasts",
    "text": "Producing forecasts\n\nbrick_fc &lt;- brick_fit |&gt;\n  forecast(h = \"5 years\")\n\n\n\n# A fable: 80 x 4 [1Q]\n# Key:     .model [4]\n  .model   Quarter       Bricks .mean\n  &lt;chr&gt;      &lt;qtr&gt;       &lt;dist&gt; &lt;dbl&gt;\n1 Seasona… 2005 Q3 N(428, 2336)   428\n2 Seasona… 2005 Q4 N(397, 2336)   397\n3 Seasona… 2006 Q1 N(355, 2336)   355\n4 Seasona… 2006 Q2 N(435, 2336)   435\n# ℹ 76 more rows"
  },
  {
    "objectID": "slides/5-toolbox.html#visualising-forecasts-1",
    "href": "slides/5-toolbox.html#visualising-forecasts-1",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Visualising forecasts",
    "text": "Visualising forecasts\n\nbrick_fc |&gt;\n  autoplot(aus_production, level = NULL) +\n  labs(title = \"Clay brick production in Australia\",\n       y = \"Millions of bricks\") +\n  guides(colour = guide_legend(title = \"Forecast\"))"
  },
  {
    "objectID": "slides/5-toolbox.html#facebook-closing-stock-price",
    "href": "slides/5-toolbox.html#facebook-closing-stock-price",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Facebook closing stock price",
    "text": "Facebook closing stock price\n\nCodePlot\n\n\n\n# Extract training data\nfb_stock &lt;- gafa_stock |&gt;\n  filter(Symbol == \"FB\") |&gt;\n  mutate(trading_day = row_number()) |&gt;\n  update_tsibble(index=trading_day, regular=TRUE)\n\n# Specify, estimate and forecast\nfb_stock |&gt;\n  model(\n    Mean = MEAN(Close),\n    Naive = NAIVE(Close),\n    Drift = RW(Close ~ drift())\n  ) |&gt;\n  forecast(h=42) |&gt;\n  autoplot(fb_stock, level = NULL) +\n  labs(title = \"Facebook closing stock price\", y=\"$US\") +\n  guides(colour=guide_legend(title=\"Forecast\"))"
  },
  {
    "objectID": "slides/5-toolbox.html#your-turn",
    "href": "slides/5-toolbox.html#your-turn",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Your turn",
    "text": "Your turn\n\nProduce forecasts using an appropriate benchmark method for household wealth (hh_budget). Plot the results using autoplot().\nProduce forecasts using an appropriate benchmark method for Australian takeaway food turnover (aus_retail). Plot the results using autoplot()."
  },
  {
    "objectID": "slides/5-toolbox.html#fitted-values",
    "href": "slides/5-toolbox.html#fitted-values",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Fitted values",
    "text": "Fitted values\n\n\\(\\hat{y}_{t|t-1}\\) is the forecast of \\(y_t\\) based on observations \\(y_1,\\dots,y_{t-1}\\).\nWe call these “fitted values”.\nSometimes drop the subscript: \\(\\hat{y}_t \\equiv \\hat{y}_{t|t-1}\\).\nOften not true forecasts since parameters are estimated on all data.\n\n\nFor example:\n\n\\(\\hat{y}_{t} = \\bar{y}\\) for average method.\n\\(\\hat{y}_{t} = y_{t-1} + (y_{T}-y_1)/(T-1)\\) for drift method."
  },
  {
    "objectID": "slides/5-toolbox.html#forecasting-residuals",
    "href": "slides/5-toolbox.html#forecasting-residuals",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Forecasting residuals",
    "text": "Forecasting residuals\nResiduals in forecasting: difference between observed value and its fitted value: \\(e_t = y_t-\\hat{y}_{t|t-1}\\).\n\nAssumptions\n\n\\(\\{e_t\\}\\) uncorrelated. If they aren’t, then information left in residuals that should be used in computing forecasts.\n\\(\\{e_t\\}\\) have mean zero. If they don’t, then forecasts are biased.\n\n\n\nUseful properties (for distributions & prediction intervals)\n\n\\(\\{e_t\\}\\) have constant variance.\n\\(\\{e_t\\}\\) are normally distributed."
  },
  {
    "objectID": "slides/5-toolbox.html#facebook-closing-stock-price-1",
    "href": "slides/5-toolbox.html#facebook-closing-stock-price-1",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Facebook closing stock price",
    "text": "Facebook closing stock price\n\nfb_stock |&gt; autoplot(Close)"
  },
  {
    "objectID": "slides/5-toolbox.html#facebook-closing-stock-price-2",
    "href": "slides/5-toolbox.html#facebook-closing-stock-price-2",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Facebook closing stock price",
    "text": "Facebook closing stock price\n\nfit &lt;- fb_stock |&gt; model(NAIVE(Close))\naugment(fit) |&gt; head(5)\n\n# A tsibble: 5 x 7 [1]\n# Key:       Symbol, .model [1]\n  Symbol .model       trading_day Close .fitted .resid .innov\n  &lt;chr&gt;  &lt;chr&gt;              &lt;int&gt; &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;\n1 FB     NAIVE(Close)           1  54.7    NA   NA     NA    \n2 FB     NAIVE(Close)           2  54.6    54.7 -0.150 -0.150\n3 FB     NAIVE(Close)           3  57.2    54.6  2.64   2.64 \n4 FB     NAIVE(Close)           4  57.9    57.2  0.720  0.720\n5 FB     NAIVE(Close)           5  58.2    57.9  0.310  0.310\n\n\n\nNaive forecasts:\n\\(\\hat{y}_{t|t-1} = y_{t-1}\\)\n\\(e_t  = y_t - \\hat{y}_{t|t-1} = y_t-y_{t-1}\\)\nWhere .fitted = \\(\\hat{y}_{t|t-1}\\) and .resid = \\(\\phantom{\\hat{y}_{|}}{e}_{t}\\phantom{\\hat{y}_{|}}\\)"
  },
  {
    "objectID": "slides/5-toolbox.html#facebook-closing-stock-price-3",
    "href": "slides/5-toolbox.html#facebook-closing-stock-price-3",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Facebook closing stock price",
    "text": "Facebook closing stock price\n\naugment(fit) |&gt;\n  ggplot(aes(x = trading_day)) +\n  geom_line(aes(y = Close, colour = \"Data\")) +\n  geom_line(aes(y = .fitted, colour = \"Fitted\"))"
  },
  {
    "objectID": "slides/5-toolbox.html#facebook-closing-stock-price-4",
    "href": "slides/5-toolbox.html#facebook-closing-stock-price-4",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Facebook closing stock price",
    "text": "Facebook closing stock price\n\naugment(fit) |&gt;\n  filter(trading_day &gt; 1100) |&gt;\n  ggplot(aes(x = trading_day)) +\n  geom_line(aes(y = Close, colour = \"Data\")) +\n  geom_line(aes(y = .fitted, colour = \"Fitted\"))"
  },
  {
    "objectID": "slides/5-toolbox.html#facebook-closing-stock-price-5",
    "href": "slides/5-toolbox.html#facebook-closing-stock-price-5",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Facebook closing stock price",
    "text": "Facebook closing stock price\n\naugment(fit) |&gt;\n  autoplot(.resid) +\n  labs(y = \"$US\",\n       title = \"Residuals from naïve method\")"
  },
  {
    "objectID": "slides/5-toolbox.html#facebook-closing-stock-price-6",
    "href": "slides/5-toolbox.html#facebook-closing-stock-price-6",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Facebook closing stock price",
    "text": "Facebook closing stock price\n\naugment(fit) |&gt;\n  ggplot(aes(x = .resid)) +\n  geom_histogram(bins = 150) +\n  labs(title = \"Histogram of residuals\")"
  },
  {
    "objectID": "slides/5-toolbox.html#facebook-closing-stock-price-7",
    "href": "slides/5-toolbox.html#facebook-closing-stock-price-7",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Facebook closing stock price",
    "text": "Facebook closing stock price\n\naugment(fit) |&gt;\n  ACF(.resid) |&gt;\n  autoplot() + labs(title = \"ACF of residuals\")"
  },
  {
    "objectID": "slides/5-toolbox.html#gg_tsresiduals-function",
    "href": "slides/5-toolbox.html#gg_tsresiduals-function",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "gg_tsresiduals() function",
    "text": "gg_tsresiduals() function\n\ngg_tsresiduals(fit)"
  },
  {
    "objectID": "slides/5-toolbox.html#acf-of-residuals",
    "href": "slides/5-toolbox.html#acf-of-residuals",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "ACF of residuals",
    "text": "ACF of residuals\n\nWe assume that the residuals are white noise (uncorrelated, mean zero, constant variance). If they aren’t, then there is information left in the residuals that should be used in computing forecasts.\nSo a standard residual diagnostic is to check the ACF of the residuals of a forecasting method.\nWe expect these to look like white noise."
  },
  {
    "objectID": "slides/5-toolbox.html#portmanteau-tests-box-pierce-test",
    "href": "slides/5-toolbox.html#portmanteau-tests-box-pierce-test",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Portmanteau tests: Box-Pierce test",
    "text": "Portmanteau tests: Box-Pierce test\n\\(r_k =\\) autocorrelation of residual at lag \\(k\\)\n\nConsider a whole set of \\(r_{k}\\) values, and develop a test to see whether the set is significantly different from a zero set.\nBox-Pierce test \\[Q = T \\sum_{k=1}^\\ell r_k^2\\] where \\(\\ell\\) is max lag being considered and \\(T\\) is number of observations.\n\nIf each \\(r_k\\) close to zero, \\(Q\\) will be small.\nIf some \\(r_k\\) values large (positive or negative), \\(Q\\) will be large."
  },
  {
    "objectID": "slides/5-toolbox.html#portmanteau-tests-ljung-box-test-more-accurate-12",
    "href": "slides/5-toolbox.html#portmanteau-tests-ljung-box-test-more-accurate-12",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Portmanteau tests: Ljung-Box test (more accurate) (1/2)",
    "text": "Portmanteau tests: Ljung-Box test (more accurate) (1/2)\n\\(r_k =\\) autocorrelation of residual at lag \\(k\\)\n\nConsider a whole set of \\(r_{k}\\) values, and develop a test to see whether the set is significantly different from a zero set.\nLjung-Box test \\[Q^* = T(T+2) \\sum_{k=1}^\\ell (T-k)^{-1}r_k^2\\]$ where \\(\\ell\\) is max lag being considered and \\(T\\) is number of observations."
  },
  {
    "objectID": "slides/5-toolbox.html#portmanteau-tests-ljung-box-test-more-accurate-22",
    "href": "slides/5-toolbox.html#portmanteau-tests-ljung-box-test-more-accurate-22",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Portmanteau tests: Ljung-Box test (more accurate) (2/2)",
    "text": "Portmanteau tests: Ljung-Box test (more accurate) (2/2)\n\nIf each \\(r_k\\) close to zero, \\(Q^*\\) will be small.\nIf some \\(r_k\\) values large (positive or negative), \\(Q\\) will be large.\nUse \\(\\ell=10\\) for non-seasonal data, \\(\\ell=2m\\) for seasonal data (where \\(m\\) is seasonal period).\nBetter performance, especially in small samples. Test is not good when \\(\\ell\\) is large, so if these values are larger than \\(T/5\\), then use \\(\\ell=T/5\\)\nHow large is too large?"
  },
  {
    "objectID": "slides/5-toolbox.html#portmanteau-tests",
    "href": "slides/5-toolbox.html#portmanteau-tests",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Portmanteau tests",
    "text": "Portmanteau tests\n\nIf data are WN, \\(Q\\) and \\(Q^*\\) have \\(\\chi^2\\) distribution with \\(\\ell\\) degrees of freedom.\nlag \\(= \\ell\\)\n\n\n\naugment(fit) |&gt;\n  features(.resid, box_pierce, lag=10)\n\n# A tibble: 1 × 4\n  Symbol .model       bp_stat bp_pvalue\n  &lt;chr&gt;  &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;\n1 FB     NAIVE(Close)    12.1     0.281\n\n\n\n\n\naugment(fit) |&gt;\n  features(.resid, ljung_box, lag=10)\n\n# A tibble: 1 × 4\n  Symbol .model       lb_stat lb_pvalue\n  &lt;chr&gt;  &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;\n1 FB     NAIVE(Close)    12.1     0.276"
  },
  {
    "objectID": "slides/5-toolbox.html#forecast-distributions",
    "href": "slides/5-toolbox.html#forecast-distributions",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Forecast distributions",
    "text": "Forecast distributions\n\nA forecast \\(\\hat{y}_{T+h|T}\\) is (usually) the mean of the conditional distribution \\(y_{T+h} \\mid y_1, \\dots, y_{T}\\).\nMost time series models produce normally distributed forecasts.\nThe forecast distribution describes the probability of observing any future value."
  },
  {
    "objectID": "slides/5-toolbox.html#forecast-distributions-1",
    "href": "slides/5-toolbox.html#forecast-distributions-1",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Forecast distributions",
    "text": "Forecast distributions\nAssuming residuals are normal, uncorrelated, sd = \\(\\hat\\sigma\\):\n\n\n\n\n\n\n\n\nMethod\nForecast Distribution\n\n\n\n\nMean:\n\\(y_{T+h\\|T} \\sim N(\\bar{y}, (1 + 1/T)\\hat{\\sigma}^2)\\)\n\n\nNaïve:\n\\(y_{T+h\\|T} \\sim N(y_T, h\\hat{\\sigma}^2)\\)\n\n\nSeasonal naïve:\n\\(y_{T+h\\|T} \\sim N(y_{T+h-m(k+1)}, (k+1)\\hat{\\sigma}^2)\\)\n\n\nDrift:\n\\(y_{T+h\\|T} \\sim N(y_T + \\frac{h}{T-1}(y_T - y_1),h\\frac{T+h}{T}\\hat{\\sigma}^2)\\)\n\n\n\nwhere \\(k\\) is the integer part of \\((h-1)/m\\).\n\n\n\n\n\n\n\n\nNote\n\n\nWhen \\(h=1\\) and \\(T\\) is large, these all give the same approximate forecast variance: \\(\\hat{\\sigma}^2\\)."
  },
  {
    "objectID": "slides/5-toolbox.html#prediction-intervals",
    "href": "slides/5-toolbox.html#prediction-intervals",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Prediction intervals",
    "text": "Prediction intervals\n\nA prediction interval gives a region within which we expect \\(y_{T+h}\\) to lie with a specified probability.\nAssuming forecast errors are normally distributed, then a 95% PI is\n\n\n\\[\\hat{y}_{T+h|T} \\pm 1.96 \\hat\\sigma_h\\]\nwhere \\(\\hat\\sigma_h\\) is the st dev of the \\(h\\)-step distribution.\n\n\n\n\n\n\n\n\nNote\n\n\nWhen \\(h=1\\), \\(\\hat\\sigma_h\\) can be estimated from the residuals."
  },
  {
    "objectID": "slides/5-toolbox.html#prediction-intervals-1",
    "href": "slides/5-toolbox.html#prediction-intervals-1",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Prediction intervals",
    "text": "Prediction intervals\n\nbrick_fc |&gt; hilo(level = 95)\n\n# A tsibble: 80 x 5 [1Q]\n# Key:       .model [4]\n   .model  Quarter       Bricks .mean\n   &lt;chr&gt;     &lt;qtr&gt;       &lt;dist&gt; &lt;dbl&gt;\n 1 Season… 2005 Q3 N(428, 2336)   428\n 2 Season… 2005 Q4 N(397, 2336)   397\n 3 Season… 2006 Q1 N(355, 2336)   355\n 4 Season… 2006 Q2 N(435, 2336)   435\n 5 Season… 2006 Q3 N(428, 4672)   428\n 6 Season… 2006 Q4 N(397, 4672)   397\n 7 Season… 2007 Q1 N(355, 4672)   355\n 8 Season… 2007 Q2 N(435, 4672)   435\n 9 Season… 2007 Q3 N(428, 7008)   428\n10 Season… 2007 Q4 N(397, 7008)   397\n# ℹ 70 more rows\n# ℹ 1 more variable: `95%` &lt;hilo&gt;"
  },
  {
    "objectID": "slides/5-toolbox.html#prediction-intervals-2",
    "href": "slides/5-toolbox.html#prediction-intervals-2",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Prediction intervals",
    "text": "Prediction intervals\n\nPoint forecasts often useless without a measure of uncertainty (such as prediction intervals).\nPrediction intervals require a stochastic model (with random errors, etc).\nFor most models, prediction intervals get wider as the forecast horizon increases.\nUse level argument to control coverage.\nCheck residual assumptions before believing them.\nUsually too narrow due to unaccounted uncertainty."
  },
  {
    "objectID": "slides/5-toolbox.html#modelling-with-transformations",
    "href": "slides/5-toolbox.html#modelling-with-transformations",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Modelling with transformations",
    "text": "Modelling with transformations\n\neggs &lt;- prices |&gt;\n  filter(!is.na(eggs)) |&gt; select(eggs)\neggs |&gt; autoplot() +\n  labs(title=\"Annual egg prices\",\n       y=\"$US (adjusted for inflation)\")"
  },
  {
    "objectID": "slides/5-toolbox.html#modelling-with-transformations-1",
    "href": "slides/5-toolbox.html#modelling-with-transformations-1",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Modelling with transformations",
    "text": "Modelling with transformations\nTransformations used in the left of the formula will be automatically back-transformed. To model log-transformed egg prices, you could use:\n\nfit &lt;- eggs |&gt;\n  model(RW(log(eggs) ~ drift()))\nfit\n\n# A mable: 1 x 1\n  `RW(log(eggs) ~ drift())`\n                    &lt;model&gt;\n1             &lt;RW w/ drift&gt;"
  },
  {
    "objectID": "slides/5-toolbox.html#forecasting-with-transformations-1",
    "href": "slides/5-toolbox.html#forecasting-with-transformations-1",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Forecasting with transformations",
    "text": "Forecasting with transformations\n\nfc &lt;- fit |&gt;\n  forecast(h = 50)\nfc\n\n# A fable: 50 x 4 [1Y]\n# Key:     .model [1]\n   .model                   year             eggs .mean\n   &lt;chr&gt;                   &lt;dbl&gt;           &lt;dist&gt; &lt;dbl&gt;\n 1 RW(log(eggs) ~ drift())  1994 t(N(4.1, 0.018))  61.8\n 2 RW(log(eggs) ~ drift())  1995 t(N(4.1, 0.036))  61.4\n 3 RW(log(eggs) ~ drift())  1996 t(N(4.1, 0.055))  61.0\n 4 RW(log(eggs) ~ drift())  1997 t(N(4.1, 0.074))  60.6\n 5 RW(log(eggs) ~ drift())  1998 t(N(4.1, 0.093))  60.2\n 6 RW(log(eggs) ~ drift())  1999    t(N(4, 0.11))  59.8\n 7 RW(log(eggs) ~ drift())  2000    t(N(4, 0.13))  59.4\n 8 RW(log(eggs) ~ drift())  2001    t(N(4, 0.15))  59.0\n 9 RW(log(eggs) ~ drift())  2002    t(N(4, 0.18))  58.6\n10 RW(log(eggs) ~ drift())  2003     t(N(4, 0.2))  58.3\n# ℹ 40 more rows"
  },
  {
    "objectID": "slides/5-toolbox.html#forecasting-with-transformations-2",
    "href": "slides/5-toolbox.html#forecasting-with-transformations-2",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Forecasting with transformations",
    "text": "Forecasting with transformations\n\nfc |&gt; autoplot(eggs) +\n  labs(title=\"Annual egg prices\",\n       y=\"US$ (adjusted for inflation)\")"
  },
  {
    "objectID": "slides/5-toolbox.html#bias-adjustment",
    "href": "slides/5-toolbox.html#bias-adjustment",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Bias adjustment",
    "text": "Bias adjustment\n\nBack-transformed point forecasts are medians.\nBack-transformed PI have the correct coverage.\n\n\nBack-transformed means (if you are math inclined)\nLet \\(X\\) be have mean \\(\\mu\\) and variance \\(\\sigma^2\\).\nLet \\(f(x)\\) be back-transformation function, and \\(Y=f(X)\\).\nTaylor series expansion about \\(\\mu\\): \\[f(X) = f(\\mu) + (X-\\mu)f'(\\mu) + \\frac{1}{2}(X-\\mu)^2f''(\\mu).\\]\n\n\n\n\n\n\nNote\n\n\n\\(E[Y] = E[f(X)] = f(\\mu) + \\frac12 \\sigma^2 f''(\\mu)\\)"
  },
  {
    "objectID": "slides/5-toolbox.html#bias-adjustment-1",
    "href": "slides/5-toolbox.html#bias-adjustment-1",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Bias adjustment",
    "text": "Bias adjustment\nBox-Cox back-transformation (if math inclined): \\[\\begin{align*}\ny_t &= \\left\\{\\begin{array}{ll}\n        \\exp(w_t)      & \\quad \\lambda = 0; \\\\\n        (\\lambda W_t+1)^{1/\\lambda}  & \\quad \\lambda \\ne 0.\n\\end{array}\\right. \\\\\nf(x) &= \\begin{cases}\n                        e^x & \\quad\\lambda=0;\\\\\n(\\lambda x + 1)^{1/\\lambda} & \\quad\\lambda\\ne0.\n\\end{cases}\\\\\nf''(x) &= \\begin{cases}\n                        e^x & \\quad\\lambda=0;\\\\\n(1-\\lambda)(\\lambda x + 1)^{1/\\lambda-2} & \\quad\\lambda\\ne0.\n\\end{cases}\n\\end{align*}\\]\n\n\n\n\n\n\nNote\n\n\n\\(E[Y] = \\begin{cases}\n                        e^\\mu\\left[1+\\frac{\\sigma^2}{2}\\right] & \\quad\\lambda=0;\\\\\n(\\lambda \\mu + 1)^{1/\\lambda}\\left[1+\\frac{\\sigma^2(1-\\lambda)}{2(\\lambda\\mu+1)^2}\\right] & \\quad\\lambda\\ne0.\n\\end{cases}\\)"
  },
  {
    "objectID": "slides/5-toolbox.html#bias-adjustment-2",
    "href": "slides/5-toolbox.html#bias-adjustment-2",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Bias adjustment",
    "text": "Bias adjustment\n\nfc |&gt;\n  autoplot(eggs, level = 80, point_forecast = lst(mean, median)) +\n  labs(title=\"Annual egg prices\",\n       y=\"US$ (adjusted for inflation)\")"
  },
  {
    "objectID": "slides/5-toolbox.html#forecasting-and-decomposition-1",
    "href": "slides/5-toolbox.html#forecasting-and-decomposition-1",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Forecasting and decomposition",
    "text": "Forecasting and decomposition\n\\[y_t = \\hat{S}_t + \\hat{A}_t\\]\n\n\\(\\hat{A}_t\\) is seasonally adjusted component\n\\(\\hat{S}_t\\) is seasonal component.\n\nForecast \\(\\hat{S}_t\\) using SNAIVE.\nForecast \\(\\hat{A}_t\\) using non-seasonal time series method.\nCombine forecasts of \\(\\hat{S}_t\\) and \\(\\hat{A}_t\\) to get forecasts of original data."
  },
  {
    "objectID": "slides/5-toolbox.html#us-retail-employment",
    "href": "slides/5-toolbox.html#us-retail-employment",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "US Retail Employment",
    "text": "US Retail Employment\n\nus_retail_employment &lt;- us_employment |&gt;\n  filter(year(Month) &gt;= 1990, Title == \"Retail Trade\") |&gt;\n  select(-Series_ID)\nus_retail_employment\n\n# A tsibble: 357 x 3 [1M]\n      Month Title        Employed\n      &lt;mth&gt; &lt;chr&gt;           &lt;dbl&gt;\n 1 1990 Jan Retail Trade   13256.\n 2 1990 Feb Retail Trade   12966.\n 3 1990 Mar Retail Trade   12938.\n 4 1990 Apr Retail Trade   13012.\n 5 1990 May Retail Trade   13108.\n 6 1990 Jun Retail Trade   13183.\n 7 1990 Jul Retail Trade   13170.\n 8 1990 Aug Retail Trade   13160.\n 9 1990 Sep Retail Trade   13113.\n10 1990 Oct Retail Trade   13185.\n# ℹ 347 more rows"
  },
  {
    "objectID": "slides/5-toolbox.html#us-retail-employment-1",
    "href": "slides/5-toolbox.html#us-retail-employment-1",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "US Retail Employment",
    "text": "US Retail Employment\n\ndcmp &lt;- us_retail_employment |&gt;\n  model(STL(Employed)) |&gt;\n  components() |&gt; select(-.model)\ndcmp\n\n# A tsibble: 357 x 6 [1M]\n      Month Employed  trend season_year remainder season_adjust\n      &lt;mth&gt;    &lt;dbl&gt;  &lt;dbl&gt;       &lt;dbl&gt;     &lt;dbl&gt;         &lt;dbl&gt;\n 1 1990 Jan   13256. 13288.      -33.0      0.836        13289.\n 2 1990 Feb   12966. 13269.     -258.     -44.6          13224.\n 3 1990 Mar   12938. 13250.     -290.     -22.1          13228.\n 4 1990 Apr   13012. 13231.     -220.       1.05         13232.\n 5 1990 May   13108. 13211.     -114.      11.3          13223.\n 6 1990 Jun   13183. 13192.      -24.3     15.5          13207.\n 7 1990 Jul   13170. 13172.      -23.2     21.6          13193.\n 8 1990 Aug   13160. 13151.       -9.52    17.8          13169.\n 9 1990 Sep   13113. 13131.      -39.5     22.0          13153.\n10 1990 Oct   13185. 13110.       61.6     13.2          13124.\n# ℹ 347 more rows"
  },
  {
    "objectID": "slides/5-toolbox.html#us-retail-employment-2",
    "href": "slides/5-toolbox.html#us-retail-employment-2",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "US Retail Employment",
    "text": "US Retail Employment\n\ndcmp_forecast&lt;- dcmp |&gt;\n                model(NAIVE(season_adjust)) |&gt;\n                forecast()\n\n  autoplot(dcmp_forecast,dcmp) +\n  labs(title = \"Naive forecasts of seasonally adjusted data\")"
  },
  {
    "objectID": "slides/5-toolbox.html#us-retail-employment-3",
    "href": "slides/5-toolbox.html#us-retail-employment-3",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "US Retail Employment",
    "text": "US Retail Employment\n\nus_retail_employment |&gt;\n  model(stlf = decomposition_model(\n    STL(Employed ~ trend(window = 7), robust = TRUE),\n    NAIVE(season_adjust)\n  )) |&gt;\n  forecast() |&gt;\n  autoplot(us_retail_employment)"
  },
  {
    "objectID": "slides/5-toolbox.html#decomposition-models",
    "href": "slides/5-toolbox.html#decomposition-models",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Decomposition models",
    "text": "Decomposition models\ndecomposition_model() creates a decomposition model\n\nYou must provide a method for forecasting the season_adjust series.\nA seasonal naive method is used by default for the seasonal components.\nThe variances from both the seasonally adjusted and seasonal forecasts are combined."
  },
  {
    "objectID": "slides/5-toolbox.html#training-and-test-sets-12",
    "href": "slides/5-toolbox.html#training-and-test-sets-12",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Training and test sets (1/2)",
    "text": "Training and test sets (1/2)"
  },
  {
    "objectID": "slides/5-toolbox.html#training-and-test-sets-22",
    "href": "slides/5-toolbox.html#training-and-test-sets-22",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Training and test sets (2/2)",
    "text": "Training and test sets (2/2)\n\nA model which fits the training data well will not necessarily forecast well.\nA perfect fit can always be obtained by using a model with enough parameters.\nOver-fitting a model to data is just as bad as failing to identify a systematic pattern in the data.\nThe test set must not be used for any aspect of model development or calculation of forecasts.\nForecast accuracy is based only on the test set."
  },
  {
    "objectID": "slides/5-toolbox.html#forecast-errors",
    "href": "slides/5-toolbox.html#forecast-errors",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Forecast errors",
    "text": "Forecast errors\nForecast “error”: the difference between an observed value and its forecast. \\[\n  e_{T+h} = y_{T+h} - \\hat{y}_{T+h|T},\n\\] where the training data is given by \\(\\{y_1,\\dots,y_T\\}\\)\n\nUnlike residuals, forecast errors on the test set involve multi-step forecasts.\nThese are true forecast errors as the test data is not used in computing \\(\\hat{y}_{T+h|T}\\)."
  },
  {
    "objectID": "slides/5-toolbox.html#measures-of-forecast-accuracy",
    "href": "slides/5-toolbox.html#measures-of-forecast-accuracy",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Measures of forecast accuracy",
    "text": "Measures of forecast accuracy\n\nCodePlot\n\n\n\ntrain &lt;- aus_production |&gt;\n  filter(between(year(Quarter), 1992, 2007))\nbeer &lt;- aus_production |&gt;\n  filter(year(Quarter) &gt;= 1992)\nbeer_fc_plot &lt;- train |&gt;\n  model(\n    Mean = MEAN(Beer),\n    Naive = NAIVE(Beer),\n    Seasonal_naive = SNAIVE(Beer),\n    Drift = RW(Beer ~ drift())\n  ) |&gt;\n  forecast(h=11) |&gt;\n  autoplot(beer, level = NULL) +\n    labs(title = \"Forecasts for quarterly beer production\",\n         y = \"Megalitres\") +\n    guides(colour=guide_legend(title=\"Forecast\"))\nbeer_fc_plot"
  },
  {
    "objectID": "slides/5-toolbox.html#measures-of-forecast-accuracy-1",
    "href": "slides/5-toolbox.html#measures-of-forecast-accuracy-1",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Measures of forecast accuracy",
    "text": "Measures of forecast accuracy\n\\(y_{T+h}=  (T+h)\\)th observation, \\(h=1,\\dots,H\\)\n\\(\\hat{y}_{T+h|T}=\\) its forecast based on data up to time \\(T\\).\n\\(e_{T+h} = y_{T+h} - \\hat{y}_{{T+h}|{T}}\\)\n\n\n\n\n\n\n\n\n\nName\nAbb.\nFormula\n\n\n\n\nMean Abosolue Error\nMAE\n\\(\\text{mean}(\\|e_{T+h}\\|)\\)\n\n\nMean Squared Error\nMSE\n\\(\\text{mean}(e_{T+h}^2)\\)\n\n\nRoot MSE\nRMSE\n\\(\\sqrt{\\text{mean}(e_{T+h}^2)\\)\n\n\nMean Absolute Percent Error\nMAPE\n\\(100\\text{mean}(\\|e_{T+h}\\|/ \\|y_{T+h}\\|)\\)\n\n\n\n\nMAE, MSE, RMSE are all scale dependent.\nMAPE is scale independent but is only sensible if \\(y_t\\gg 0\\) for all \\(t\\), and \\(y\\) has a natural zero."
  },
  {
    "objectID": "slides/5-toolbox.html#mean-absolute-scaled-error-non-seasonal",
    "href": "slides/5-toolbox.html#mean-absolute-scaled-error-non-seasonal",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Mean Absolute Scaled Error (non-seasonal)",
    "text": "Mean Absolute Scaled Error (non-seasonal)\n\\[\n\\text{MASE} = \\text{mean}(|e_{T+h}|/Q)\n\\]\nwhere \\(Q\\) is a stable measure of the scale of the time series \\(\\{y_t\\}\\).\nProposed by Hyndman and Koehler (IJF, 2006).\nFor non-seasonal time series,\n\\[\n  Q = (T-1)^{-1}\\sum_{t=2}^T |y_t-y_{t-1}|\n\\] works well. Then MASE is equivalent to MAE relative to a naïve method."
  },
  {
    "objectID": "slides/5-toolbox.html#mean-absolute-scaled-error-seasonal",
    "href": "slides/5-toolbox.html#mean-absolute-scaled-error-seasonal",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Mean Absolute Scaled Error (seasonal)",
    "text": "Mean Absolute Scaled Error (seasonal)\n\\[\n\\text{MASE} = \\text{mean}(|e_{T+h}|/Q)\n\\]\nwhere \\(Q\\) is a stable measure of the scale of the time series \\(\\{y_t\\}\\).\nProposed by Hyndman and Koehler (IJF, 2006).\nFor seasonal time series, \\[\n  Q = (T-m)^{-1}\\sum_{t=m+1}^T |y_t-y_{t-m}|\n\\] works well. Then MASE is equivalent to MAE relative to a seasonal naïve method."
  },
  {
    "objectID": "slides/5-toolbox.html#measures-of-forecast-accuracy-time-series",
    "href": "slides/5-toolbox.html#measures-of-forecast-accuracy-time-series",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Measures of forecast accuracy: Time Series",
    "text": "Measures of forecast accuracy: Time Series\n\nbeer_fc_plot"
  },
  {
    "objectID": "slides/5-toolbox.html#measures-of-forecast-accuracy-model-fits",
    "href": "slides/5-toolbox.html#measures-of-forecast-accuracy-model-fits",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Measures of forecast accuracy: Model Fits",
    "text": "Measures of forecast accuracy: Model Fits\n\nrecent_production &lt;- aus_production |&gt;\n  filter(year(Quarter) &gt;= 1992)\ntrain &lt;- recent_production |&gt;\n  filter(year(Quarter) &lt;= 2007)\nbeer_fit &lt;- train |&gt;\n  model(\n    Mean = MEAN(Beer),\n    Naive = NAIVE(Beer),\n    Seasonal_naive = SNAIVE(Beer),\n    Drift = RW(Beer ~ drift())\n  )\nbeer_fc &lt;- beer_fit |&gt;\n  forecast(h = 10)"
  },
  {
    "objectID": "slides/5-toolbox.html#measures-of-forecast-accuracy-on-training-data-12",
    "href": "slides/5-toolbox.html#measures-of-forecast-accuracy-on-training-data-12",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Measures of forecast accuracy: On Training data (1/2)",
    "text": "Measures of forecast accuracy: On Training data (1/2)\n\nSmaller is better\nUse to evaluate models individually (based on training data, overfitting possible)\n\n\n\naccuracy(beer_fit)\n\n# A tibble: 4 × 10\n  .model         .type           ME  RMSE   MAE    MPE  MAPE  MASE RMSSE   ACF1\n  &lt;chr&gt;          &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;\n1 Mean           Training  0         43.6  35.2 -0.937  7.89  2.46  2.60 -0.109\n2 Naive          Training  4.76e- 1  65.3  54.7 -0.916 12.2   3.83  3.89 -0.241\n3 Seasonal_naive Training -2.13e+ 0  16.8  14.3 -0.554  3.31  1     1    -0.288\n4 Drift          Training -5.41e-15  65.3  54.8 -1.03  12.2   3.83  3.89 -0.241"
  },
  {
    "objectID": "slides/5-toolbox.html#measures-of-forecast-accuracy-on-training-data-22",
    "href": "slides/5-toolbox.html#measures-of-forecast-accuracy-on-training-data-22",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Measures of forecast accuracy: On Training data (2/2)",
    "text": "Measures of forecast accuracy: On Training data (2/2)\n\naccuracy(beer_fit) |&gt;\n  arrange(.model) |&gt; # Sorts model names alphabetically\n  select(.model, .type, RMSE, MAE, MAPE, MASE) #The metrics we defined\n\n# A tibble: 4 × 6\n  .model         .type     RMSE   MAE  MAPE  MASE\n  &lt;chr&gt;          &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n1 Drift          Training  65.3  54.8 12.2   3.83\n2 Mean           Training  43.6  35.2  7.89  2.46\n3 Naive          Training  65.3  54.7 12.2   3.83\n4 Seasonal_naive Training  16.8  14.3  3.31  1"
  },
  {
    "objectID": "slides/5-toolbox.html#measures-of-forecast-accuracy-on-testing-data",
    "href": "slides/5-toolbox.html#measures-of-forecast-accuracy-on-testing-data",
    "title": "Chapter 5 Forecasters Toolbox",
    "section": "Measures of forecast accuracy: On Testing data",
    "text": "Measures of forecast accuracy: On Testing data\n\nSmaller is better\nCan be used to compare models and evaluate models individually\nGives a realistic expectation of error if we rebuild model on all data for future forecasts\n\n\n\naccuracy(beer_fc, recent_production) |&gt;\n  arrange(.model) |&gt;\n  select(.model, .type, RMSE, MAE, MAPE, MASE)\n\n# A tibble: 4 × 6\n  .model         .type  RMSE   MAE  MAPE  MASE\n  &lt;chr&gt;          &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n1 Drift          Test   64.9  58.9 14.6  4.12 \n2 Mean           Test   38.4  34.8  8.28 2.44 \n3 Naive          Test   62.7  57.4 14.2  4.01 \n4 Seasonal_naive Test   14.3  13.4  3.17 0.937"
  },
  {
    "objectID": "slides/8-ets_o.html",
    "href": "slides/8-ets_o.html",
    "title": "Chapter 8 ETS",
    "section": "",
    "text": "library(patchwork) #only used for notes\nlibrary(gganimate) # only used for notes\nlibrary(purrr)\nlibrary(rlang)\nlibrary(magick)\nlibrary(fpp3)"
  },
  {
    "objectID": "slides/8-ets_o.html#setup",
    "href": "slides/8-ets_o.html#setup",
    "title": "Chapter 8 ETS",
    "section": "",
    "text": "library(patchwork) #only used for notes\nlibrary(gganimate) # only used for notes\nlibrary(purrr)\nlibrary(rlang)\nlibrary(magick)\nlibrary(fpp3)"
  },
  {
    "objectID": "slides/8-ets_o.html#historical-perspective",
    "href": "slides/8-ets_o.html#historical-perspective",
    "title": "Chapter 8 ETS",
    "section": "Historical perspective",
    "text": "Historical perspective\n\nDeveloped in the 1950s and 1960s as methods (algorithms) to produce point forecasts.\nCombine a “level”, “trend” (slope) and “seasonal” component to describe a time series.\nThe rate of change of the components are controlled by “smoothing parameters”: \\(\\alpha\\), \\(\\beta\\) and \\(\\gamma\\) respectively.\nNeed to choose best values for the smoothing parameters (and initial states).\nEquivalent ETS state space models developed in the 1990s and 2000s."
  },
  {
    "objectID": "slides/8-ets_o.html#big-idea-control-the-rate-of-change-12",
    "href": "slides/8-ets_o.html#big-idea-control-the-rate-of-change-12",
    "title": "Chapter 8 ETS",
    "section": "Big idea: control the rate of change (1/2)",
    "text": "Big idea: control the rate of change (1/2)\n\\(\\alpha\\) controls the flexibility of the level (Level - the average value for a specific time period)\n\nIf \\(\\alpha = 0\\), the level never updates (mean)\nIf \\(\\alpha = 1\\), the level updates completely (naive)\n\n. . .\n\\(\\beta\\) controls the flexibility of the trend\n\nIf \\(\\beta = 0\\), the trend is linear\nIf \\(\\beta = 1\\), the trend changes suddenly every observation"
  },
  {
    "objectID": "slides/8-ets_o.html#big-idea-control-the-rate-of-change-22",
    "href": "slides/8-ets_o.html#big-idea-control-the-rate-of-change-22",
    "title": "Chapter 8 ETS",
    "section": "Big idea: control the rate of change (2/2)",
    "text": "Big idea: control the rate of change (2/2)\n\\(\\gamma\\) controls the flexibility of the seasonality\n\nIf \\(\\gamma = 0\\), the seasonality is fixed (seasonal means)\nIf \\(\\gamma = 1\\), the seasonality updates completely (seasonal naive)"
  },
  {
    "objectID": "slides/8-ets_o.html#a-model-for-levels-trends-and-seasonalities",
    "href": "slides/8-ets_o.html#a-model-for-levels-trends-and-seasonalities",
    "title": "Chapter 8 ETS",
    "section": "A model for levels, trends, and seasonalities",
    "text": "A model for levels, trends, and seasonalities\nWe want a model that captures the level (\\(\\ell_t\\)), trend (\\(b_t\\)) and seasonality (\\(s_t\\)).\n. . .\nHow do we combine these elements?\n. . .\nAdditively? \\[\ny_t = \\ell_{t-1} + b_{t-1} + s_{t-m} + \\varepsilon_t\n\\]\n. . .\nMultiplicatively? \\[\ny_t = \\ell_{t-1}b_{t-1}s_{t-m}(1 + \\varepsilon_t)\n\\]\n. . .\nPerhaps a mix of both? \\[\ny_t = (\\ell_{t-1} + b_{t-1}) s_{t-m} + \\varepsilon_t\n\\]\n. . .\nHow do the level, trend and seasonal components evolve over time?"
  },
  {
    "objectID": "slides/8-ets_o.html#ets-models",
    "href": "slides/8-ets_o.html#ets-models",
    "title": "Chapter 8 ETS",
    "section": "ETS models",
    "text": "ETS models\nGeneral notation\n\n\n\n\n\n\n\n\n\nGeneral notation\n\nE T S\nExponenTial Smoothing\n\n\n\n\\(\\nearrow\\)\n\\(\\uparrow\\)\n\\(\\nwarrow\\)\n\n\nError\n\nTrend\nSeason\n\n\n\n. . .\nError: Additive (A) or multiplicative (M)\nTrend: None (N), additive (A), multiplicative (M), or damped (\\(A_d\\) or \\(M_d\\)).\nSeasonality: None (N), additive (A) or multiplicative (M)"
  },
  {
    "objectID": "slides/8-ets_o.html#simple-methods",
    "href": "slides/8-ets_o.html#simple-methods",
    "title": "Chapter 8 ETS",
    "section": "Simple methods",
    "text": "Simple methods\nTime series \\(y_1, y_2, \\dots, y_T\\).\nNaive (Random walk forecasts)\n\\[\\hat{y}_{T+h|T} = y_T\\]\n. . .\nAverage forecasts\n\\[\n\\hat{y}_{T+h|T} = \\frac{1}{T} \\sum_{t=1}^T y_t\n\\]\n\nWant something in between these methods.\nMost recent data should have more weight.\n\n. . .\nSimple exponential smoothing uses a weighted moving average with weights that decrease exponentially."
  },
  {
    "objectID": "slides/8-ets_o.html#simple-exponential-smoothing-1",
    "href": "slides/8-ets_o.html#simple-exponential-smoothing-1",
    "title": "Chapter 8 ETS",
    "section": "Simple Exponential Smoothing",
    "text": "Simple Exponential Smoothing\nForecast equation\n\\[\n\\hat{y}_{T+1|T} = \\alpha y_T + \\alpha(1-\\alpha) y_{T-1} + \\alpha(1-\\alpha)^2 y_{T-2} + \\cdots\n\\]\nwhere \\(0 \\le \\alpha \\le 1\\).\n. . .\nWeights assigned to observations for:\n\n\n\n\n\n\n\n\n\n\nObservation\n\\(\\alpha = 0.2\\)\n\\(\\alpha = 0.4\\)\n\\(\\alpha = 0.6\\)\n\\(\\alpha = 0.8\\)\n\n\n\n\n\\(y_{T}\\)\n0.2\n0.4\n0.6\n0.8\n\n\n\\(y_{T-1}\\)\n0.16\n0.24\n0.24\n0.16\n\n\n\\(y_{T-2}\\)\n0.128\n0.144\n0.096\n0.032\n\n\n\\(y_{T-3}\\)\n0.1024\n0.0864\n0.0384\n0.0064\n\n\n\\(y_{T-4}\\)\n\\((0.2)(0.8)^4\\)\n\\((0.4)(0.6)^4\\)\n\\((0.6)(0.4)^4\\)\n\\((0.8)(0.2)^4\\)\n\n\n\\(y_{T-5}\\)\n\\((0.2)(0.8)^5\\)\n\\((0.4)(0.6)^5\\)\n\\((0.6)(0.4)^5\\)\n\\((0.8)(0.2)^5\\)"
  },
  {
    "objectID": "slides/8-ets_o.html#simple-exponential-smoothing-2",
    "href": "slides/8-ets_o.html#simple-exponential-smoothing-2",
    "title": "Chapter 8 ETS",
    "section": "Simple Exponential Smoothing",
    "text": "Simple Exponential Smoothing\n\nalgeria_economy &lt;- global_economy |&gt;\n  filter(Country == \"Algeria\")"
  },
  {
    "objectID": "slides/8-ets_o.html#simple-exponential-smoothing-3",
    "href": "slides/8-ets_o.html#simple-exponential-smoothing-3",
    "title": "Chapter 8 ETS",
    "section": "Simple Exponential Smoothing",
    "text": "Simple Exponential Smoothing\nComponent form\n\\[\\begin{align*}\n\\text{Forecast equation} && \\hat{y}_{t+h|t} &= \\ell_{t} \\\\\n\\text{Smoothing equation} && \\ell_{t} &= \\alpha y_{t} + (1 - \\alpha)\\ell_{t-1}\n\\end{align*}\\]\n\n\\(\\ell_t\\) is the level (or the smoothed value) of the series at time t.\n\\(\\hat{y}_{t+1|t} = \\alpha y_t + (1-\\alpha) \\hat{y}_{t|t-1}\\)\nThe process has to start somewhere, so we let the first fitted value at time 1 be denoted by \\(\\ell_0\\) (which we will have to estimate) . . ."
  },
  {
    "objectID": "slides/8-ets_o.html#simple-exponential-smoothing-4",
    "href": "slides/8-ets_o.html#simple-exponential-smoothing-4",
    "title": "Chapter 8 ETS",
    "section": "Simple Exponential Smoothing",
    "text": "Simple Exponential Smoothing\nIterate to get exponentially weighted moving average form.\nWeighted average form\n\\[\n\\hat{y}_{T+1|T} = \\sum_{j=0}^{T-1} \\alpha(1-\\alpha)^j y_{T-j} + (1-\\alpha)^T \\ell_{0}\n\\]"
  },
  {
    "objectID": "slides/8-ets_o.html#optimizing-smoothing-parameters",
    "href": "slides/8-ets_o.html#optimizing-smoothing-parameters",
    "title": "Chapter 8 ETS",
    "section": "Optimizing smoothing parameters",
    "text": "Optimizing smoothing parameters\n\nNeed to choose best values for \\(\\alpha\\) and \\(\\ell_0\\).\nSimilarly to regression, choose optimal parameters by minimizing SSE:\n\n. . .\n\\[\n  \\text{SSE}=\\sum_{t=1}^T(y_t - \\hat{y}{t}{t-1})^2.\n\\]\n\nUnlike regression there is no closed form solution — use numerical optimization.\n\n\nFor Algerian Exports example:\n\n\\(\\hat\\alpha = 0.8400\\)\n\\(\\hat\\ell_0 = 39.54\\)"
  },
  {
    "objectID": "slides/8-ets_o.html#simple-exponential-smoothing-5",
    "href": "slides/8-ets_o.html#simple-exponential-smoothing-5",
    "title": "Chapter 8 ETS",
    "section": "Simple Exponential Smoothing",
    "text": "Simple Exponential Smoothing"
  },
  {
    "objectID": "slides/8-ets_o.html#models-and-methods",
    "href": "slides/8-ets_o.html#models-and-methods",
    "title": "Chapter 8 ETS",
    "section": "Models and methods",
    "text": "Models and methods\nMethods\n\nAlgorithms that return point forecasts.\n\n. . .\nModels\n\nGenerate same point forecasts but can also generate forecast distributions.\nA stochastic (or random) data generating process that can generate an entire forecast distribution.\nAllow for “proper” model selection."
  },
  {
    "objectID": "slides/8-ets_o.html#etsann-ses-with-additive-errors",
    "href": "slides/8-ets_o.html#etsann-ses-with-additive-errors",
    "title": "Chapter 8 ETS",
    "section": "ETS(A,N,N): SES with additive errors",
    "text": "ETS(A,N,N): SES with additive errors\nComponent form\n\\[\\begin{align*}\n\\text{Forecast equation} && \\hat{y}_{t+h|t} &= \\ell_{t} \\\\\n\\text{Smoothing equation} && \\ell_{t} &= \\alpha y_{t} + (1 - \\alpha)\\ell_{t-1}\n\\end{align*}\\]\nForecast error: \\(e_t = y_t - \\hat{y}_{t|t-1} = y_t - \\ell_{t-1}\\).\nError correction form\n\\[\\begin{align*}\ny_t &= \\ell_{t-1} + e_t \\\\\n\\ell_{t} &= \\ell_{t-1} + \\alpha (y_t - \\ell_{t-1}) \\\\\n         &= \\ell_{t-1} + \\alpha e_t\n\\end{align*}\\]\nSpecify probability distribution for \\(e_t\\), we assume \\(e_t = \\varepsilon_t \\sim \\text{NID}(0, \\sigma^2)\\)."
  },
  {
    "objectID": "slides/8-ets_o.html#etsann-ses-with-additive-errors-1",
    "href": "slides/8-ets_o.html#etsann-ses-with-additive-errors-1",
    "title": "Chapter 8 ETS",
    "section": "ETS(A,N,N): SES with additive errors",
    "text": "ETS(A,N,N): SES with additive errors\n\\[\\begin{align*}\n\\text{Measurement equation} && y_t &= \\ell_{t-1} + \\varepsilon_t \\\\\n\\text{State equation} && \\ell_t &= \\ell_{t-1} + \\alpha \\varepsilon_t\n\\end{align*}\\]\nwhere \\(\\varepsilon_t \\sim \\text{NID}(0, \\sigma^2)\\).\n\n“Innovations” or “single source of error” because equations have the same error process, \\(\\varepsilon_t\\).\nMeasurement equation: relationship between observations and states.\nState equation(s): evolution of the state(s) through time."
  },
  {
    "objectID": "slides/8-ets_o.html#etsmnn-ses-with-multiplicative-errors",
    "href": "slides/8-ets_o.html#etsmnn-ses-with-multiplicative-errors",
    "title": "Chapter 8 ETS",
    "section": "ETS(M,N,N): SES with multiplicative errors",
    "text": "ETS(M,N,N): SES with multiplicative errors\n\nSpecify relative errors \\(\\varepsilon_t = \\frac{y_t - \\hat{y}_{t|t-1}}{\\hat{y}_{t|t-1}} \\sim \\text{NID}(0, \\sigma^2)\\)\nSubstituting \\(\\hat{y}_{t|t-1} = \\ell_{t-1}\\) gives:\n\n\\(y_t = \\ell_{t-1} + \\ell_{t-1} \\varepsilon_t\\)\n\\(e_t = y_t - \\hat{y}_{t|t-1} = \\ell_{t-1} \\varepsilon_t\\) . . ."
  },
  {
    "objectID": "slides/8-ets_o.html#etsmnn-ses-with-multiplicative-errors-1",
    "href": "slides/8-ets_o.html#etsmnn-ses-with-multiplicative-errors-1",
    "title": "Chapter 8 ETS",
    "section": "ETS(M,N,N): SES with multiplicative errors",
    "text": "ETS(M,N,N): SES with multiplicative errors\nMeasurement equation\n\\[\\begin{align*}\n\\text{Measurement equation} && y_t &= \\ell_{t-1} (1 + \\varepsilon_t) \\\\\n\\text{State equation} && \\ell_t &= \\ell_{t-1} (1 + \\alpha \\varepsilon_t)\n\\end{align*}\\]\n\nModels with additive and multiplicative errors with the same parameters generate the same point forecasts but different prediction intervals."
  },
  {
    "objectID": "slides/8-ets_o.html#etsann-specifying-the-model",
    "href": "slides/8-ets_o.html#etsann-specifying-the-model",
    "title": "Chapter 8 ETS",
    "section": "ETS(A,N,N): Specifying the model",
    "text": "ETS(A,N,N): Specifying the model\n\nETS(y ~ error(\"A\") + trend(\"N\") + season(\"N\"))\n\nBy default, an optimal value for \\(\\alpha\\) and \\(\\ell_0\\) is used.\n\\(\\alpha\\) can be chosen manually in trend().\n\ntrend(\"N\", alpha = 0.5)\ntrend(\"N\", alpha_range = c(0.2, 0.8))"
  },
  {
    "objectID": "slides/8-ets_o.html#example-algerian-exports-14",
    "href": "slides/8-ets_o.html#example-algerian-exports-14",
    "title": "Chapter 8 ETS",
    "section": "Example: Algerian Exports (1/4)",
    "text": "Example: Algerian Exports (1/4)\n\nalgeria_economy &lt;- global_economy |&gt;\n  filter(Country == \"Algeria\")\nfit &lt;- algeria_economy |&gt;\n  model(ANN = ETS(Exports ~ error(\"A\") + trend(\"N\") + season(\"N\")))\nreport(fit)\n\nSeries: Exports \nModel: ETS(A,N,N) \n  Smoothing parameters:\n    alpha = 0.8399875 \n\n  Initial states:\n   l[0]\n 39.539\n\n  sigma^2:  35.6301\n\n     AIC     AICc      BIC \n446.7154 447.1599 452.8968"
  },
  {
    "objectID": "slides/8-ets_o.html#example-algerian-exports-24",
    "href": "slides/8-ets_o.html#example-algerian-exports-24",
    "title": "Chapter 8 ETS",
    "section": "Example: Algerian Exports (2/4)",
    "text": "Example: Algerian Exports (2/4)\n\ncomponents(fit) |&gt; autoplot()"
  },
  {
    "objectID": "slides/8-ets_o.html#example-algerian-exports-34",
    "href": "slides/8-ets_o.html#example-algerian-exports-34",
    "title": "Chapter 8 ETS",
    "section": "Example: Algerian Exports (3/4)",
    "text": "Example: Algerian Exports (3/4)\n\ncomponents(fit) |&gt;\n  left_join(fitted(fit), by = c(\"Country\", \".model\", \"Year\"))\n\n# A dable: 59 x 7 [1Y]\n# Key:     Country, .model [1]\n# :        Exports = lag(level, 1) + remainder\n   Country .model  Year Exports level remainder .fitted\n   &lt;fct&gt;   &lt;chr&gt;  &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;\n 1 Algeria ANN     1959    NA    39.5    NA        NA  \n 2 Algeria ANN     1960    39.0  39.1    -0.496    39.5\n 3 Algeria ANN     1961    46.2  45.1     7.12     39.1\n 4 Algeria ANN     1962    19.8  23.8   -25.3      45.1\n 5 Algeria ANN     1963    24.7  24.6     0.841    23.8\n 6 Algeria ANN     1964    25.1  25.0     0.534    24.6\n 7 Algeria ANN     1965    22.6  23.0    -2.39     25.0\n 8 Algeria ANN     1966    26.0  25.5     3.00     23.0\n 9 Algeria ANN     1967    23.4  23.8    -2.07     25.5\n10 Algeria ANN     1968    23.1  23.2    -0.630    23.8\n# ℹ 49 more rows"
  },
  {
    "objectID": "slides/8-ets_o.html#example-algerian-exports-44",
    "href": "slides/8-ets_o.html#example-algerian-exports-44",
    "title": "Chapter 8 ETS",
    "section": "Example: Algerian Exports (4/4)",
    "text": "Example: Algerian Exports (4/4)\n\nfit |&gt;\n  forecast(h = 5) |&gt;\n  autoplot(algeria_economy) +\n  labs(y = \"% of GDP\", title = \"Exports: Algeria\")"
  },
  {
    "objectID": "slides/8-ets_o.html#holts-linear-trend",
    "href": "slides/8-ets_o.html#holts-linear-trend",
    "title": "Chapter 8 ETS",
    "section": "Holt’s linear trend",
    "text": "Holt’s linear trend\nComponent form\n\\[\\begin{align*}\n\\text{Forecast} && \\hat{y}_{t+h|t} &= \\ell_{t} + hb_{t} \\\\\n\\text{Level} && \\ell_{t} &= \\alpha y_{t} + (1 - \\alpha)(\\ell_{t-1} + b_{t-1}) \\\\\n\\text{Trend} && b_{t} &= \\beta^*(\\ell_{t} - \\ell_{t-1}) + (1 - \\beta^*)b_{t-1}\n\\end{align*}\\]\n\nTwo smoothing parameters \\(\\alpha\\) and \\(\\beta^*\\) (\\(0 \\le \\alpha, \\beta^* \\le 1\\)).\n\\(\\ell_t\\) level: weighted average between \\(y_t\\) and one-step ahead forecast for time \\(t\\), \\((\\ell_{t-1} + b_{t-1} = \\hat{y}_{t|t-1})\\)\n\\(b_t\\) slope: weighted average of \\((\\ell_{t} - \\ell_{t-1})\\) and \\(b_{t-1}\\), current and previous estimate of slope.\nChoose \\(\\alpha, \\beta^*, \\ell_0, b_0\\) to minimize SSE."
  },
  {
    "objectID": "slides/8-ets_o.html#etsaan",
    "href": "slides/8-ets_o.html#etsaan",
    "title": "Chapter 8 ETS",
    "section": "ETS(A,A,N)",
    "text": "ETS(A,A,N)\nHolt’s linear method with additive errors.\n\nAssume \\(\\varepsilon_t = y_t - \\ell_{t-1} - b_{t-1} \\sim \\text{NID}(0, \\sigma^2)\\).\nSubstituting into the error correction equations for Holt’s linear method:\n\n. . .\n\\[\\begin{align*}\ny_t &= \\ell_{t-1} + b_{t-1} + \\varepsilon_t \\\\\n\\ell_t &= \\ell_{t-1} + b_{t-1} + \\alpha \\varepsilon_t \\\\\nb_t &= b_{t-1} + \\alpha \\beta^* \\varepsilon_t\n\\end{align*}\\]\n\nFor simplicity, set \\(\\beta = \\alpha \\beta^*\\)."
  },
  {
    "objectID": "slides/8-ets_o.html#exponential-smoothing-trendslope",
    "href": "slides/8-ets_o.html#exponential-smoothing-trendslope",
    "title": "Chapter 8 ETS",
    "section": "Exponential smoothing: trend/slope",
    "text": "Exponential smoothing: trend/slope"
  },
  {
    "objectID": "slides/8-ets_o.html#etsman",
    "href": "slides/8-ets_o.html#etsman",
    "title": "Chapter 8 ETS",
    "section": "ETS(M,A,N)",
    "text": "ETS(M,A,N)\nHolt’s linear method with multiplicative errors.\n\nAssume \\(\\varepsilon_t=\\frac{y_t-(\\ell_{t-1}+b_{t-1})}{(\\ell_{t-1}+b_{t-1})}\\)\nFollowing a similar approach as above, the innovations state space model underlying Holt’s linear method with multiplicative errors is specified as\n\n. . .\n\\[\\begin{align*}\n    y_t&=(\\ell_{t-1}+b_{t-1})(1+\\varepsilon_t)\\\\\n    \\ell_t&=(\\ell_{t-1}+b_{t-1})(1+\\alpha \\varepsilon_t)\\\\\n    b_t&=b_{t-1}+\\beta(\\ell_{t-1}+b_{t-1}) \\varepsilon_t\n\\end{align*}\\]\nwhere again \\(\\beta=\\alpha \\beta^*\\) and \\(\\varepsilon_t \\sim \\text{NID}(0,\\sigma^2)\\)."
  },
  {
    "objectID": "slides/8-ets_o.html#etsaan-specifying-the-model",
    "href": "slides/8-ets_o.html#etsaan-specifying-the-model",
    "title": "Chapter 8 ETS",
    "section": "ETS(A,A,N): Specifying the model",
    "text": "ETS(A,A,N): Specifying the model\n\nETS(y ~ error(\"A\") + trend(\"A\") + season(\"N\"))\n\n. . .\nBy default, optimal values for \\(\\beta\\) and \\(b_0\\) are used.\n\\(\\beta\\) can be chosen manually in trend().\n\ntrend(\"A\", beta = 0.004)\ntrend(\"A\", beta_range = c(0, 0.1))"
  },
  {
    "objectID": "slides/8-ets_o.html#example-australian-population-14",
    "href": "slides/8-ets_o.html#example-australian-population-14",
    "title": "Chapter 8 ETS",
    "section": "Example: Australian population (1/4)",
    "text": "Example: Australian population (1/4)\n\naus_economy &lt;- global_economy |&gt; filter(Code == \"AUS\") |&gt;\n  mutate(Pop = Population / 1e6)\nfit &lt;- aus_economy |&gt;\n  model(AAN = ETS(Pop ~ error(\"A\") + trend(\"A\") + season(\"N\")))\nreport(fit)\n\nSeries: Pop \nModel: ETS(A,A,N) \n  Smoothing parameters:\n    alpha = 0.9999 \n    beta  = 0.3266366 \n\n  Initial states:\n     l[0]      b[0]\n 10.05414 0.2224818\n\n  sigma^2:  0.0041\n\n      AIC      AICc       BIC \n-76.98569 -75.83184 -66.68347"
  },
  {
    "objectID": "slides/8-ets_o.html#example-australian-population-24",
    "href": "slides/8-ets_o.html#example-australian-population-24",
    "title": "Chapter 8 ETS",
    "section": "Example: Australian population (2/4)",
    "text": "Example: Australian population (2/4)\n\ncomponents(fit) |&gt; autoplot()"
  },
  {
    "objectID": "slides/8-ets_o.html#example-australian-population-34",
    "href": "slides/8-ets_o.html#example-australian-population-34",
    "title": "Chapter 8 ETS",
    "section": "Example: Australian population (3/4)",
    "text": "Example: Australian population (3/4)\n\ncomponents(fit) |&gt;\n  left_join(fitted(fit), by = c(\"Country\", \".model\", \"Year\"))\n\n# A dable: 59 x 8 [1Y]\n# Key:     Country, .model [1]\n# :        Pop = lag(level, 1) + lag(slope, 1) + remainder\n   Country   .model  Year   Pop level slope remainder .fitted\n   &lt;fct&gt;     &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;\n 1 Australia AAN     1959  NA    10.1 0.222 NA           NA  \n 2 Australia AAN     1960  10.3  10.3 0.222 -0.000145    10.3\n 3 Australia AAN     1961  10.5  10.5 0.217 -0.0159      10.5\n 4 Australia AAN     1962  10.7  10.7 0.231  0.0418      10.7\n 5 Australia AAN     1963  11.0  11.0 0.223 -0.0229      11.0\n 6 Australia AAN     1964  11.2  11.2 0.221 -0.00641     11.2\n 7 Australia AAN     1965  11.4  11.4 0.221 -0.000314    11.4\n 8 Australia AAN     1966  11.7  11.7 0.235  0.0418      11.6\n 9 Australia AAN     1967  11.8  11.8 0.206 -0.0869      11.9\n10 Australia AAN     1968  12.0  12.0 0.208  0.00350     12.0\n# ℹ 49 more rows"
  },
  {
    "objectID": "slides/8-ets_o.html#example-australian-population-44",
    "href": "slides/8-ets_o.html#example-australian-population-44",
    "title": "Chapter 8 ETS",
    "section": "Example: Australian population (4/4)",
    "text": "Example: Australian population (4/4)\n\nfit |&gt;\n  forecast(h = 10) |&gt;\n  autoplot(aus_economy) +\n  labs(y = \"Millions\", title = \"Population: Australia\")"
  },
  {
    "objectID": "slides/8-ets_o.html#damped-trend-method",
    "href": "slides/8-ets_o.html#damped-trend-method",
    "title": "Chapter 8 ETS",
    "section": "Damped trend method",
    "text": "Damped trend method\nComponent form\n\\[\\begin{align*}\n\\hat{y}_{t+h|t} &= \\ell_{t} + (\\phi + \\phi^2 + \\dots + \\phi^{h})b_{t} \\\\\n\\ell_{t} &= \\alpha y_{t} + (1 - \\alpha)(\\ell_{t-1} + \\phi b_{t-1}) \\\\\nb_{t} &= \\beta^*(\\ell_{t} - \\ell_{t-1}) + (1 - \\beta^*)\\phi b_{t-1}\n\\end{align*}\\]\n\nDamping parameter \\(0&lt;\\phi&lt;1\\).\nIf \\(\\phi=1\\), identical to Holt’s linear trend.\nAs \\(h\\rightarrow\\infty\\), \\(\\hat{y}{T+h}{T}\\rightarrow \\ell_T+\\phi b_T/(1-\\phi)\\).\nShort-run forecasts trended, long-run forecasts constant."
  },
  {
    "objectID": "slides/8-ets_o.html#your-turn",
    "href": "slides/8-ets_o.html#your-turn",
    "title": "Chapter 8 ETS",
    "section": "Your turn",
    "text": "Your turn\nWrite down the model for ETS(A,\\(A_d\\),N)"
  },
  {
    "objectID": "slides/8-ets_o.html#example-australian-population-ct.-13",
    "href": "slides/8-ets_o.html#example-australian-population-ct.-13",
    "title": "Chapter 8 ETS",
    "section": "Example: Australian population ct. (1/3)",
    "text": "Example: Australian population ct. (1/3)\n\naus_economy |&gt;\n  model(holt = ETS(Pop ~ error(\"A\") + trend(\"Ad\") + season(\"N\"))) |&gt;\n  forecast(h = 20) |&gt;\n  autoplot(aus_economy)"
  },
  {
    "objectID": "slides/8-ets_o.html#example-australian-population-ct.-23",
    "href": "slides/8-ets_o.html#example-australian-population-ct.-23",
    "title": "Chapter 8 ETS",
    "section": "Example: Australian population ct. (2/3)",
    "text": "Example: Australian population ct. (2/3)\n\nfit &lt;- aus_economy |&gt;\n  filter(Year &lt;= 2010) |&gt;\n  model(\n    ses = ETS(Pop ~ error(\"A\") + trend(\"N\") + season(\"N\")),\n    holt = ETS(Pop ~ error(\"A\") + trend(\"A\") + season(\"N\")),\n    damped = ETS(Pop ~ error(\"A\") + trend(\"Ad\") + season(\"N\"))\n  )\n\n\ntidy(fit)\naccuracy(fit)"
  },
  {
    "objectID": "slides/8-ets_o.html#example-australian-population-ct.-33",
    "href": "slides/8-ets_o.html#example-australian-population-ct.-33",
    "title": "Chapter 8 ETS",
    "section": "Example: Australian population ct. (3/3)",
    "text": "Example: Australian population ct. (3/3)\n\n\n\n\n\nterm\nSES\nLinear trend\nDamped trend\n\n\n\n\n\\(\\alpha\\)\n1.00\n1.00\n1.00\n\n\n\\(\\beta^*\\)\n\n0.30\n0.40\n\n\n\\(\\phi\\)\n\n\n0.98\n\n\nNA\n\n0.22\n0.25\n\n\nNA\n10.28\n10.05\n10.04\n\n\nTraining RMSE\n0.24\n0.06\n0.07\n\n\nTest RMSE\n1.63\n0.15\n0.21\n\n\nTest MASE\n6.18\n0.55\n0.75\n\n\nTest MAPE\n6.09\n0.55\n0.74\n\n\nTest MAE\n1.45\n0.13\n0.18"
  },
  {
    "objectID": "slides/8-ets_o.html#your-turn-1",
    "href": "slides/8-ets_o.html#your-turn-1",
    "title": "Chapter 8 ETS",
    "section": "Your turn",
    "text": "Your turn\nprices contains the price of a dozen eggs in the United States from 1900–1993\n\nUse SES and Holt’s method (with and without damping) to forecast “future” data.\n\n\n\n\n\n\n\nTip\n\n\n\nUse h=100 so you can clearly see the differences between the options when plotting the forecasts.\n\n\n\nWhich method gives the best training RMSE?\nAre these RMSE values comparable?\nDo the residuals from the best fitting method look like white noise?"
  },
  {
    "objectID": "slides/8-ets_o.html#holt-winters-additive-method",
    "href": "slides/8-ets_o.html#holt-winters-additive-method",
    "title": "Chapter 8 ETS",
    "section": "Holt-Winters additive method",
    "text": "Holt-Winters additive method\nHolt and Winters extended Holt’s method to capture seasonality.\nComponent form\n\\[\\begin{align*}\n\\hat{y}_{t+h|t} &= \\ell_{t} + hb_{t} + s_{t+h-m(k+1)} \\\\\n\\ell_{t} &= \\alpha(y_{t} - s_{t-m}) + (1 - \\alpha)(\\ell_{t-1} + b_{t-1}) \\\\\nb_{t} &= \\beta^*(\\ell_{t} - \\ell_{t-1}) + (1 - \\beta^*)b_{t-1} \\\\\ns_{t} &= \\gamma (y_{t} - \\ell_{t-1} - b_{t-1}) + (1 - \\gamma)s_{t-m}\n\\end{align*}\\]\n\n\\(k=\\) integer part of \\((h-1)/m\\). Ensures estimates from the final year are used for forecasting.\nParameters:  \\(0\\le \\alpha\\le 1\\),  \\(0\\le \\beta^*\\le 1\\),  \\(0\\le \\gamma\\le 1-\\alpha\\)  and \\(m=\\) period of seasonality (e.g. \\(m=4\\) for quarterly data)."
  },
  {
    "objectID": "slides/8-ets_o.html#holt-winters-additive-method-1",
    "href": "slides/8-ets_o.html#holt-winters-additive-method-1",
    "title": "Chapter 8 ETS",
    "section": "Holt-Winters additive method",
    "text": "Holt-Winters additive method\n\nSeasonal component is usually expressed as \\(s_{t} = \\gamma^* (y_{t}-\\ell_{t})+ (1-\\gamma^*)s_{t-m}.\\)\nSubstitute in for \\(\\ell_t\\): \\(s_{t} = \\gamma^*(1-\\alpha) (y_{t}-\\ell_{t-1}-b_{t-1})+ [1-\\gamma^*(1-\\alpha)]s_{t-m}\\)\nWe set \\(\\gamma=\\gamma^*(1-\\alpha)\\).\nThe usual parameter restriction is \\(0\\le\\gamma^*\\le1\\), which translates to \\(0\\le\\gamma\\le(1-\\alpha)\\)."
  },
  {
    "objectID": "slides/8-ets_o.html#exponential-smoothing-seasonality",
    "href": "slides/8-ets_o.html#exponential-smoothing-seasonality",
    "title": "Chapter 8 ETS",
    "section": "Exponential smoothing: seasonality",
    "text": "Exponential smoothing: seasonality"
  },
  {
    "objectID": "slides/8-ets_o.html#etsaaa",
    "href": "slides/8-ets_o.html#etsaaa",
    "title": "Chapter 8 ETS",
    "section": "ETS(A,A,A)",
    "text": "ETS(A,A,A)\nHolt-Winters additive method with additive errors.\n\\[\\begin{array}{ll}\n\\text{Forecast equation} & \\hat{y}_{t+h|t} = \\ell_{t} + hb_{t} + s_{t+h-m(k+1)} \\\\\n\\text{Observation equation} & y_t = \\ell_{t-1} + b_{t-1} + s_{t-m} + \\varepsilon_t \\\\\n\\text{State equations} & \\ell_t = \\ell_{t-1} + b_{t-1} + \\alpha \\varepsilon_t \\\\\n& b_t = b_{t-1} + \\beta \\varepsilon_t \\\\\n& s_t = s_{t-m} + \\gamma \\varepsilon_t\n\\end{array}\\]\n\nForecast errors: \\(\\varepsilon_{t} = y_t - \\hat{y}_{t|t-1}\\)\n\\(k\\) is integer part of \\((h-1)/m\\)."
  },
  {
    "objectID": "slides/8-ets_o.html#your-turn-2",
    "href": "slides/8-ets_o.html#your-turn-2",
    "title": "Chapter 8 ETS",
    "section": "Your turn",
    "text": "Your turn\nWrite down the model for ETS(A,N,A)"
  },
  {
    "objectID": "slides/8-ets_o.html#holt-winters-multiplicative-method",
    "href": "slides/8-ets_o.html#holt-winters-multiplicative-method",
    "title": "Chapter 8 ETS",
    "section": "Holt-Winters multiplicative method",
    "text": "Holt-Winters multiplicative method\nSeasonal variations change in proportion to the level of the series.\nComponent form\n\\[\\begin{align*}\n\\hat{y}_{t+h|t} &= (\\ell_{t} + hb_{t})s_{t+h-m(k+1)} \\\\\n\\ell_{t} &= \\alpha \\frac{y_{t}}{s_{t-m}} + (1 - \\alpha)(\\ell_{t-1} + b_{t-1}) \\\\\nb_{t} &= \\beta^*(\\ell_{t} - \\ell_{t-1}) + (1 - \\beta^*)b_{t-1} \\\\\ns_{t} &= \\gamma \\frac{y_{t}}{(\\ell_{t-1} + b_{t-1})} + (1 - \\gamma)s_{t-m}\n\\end{align*}\\]\n\n\\(k\\) is integer part of \\((h-1)/m\\).\nAdditive method: \\(s_t\\) in absolute terms — within each year \\(\\sum_i s_i \\approx 0\\).\nMultiplicative method: \\(s_t\\) in relative terms — within each year \\(\\sum_i s_i \\approx m\\)."
  },
  {
    "objectID": "slides/8-ets_o.html#etsmam",
    "href": "slides/8-ets_o.html#etsmam",
    "title": "Chapter 8 ETS",
    "section": "ETS(M,A,M)",
    "text": "ETS(M,A,M)\nHolt-Winters multiplicative method with multiplicative errors.\n\\[\\begin{align*}\n\\text{Forecast equation} && \\hat{y}_{t+h|t} &= (\\ell_{t} + hb_{t}) s_{t+h-m(k+1)} \\\\\n\\text{Observation equation} && y_t &= (\\ell_{t-1} + b_{t-1})s_{t-m}(1 + \\varepsilon_t) \\\\\n\\text{State equations} && \\ell_t &= (\\ell_{t-1} + b_{t-1})(1 + \\alpha \\varepsilon_t) \\\\\n&& b_t &= b_{t-1} + \\beta(\\ell_{t-1} + b_{t-1}) \\varepsilon_t \\\\\n&& s_t &= s_{t-m}(1 + \\gamma \\varepsilon_t)\n\\end{align*}\\]\n\nForecast errors: \\(\\varepsilon_{t} = (y_t - \\hat{y}_{t|t-1})/\\hat{y}_{t|t-1}\\)\n\\(k\\) is integer part of \\((h-1)/m\\)."
  },
  {
    "objectID": "slides/8-ets_o.html#example-australian-holiday-tourism-12",
    "href": "slides/8-ets_o.html#example-australian-holiday-tourism-12",
    "title": "Chapter 8 ETS",
    "section": "Example: Australian holiday tourism (1/2)",
    "text": "Example: Australian holiday tourism (1/2)\n\naus_holidays &lt;- tourism |&gt;\n  filter(Purpose == \"Holiday\") |&gt;\n  summarise(Trips = sum(Trips))\nfit &lt;- aus_holidays |&gt;\n  model(\n    additive = ETS(Trips ~ error(\"A\") + trend(\"A\") + season(\"A\")),\n    multiplicative = ETS(Trips ~ error(\"M\") + trend(\"A\") + season(\"M\"))\n  )\nfc &lt;- fit |&gt; forecast()"
  },
  {
    "objectID": "slides/8-ets_o.html#example-australian-holiday-tourism-22",
    "href": "slides/8-ets_o.html#example-australian-holiday-tourism-22",
    "title": "Chapter 8 ETS",
    "section": "Example: Australian holiday tourism (2/2)",
    "text": "Example: Australian holiday tourism (2/2)\n\nfc |&gt;\n  autoplot(aus_holidays, level = NULL) +\n  labs(y = \"Thousands\", title = \"Overnight trips\")"
  },
  {
    "objectID": "slides/8-ets_o.html#estimated-components-12",
    "href": "slides/8-ets_o.html#estimated-components-12",
    "title": "Chapter 8 ETS",
    "section": "Estimated components (1/2)",
    "text": "Estimated components (1/2)\n\ncomponents(fit)\n\n# A dable: 168 x 7 [1Q]\n# Key:     .model [2]\n# :        Trips = lag(level, 1) + lag(slope, 1) + lag(season, 4) + remainder\n   .model   Quarter  Trips level slope season remainder\n   &lt;chr&gt;      &lt;qtr&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;     &lt;dbl&gt;\n 1 additive 1997 Q1    NA    NA   NA    1512.      NA  \n 2 additive 1997 Q2    NA    NA   NA    -290.      NA  \n 3 additive 1997 Q3    NA    NA   NA    -684.      NA  \n 4 additive 1997 Q4    NA  9899. -37.4  -538.      NA  \n 5 additive 1998 Q1 11806. 9964. -24.5  1512.     433. \n 6 additive 1998 Q2  9276. 9851. -35.6  -290.    -374. \n 7 additive 1998 Q3  8642. 9700. -50.2  -684.    -489. \n 8 additive 1998 Q4  9300. 9694. -44.6  -538.     188. \n 9 additive 1999 Q1 11172. 9652. -44.3  1512.      10.7\n10 additive 1999 Q2  9608. 9676. -35.6  -290.     290. \n# ℹ 158 more rows"
  },
  {
    "objectID": "slides/8-ets_o.html#estimated-components-22",
    "href": "slides/8-ets_o.html#estimated-components-22",
    "title": "Chapter 8 ETS",
    "section": "Estimated components (2/2)",
    "text": "Estimated components (2/2)\n\n\n\n\n\n\n\n\nFigure 1"
  },
  {
    "objectID": "slides/8-ets_o.html#holt-winters-damped-method",
    "href": "slides/8-ets_o.html#holt-winters-damped-method",
    "title": "Chapter 8 ETS",
    "section": "Holt-Winters damped method",
    "text": "Holt-Winters damped method\nOften the single most accurate forecasting method for seasonal data:\n\\[\\begin{align*}\n\\hat{y}_{t+h|t} &= [\\ell_{t} + (\\phi + \\phi^2 + \\dots + \\phi^{h})b_{t}]s_{t+h-m(k+1)} \\\\\n\\ell_{t} &= \\alpha \\left(\\frac{y_{t}}{s_{t-m}}\\right) + (1 - \\alpha)(\\ell_{t-1} + \\phi b_{t-1}) \\\\\nb_{t} &= \\beta^*(\\ell_{t} - \\ell_{t-1}) + (1 - \\beta^*)\\phi b_{t-1} \\\\\ns_{t} &= \\gamma \\left(\\frac{y_{t}}{(\\ell_{t-1} + \\phi b_{t-1})}\\right) + (1 - \\gamma)s_{t-m}\n\\end{align*}\\]"
  },
  {
    "objectID": "slides/8-ets_o.html#your-turn-3",
    "href": "slides/8-ets_o.html#your-turn-3",
    "title": "Chapter 8 ETS",
    "section": "Your turn",
    "text": "Your turn\nApply Holt-Winters’ multiplicative method to the Gas data from aus_production.\n\nWhy is multiplicative seasonality necessary here?\nExperiment with making the trend damped.\nCheck that the residuals from the best method look like white noise."
  },
  {
    "objectID": "slides/8-ets_o.html#holt-winters-with-daily-data",
    "href": "slides/8-ets_o.html#holt-winters-with-daily-data",
    "title": "Chapter 8 ETS",
    "section": "Holt-Winters with daily data",
    "text": "Holt-Winters with daily data\n\nsth_cross_ped &lt;- pedestrian |&gt;\n  filter(\n    Date &gt;= \"2016-07-01\",\n    Sensor == \"Southern Cross Station\"\n  ) |&gt;\n  index_by(Date) |&gt;\n  summarise(Count = sum(Count) / 1000)\nsth_cross_ped |&gt;\n  filter(Date &lt;= \"2016-07-31\") |&gt;\n  model(\n    hw = ETS(Count ~ error(\"M\") + trend(\"Ad\") + season(\"M\"))\n  ) |&gt;\n  forecast(h = \"2 weeks\") |&gt;\n  autoplot(sth_cross_ped |&gt; filter(Date &lt;= \"2016-08-14\")) +\n  labs(\n    title = \"Daily traffic: Southern Cross\",\n    y = \"Pedestrians ('000)\"\n  )"
  },
  {
    "objectID": "slides/8-ets_o.html#holt-winters-with-daily-data-1",
    "href": "slides/8-ets_o.html#holt-winters-with-daily-data-1",
    "title": "Chapter 8 ETS",
    "section": "Holt-Winters with daily data",
    "text": "Holt-Winters with daily data"
  },
  {
    "objectID": "slides/8-ets_o.html#exponential-smoothing-methods",
    "href": "slides/8-ets_o.html#exponential-smoothing-methods",
    "title": "Chapter 8 ETS",
    "section": "Exponential smoothing methods",
    "text": "Exponential smoothing methods\n\n\n\n\n\n\n\n\n\nTrend Component\nSeasonal\nComponent\n\n\n\n\n\n\nN (None)\nA (Additive)\nM (Multiplicative)\n\n\nN (None)\n(N,N)\n(N,A)\n(N,M)\n\n\nA (Additive)\n(A,N)\n(A,A)\n(A,M)\n\n\n\\(A_d\\) (Additive damped)\n(\\(A_d\\),N)\n(\\(A_d\\),A)\n(\\(A_d\\),M)"
  },
  {
    "objectID": "slides/8-ets_o.html#exponential-smoothing-methods-1",
    "href": "slides/8-ets_o.html#exponential-smoothing-methods-1",
    "title": "Chapter 8 ETS",
    "section": "Exponential smoothing methods",
    "text": "Exponential smoothing methods\n\n\n\nMethod\nDescription\n\n\n\n\n(N,N)\nSimple exponential smoothing\n\n\n(A,N)\nHolt’s linear method\n\n\n(\\(A_d\\),N)\nAdditive damped trend method\n\n\n(A,A)\nAdditive Holt-Winters’ method\n\n\n(A,M)\nMultiplicative Holt-Winters’ method\n\n\n(\\(A_d\\),M)\nDamped multiplicative Holt-Winters’ method\n\n\n\n. . .\nThere are also multiplicative trend methods (not recommended)."
  },
  {
    "objectID": "slides/8-ets_o.html#ets-models-1",
    "href": "slides/8-ets_o.html#ets-models-1",
    "title": "Chapter 8 ETS",
    "section": "ETS models",
    "text": "ETS models\nAdditive Error\n\n\n\n\n\n\n\n\n\nTrend Component\nSeasonal\nComponent\n\n\n\n\n\n\nN (None)\nA (Additive)\nM (Multiplicative)\n\n\nN (None)\nA,N,N\nA,N,A\nA,N,M\n\n\nA (Additive)\nA,A,N\nA,A,A\nA,A,M\n\n\n\\(A_d\\) (Additive damped)\nA,\\(A_d\\),N\nA,\\(A_d\\),A\nA,\\(A_d\\),M\n\n\n\n. . .\nMultiplicative Error\n\n\n\n\n\n\n\n\n\nTrend Component\nSeasonal\nComponent\n\n\n\n\n\n\nN (None)\nA (Additive)\nM (Multiplicative)\n\n\nN (None)\nM,N,N\nM,N,A\nM,N,M\n\n\nA (Additive)\nM,A,N\nM,A,A\nM,A,M\n\n\n\\(A_d\\) (Additive damped)\nM,\\(A_d\\),N\nM,\\(A_d\\),A\nM,\\(A_d\\),M"
  },
  {
    "objectID": "slides/8-ets_o.html#additive-error-models",
    "href": "slides/8-ets_o.html#additive-error-models",
    "title": "Chapter 8 ETS",
    "section": "Additive error models",
    "text": "Additive error models"
  },
  {
    "objectID": "slides/8-ets_o.html#multiplicative-error-models",
    "href": "slides/8-ets_o.html#multiplicative-error-models",
    "title": "Chapter 8 ETS",
    "section": "Multiplicative error models",
    "text": "Multiplicative error models"
  },
  {
    "objectID": "slides/8-ets_o.html#estimating-ets-models",
    "href": "slides/8-ets_o.html#estimating-ets-models",
    "title": "Chapter 8 ETS",
    "section": "Estimating ETS models",
    "text": "Estimating ETS models\n\nSmoothing parameters \\(\\alpha\\), \\(\\beta\\), \\(\\gamma\\) and \\(\\phi\\), and the initial states \\(\\ell_0\\), \\(b_0\\), \\(s_0,s_{-1},\\dots,s_{-m+1}\\) are estimated by maximizing the “likelihood” = the probability of the data arising from the specified model.\nFor models with additive errors equivalent to minimizing SSE.\nFor models with multiplicative errors, not equivalent to minimizing SSE."
  },
  {
    "objectID": "slides/8-ets_o.html#innovations-state-space-models-1",
    "href": "slides/8-ets_o.html#innovations-state-space-models-1",
    "title": "Chapter 8 ETS",
    "section": "Innovations state space models",
    "text": "Innovations state space models\nEstimation\n\\[L^*(\\theta,\\textbf{x}_0) = T\\log\\!\\left(\\sum_{t=1}^T \\varepsilon^2_t\\!\\right) + 2\\sum_{t=1}^T \\log|k(\\textbf{x}_{t-1})|\\]\n\\[= -2\\log(\\text{Likelihood}) + \\text{constant}\\]\n\nEstimate parameters \\(\\theta = (\\alpha,\\beta,\\gamma,\\phi)\\) and initial states \\(\\textbf{x}_0 = (\\ell_0,b_0,s_0,s_{-1},\\dots,s_{-m+1})\\) by minimizing \\(L^*\\)."
  },
  {
    "objectID": "slides/8-ets_o.html#parameter-restrictions",
    "href": "slides/8-ets_o.html#parameter-restrictions",
    "title": "Chapter 8 ETS",
    "section": "Parameter restrictions",
    "text": "Parameter restrictions\nUsual region\n\nTraditional restrictions in the methods \\(0&lt; \\alpha,\\beta^*,\\gamma^*,\\phi&lt;1\\)(equations interpreted as weighted averages).\nIn models we set \\(\\beta=\\alpha\\beta^*\\) and \\(\\gamma=(1-\\alpha)\\gamma^*\\).\nTherefore \\(0&lt; \\alpha &lt;1\\),    \\(0 &lt; \\beta &lt; \\alpha\\)    and \\(0&lt; \\gamma &lt; 1-\\alpha\\).\n\\(0.8&lt;\\phi&lt;0.98\\) — to prevent numerical difficulties.\n\nAdmissible region\n\nTo prevent observations in the distant past having a continuing effect on current forecasts.\nUsually (but not always) less restrictive than traditional region.\nFor example for ETS(A,N,N): traditional* \\(0&lt; \\alpha &lt;1\\) while admissible \\(0&lt; \\alpha &lt;2\\)."
  },
  {
    "objectID": "slides/8-ets_o.html#model-selection",
    "href": "slides/8-ets_o.html#model-selection",
    "title": "Chapter 8 ETS",
    "section": "Model selection",
    "text": "Model selection\nAkaike’s Information Criterion\n = -2() + 2k\nwhere \\(L\\) is the likelihood and \\(k\\) is the number of parameters initial states estimated in the model.\n. . .\nCorrected AIC\n\\[\\text{AIC}_{\\text{c}} = \\text{AIC} + \\frac{2k(k+1)}{T-k-1}\\]\nwhich is the AIC corrected (for small sample bias).\n. . .\nBayesian Information Criterion\n\\[\\text{BIC} = \\text{AIC} + k[\\log(T)-2].\\]"
  },
  {
    "objectID": "slides/8-ets_o.html#automatic-forecasting",
    "href": "slides/8-ets_o.html#automatic-forecasting",
    "title": "Chapter 8 ETS",
    "section": "Automatic forecasting",
    "text": "Automatic forecasting\nFrom Hyndman et al. (IJF, 2002):\n\nApply each model that is appropriate to the data. Optimize parameters and initial values using MLE (or some other criterion).\nSelect best method using AICc:\nProduce forecasts using best method.\nObtain forecast intervals using underlying state space model.\n\n. . .\n\n\n\n\n\n\nNote\n\n\n\nMethod performed very well in M3 competition."
  },
  {
    "objectID": "slides/8-ets_o.html#example-national-populations-12",
    "href": "slides/8-ets_o.html#example-national-populations-12",
    "title": "Chapter 8 ETS",
    "section": "Example: National populations (1/2)",
    "text": "Example: National populations (1/2)\n\nfit &lt;- global_economy |&gt;\n  mutate(Pop = Population / 1e6) |&gt;\n  model(ets = ETS(Pop))\nfit\n\n# A mable: 263 x 2\n# Key:     Country [263]\n   Country                      ets\n   &lt;fct&gt;                    &lt;model&gt;\n 1 Afghanistan         &lt;ETS(A,A,N)&gt;\n 2 Albania             &lt;ETS(M,A,N)&gt;\n 3 Algeria             &lt;ETS(M,A,N)&gt;\n 4 American Samoa      &lt;ETS(M,A,N)&gt;\n 5 Andorra             &lt;ETS(M,A,N)&gt;\n 6 Angola              &lt;ETS(M,A,N)&gt;\n 7 Antigua and Barbuda &lt;ETS(M,A,N)&gt;\n 8 Arab World          &lt;ETS(M,A,N)&gt;\n 9 Argentina           &lt;ETS(A,A,N)&gt;\n10 Armenia             &lt;ETS(M,A,N)&gt;\n# ℹ 253 more rows"
  },
  {
    "objectID": "slides/8-ets_o.html#example-national-populations-22",
    "href": "slides/8-ets_o.html#example-national-populations-22",
    "title": "Chapter 8 ETS",
    "section": "Example: National populations (2/2)",
    "text": "Example: National populations (2/2)\n\nfit |&gt;\n  forecast(h = 5)\n\n# A fable: 1,315 x 5 [1Y]\n# Key:     Country, .model [263]\n   Country  .model  Year             Pop\n   &lt;fct&gt;    &lt;chr&gt;  &lt;dbl&gt;          &lt;dist&gt;\n 1 Afghani… ets     2018    N(36, 0.012)\n 2 Afghani… ets     2019    N(37, 0.059)\n 3 Afghani… ets     2020     N(38, 0.16)\n 4 Afghani… ets     2021     N(39, 0.35)\n 5 Afghani… ets     2022     N(40, 0.64)\n 6 Albania  ets     2018 N(2.9, 0.00012)\n 7 Albania  ets     2019   N(2.9, 6e-04)\n 8 Albania  ets     2020  N(2.9, 0.0017)\n 9 Albania  ets     2021  N(2.9, 0.0036)\n10 Albania  ets     2022  N(2.9, 0.0066)\n# ℹ 1,305 more rows\n# ℹ 1 more variable: .mean &lt;dbl&gt;"
  },
  {
    "objectID": "slides/8-ets_o.html#example-australian-holiday-tourism-19",
    "href": "slides/8-ets_o.html#example-australian-holiday-tourism-19",
    "title": "Chapter 8 ETS",
    "section": "Example: Australian holiday tourism (1/9)",
    "text": "Example: Australian holiday tourism (1/9)\n\nholidays &lt;- tourism |&gt;\n  filter(Purpose == \"Holiday\")\nfit &lt;- holidays |&gt; model(ets = ETS(Trips))\nfit\n\n# A mable: 76 x 4\n# Key:     Region, State, Purpose [76]\n   Region                     State              Purpose          ets\n   &lt;chr&gt;                      &lt;chr&gt;              &lt;chr&gt;        &lt;model&gt;\n 1 Adelaide                   South Australia    Holiday &lt;ETS(A,N,A)&gt;\n 2 Adelaide Hills             South Australia    Holiday &lt;ETS(A,A,N)&gt;\n 3 Alice Springs              Northern Territory Holiday &lt;ETS(M,N,A)&gt;\n 4 Australia's Coral Coast    Western Australia  Holiday &lt;ETS(M,N,A)&gt;\n 5 Australia's Golden Outback Western Australia  Holiday &lt;ETS(M,N,M)&gt;\n 6 Australia's North West     Western Australia  Holiday &lt;ETS(A,N,A)&gt;\n 7 Australia's South West     Western Australia  Holiday &lt;ETS(M,N,M)&gt;\n 8 Ballarat                   Victoria           Holiday &lt;ETS(M,N,A)&gt;\n 9 Barkly                     Northern Territory Holiday &lt;ETS(A,N,A)&gt;\n10 Barossa                    South Australia    Holiday &lt;ETS(A,N,N)&gt;\n# ℹ 66 more rows"
  },
  {
    "objectID": "slides/8-ets_o.html#example-australian-holiday-tourism-29",
    "href": "slides/8-ets_o.html#example-australian-holiday-tourism-29",
    "title": "Chapter 8 ETS",
    "section": "Example: Australian holiday tourism (2/9)",
    "text": "Example: Australian holiday tourism (2/9)\n\nfit |&gt;\n  filter(Region == \"Snowy Mountains\") |&gt;\n  report()\n\nSeries: Trips \nModel: ETS(M,N,A) \n  Smoothing parameters:\n    alpha = 0.1571013 \n    gamma = 0.0001000991 \n\n  Initial states:\n     l[0]      s[0]    s[-1]     s[-2]     s[-3]\n 141.6782 -60.95904 130.8567 -42.23776 -27.65986\n\n  sigma^2:  0.0388\n\n     AIC     AICc      BIC \n852.0452 853.6008 868.7194"
  },
  {
    "objectID": "slides/8-ets_o.html#example-australian-holiday-tourism-39",
    "href": "slides/8-ets_o.html#example-australian-holiday-tourism-39",
    "title": "Chapter 8 ETS",
    "section": "Example: Australian holiday tourism (3/9)",
    "text": "Example: Australian holiday tourism (3/9)\n\nfit |&gt;\n  filter(Region == \"Snowy Mountains\") |&gt;\n  components(fit)\n\n# A dable: 84 x 9 [1Q]\n# Key:     Region, State, Purpose, .model [1]\n# :        Trips = (lag(level, 1) + lag(season, 4)) * (1 + remainder)\n   Region          State           Purpose .model Quarter Trips level season remainder\n   &lt;chr&gt;           &lt;chr&gt;           &lt;chr&gt;   &lt;chr&gt;    &lt;qtr&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;     &lt;dbl&gt;\n 1 Snowy Mountains New South Wales Holiday ets    1997 Q1  NA     NA   -27.7   NA     \n 2 Snowy Mountains New South Wales Holiday ets    1997 Q2  NA     NA   -42.2   NA     \n 3 Snowy Mountains New South Wales Holiday ets    1997 Q3  NA     NA   131.    NA     \n 4 Snowy Mountains New South Wales Holiday ets    1997 Q4  NA    142.  -61.0   NA     \n 5 Snowy Mountains New South Wales Holiday ets    1998 Q1 101.   140.  -27.7   -0.113 \n 6 Snowy Mountains New South Wales Holiday ets    1998 Q2 112.   142.  -42.2    0.154 \n 7 Snowy Mountains New South Wales Holiday ets    1998 Q3 310.   148.  131.     0.137 \n 8 Snowy Mountains New South Wales Holiday ets    1998 Q4  89.8  148.  -61.0    0.0335\n 9 Snowy Mountains New South Wales Holiday ets    1999 Q1 112.   147.  -27.7   -0.0687\n10 Snowy Mountains New South Wales Holiday ets    1999 Q2 103.   147.  -42.2   -0.0199\n# ℹ 74 more rows"
  },
  {
    "objectID": "slides/8-ets_o.html#example-australian-holiday-tourism-49",
    "href": "slides/8-ets_o.html#example-australian-holiday-tourism-49",
    "title": "Chapter 8 ETS",
    "section": "Example: Australian holiday tourism (4/9)",
    "text": "Example: Australian holiday tourism (4/9)\n\nfit |&gt;\n  filter(Region == \"Snowy Mountains\") |&gt;\n  components(fit) |&gt;\n  autoplot()"
  },
  {
    "objectID": "slides/8-ets_o.html#example-australian-holiday-tourism-59",
    "href": "slides/8-ets_o.html#example-australian-holiday-tourism-59",
    "title": "Chapter 8 ETS",
    "section": "Example: Australian holiday tourism (5/9)",
    "text": "Example: Australian holiday tourism (5/9)\n\nfit |&gt; forecast()\n\n# A fable: 608 x 7 [1Q]\n# Key:     Region, State, Purpose, .model [76]\n   Region         State           Purpose .model Quarter\n   &lt;chr&gt;          &lt;chr&gt;           &lt;chr&gt;   &lt;chr&gt;    &lt;qtr&gt;\n 1 Adelaide       South Australia Holiday ets    2018 Q1\n 2 Adelaide       South Australia Holiday ets    2018 Q2\n 3 Adelaide       South Australia Holiday ets    2018 Q3\n 4 Adelaide       South Australia Holiday ets    2018 Q4\n 5 Adelaide       South Australia Holiday ets    2019 Q1\n 6 Adelaide       South Australia Holiday ets    2019 Q2\n 7 Adelaide       South Australia Holiday ets    2019 Q3\n 8 Adelaide       South Australia Holiday ets    2019 Q4\n 9 Adelaide Hills South Australia Holiday ets    2018 Q1\n10 Adelaide Hills South Australia Holiday ets    2018 Q2\n# ℹ 598 more rows\n# ℹ 2 more variables: Trips &lt;dist&gt;, .mean &lt;dbl&gt;"
  },
  {
    "objectID": "slides/8-ets_o.html#example-australian-holiday-tourism-69",
    "href": "slides/8-ets_o.html#example-australian-holiday-tourism-69",
    "title": "Chapter 8 ETS",
    "section": "Example: Australian holiday tourism (6/9)",
    "text": "Example: Australian holiday tourism (6/9)\n\nfit |&gt; forecast() |&gt;\n  filter(Region == \"Snowy Mountains\") |&gt;\n  autoplot(holidays) +\n  labs(y = \"Thousands\", title = \"Overnight trips\")"
  },
  {
    "objectID": "slides/8-ets_o.html#residuals",
    "href": "slides/8-ets_o.html#residuals",
    "title": "Chapter 8 ETS",
    "section": "Residuals",
    "text": "Residuals\nResponse residuals \\[\\hat{e}_t = y_t - \\hat{y}_{t|t-1}\\]\n. . .\nInnovation residuals Additive error model: \\[\\hat\\varepsilon_t = y_t - \\hat{y}_{t|t-1}\\]\nMultiplicative error model: \\[\\hat\\varepsilon_t = \\frac{y_t - \\hat{y}_{t|t-1}}{\\hat{y}_{t|t-1}}\\]"
  },
  {
    "objectID": "slides/8-ets_o.html#example-australian-holiday-tourism-79",
    "href": "slides/8-ets_o.html#example-australian-holiday-tourism-79",
    "title": "Chapter 8 ETS",
    "section": "Example: Australian holiday tourism (7/9)",
    "text": "Example: Australian holiday tourism (7/9)\n\naus_holidays &lt;- tourism |&gt;\n  filter(Purpose == \"Holiday\") |&gt;\n  summarise(Trips = sum(Trips))\nfit &lt;- aus_holidays |&gt;\n  model(ets = ETS(Trips)) |&gt;\n  report()\n\nSeries: Trips \nModel: ETS(M,N,M) \n  Smoothing parameters:\n    alpha = 0.3578226 \n    gamma = 0.0009685565 \n\n  Initial states:\n     l[0]      s[0]     s[-1]    s[-2]    s[-3]\n 9666.501 0.9430367 0.9268433 0.968352 1.161768\n\n  sigma^2:  0.0022\n\n     AIC     AICc      BIC \n1331.372 1332.928 1348.046"
  },
  {
    "objectID": "slides/8-ets_o.html#example-australian-holiday-tourism-89",
    "href": "slides/8-ets_o.html#example-australian-holiday-tourism-89",
    "title": "Chapter 8 ETS",
    "section": "Example: Australian holiday tourism (8/9)",
    "text": "Example: Australian holiday tourism (8/9)\n\nCodePlot\n\n\n\nresiduals(fit)\nresiduals(fit, type = \"response\")\n\n\nbind_rows(\n  residuals(fit) |&gt; mutate(Type = \"Innovation residuals\") |&gt; as_tibble(),\n  residuals(fit, type = \"response\") |&gt; \n    mutate(Type = \"Response residuals\") |&gt; \n    as_tibble()) |&gt;\n  ggplot(aes(x = Quarter, y = .resid)) +\n  geom_line() +\n  facet_grid(Type ~ ., scales = \"free_y\") +\n  labs(y = \"\")"
  },
  {
    "objectID": "slides/8-ets_o.html#example-australian-holiday-tourism-99",
    "href": "slides/8-ets_o.html#example-australian-holiday-tourism-99",
    "title": "Chapter 8 ETS",
    "section": "Example: Australian holiday tourism (9/9)",
    "text": "Example: Australian holiday tourism (9/9)\n\nfit |&gt;\n  augment()\n\n# A tsibble: 80 x 6 [1Q]\n# Key:       .model [1]\n   .model Quarter  Trips .fitted .resid   .innov\n   &lt;chr&gt;    &lt;qtr&gt;  &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt;\n 1 ets    1998 Q1 11806.  11230.  576.   0.0513 \n 2 ets    1998 Q2  9276.   9532. -257.  -0.0269 \n 3 ets    1998 Q3  8642.   9036. -393.  -0.0435 \n 4 ets    1998 Q4  9300.   9050.  249.   0.0275 \n 5 ets    1999 Q1 11172.  11260.  -88.0 -0.00781\n 6 ets    1999 Q2  9608.   9358.  249.   0.0266 \n 7 ets    1999 Q3  8914.   9042. -129.  -0.0142 \n 8 ets    1999 Q4  9026.   9154. -129.  -0.0140 \n 9 ets    2000 Q1 11071.  11221. -150.  -0.0134 \n10 ets    2000 Q2  9196.   9308. -111.  -0.0120 \n# ℹ 70 more rows\n\n\n. . .\nInnovation residuals (.innov) are given by \\(\\hat{\\varepsilon}_t\\) while regular residuals (.resid) are \\(y_t - \\hat{y}_{t-1}\\). They are different when the model has multiplicative errors."
  },
  {
    "objectID": "slides/8-ets_o.html#some-unstable-models",
    "href": "slides/8-ets_o.html#some-unstable-models",
    "title": "Chapter 8 ETS",
    "section": "Some unstable models",
    "text": "Some unstable models\n\nSome of the combinations of (Error, Trend, Seasonal) can lead to numerical difficulties; see equations with division by a state.\nThese are: ETS(A,N,M), ETS(A,A,M), ETS(A,\\(A_d\\),M).\nModels with multiplicative errors are useful for strictly positive data, but are not numerically stable with data containing zeros or negative values. In that case only the six fully additive models will be applied."
  },
  {
    "objectID": "slides/8-ets_o.html#exponential-smoothing-models",
    "href": "slides/8-ets_o.html#exponential-smoothing-models",
    "title": "Chapter 8 ETS",
    "section": "Exponential smoothing models",
    "text": "Exponential smoothing models\nAdditive Error\n\n\n\n\n\n\n\n\n\nTrend\nN (None)\nA (Additive)\nM (Multiplicative)\n\n\n\n\nN (None)\nA,N,N\nA,N,A\nA,N,M\n\n\nA (Additive)\nA,A,N\nA,A,A\nA,A,M\n\n\n\\(A_d\\) (Additive damped)\nA,\\(A_d\\),N\nA,\\(A_d\\),A\nA,\\(A_d\\),M\n\n\n\nMultiplicative Error\n\n\n\n\n\n\n\n\n\nTrend\nN (None)\nA (Additive)\nM (Multiplicative)\n\n\n\n\nN (None)\nM,N,N\nM,N,A\nM,N,M\n\n\nA (Additive)\nM,A,N\nM,A,A\nM,A,M\n\n\n\\(A_d\\) (Additive damped)\nM,\\(A_d\\),N\nM,\\(A_d\\),A\nM,\\(A_d\\),M"
  },
  {
    "objectID": "slides/8-ets_o.html#forecasting-with-ets-models",
    "href": "slides/8-ets_o.html#forecasting-with-ets-models",
    "title": "Chapter 8 ETS",
    "section": "Forecasting with ETS models",
    "text": "Forecasting with ETS models\nTraditional point forecasts: iterate the equations for \\(t=T+1,T+2,\\dots,T+h\\) and set all \\(\\varepsilon_t=0\\) for \\(t&gt;T\\).\n\nNot the same as \\(\\text{E}(y_{t+h} | \\textbf{x}_t)\\) unless seasonality is additive.\nfable uses \\(\\text{E}(y_{t+h} | \\textbf{x}_t)\\).\nPoint forecasts for ETS(A,*,*) are identical to ETS(M,*,*) if the parameters are the same."
  },
  {
    "objectID": "slides/8-ets_o.html#forecasting-with-ets-models-1",
    "href": "slides/8-ets_o.html#forecasting-with-ets-models-1",
    "title": "Chapter 8 ETS",
    "section": "Forecasting with ETS models",
    "text": "Forecasting with ETS models\nPrediction intervals: can only be generated using the models.\n\nThe prediction intervals will differ between models with additive and multiplicative errors.\nExact formulae for some models.\nMore general to simulate future sample paths, conditional on the last estimate of the states, and to obtain prediction intervals from the percentiles of these simulated future paths."
  },
  {
    "objectID": "slides/8-ets_o.html#prediction-intervals",
    "href": "slides/8-ets_o.html#prediction-intervals",
    "title": "Chapter 8 ETS",
    "section": "Prediction intervals",
    "text": "Prediction intervals\nPI for most ETS models: \\(\\hat{y}_{T+h|T} \\pm c \\sigma_h\\), where \\(c\\) depends on coverage probability and \\(\\sigma_h\\) is forecast standard deviation.\nWe can see them in the book HERE."
  },
  {
    "objectID": "slides/8-ets_o.html#example-corticosteroid-drug-sales-15",
    "href": "slides/8-ets_o.html#example-corticosteroid-drug-sales-15",
    "title": "Chapter 8 ETS",
    "section": "Example: Corticosteroid drug sales (1/5)",
    "text": "Example: Corticosteroid drug sales (1/5)\n\nh02 &lt;- PBS |&gt;\n  filter(ATC2 == \"H02\") |&gt;\n  summarise(Cost = sum(Cost))\nh02 |&gt; autoplot(Cost)"
  },
  {
    "objectID": "slides/8-ets_o.html#example-corticosteroid-drug-sales-25",
    "href": "slides/8-ets_o.html#example-corticosteroid-drug-sales-25",
    "title": "Chapter 8 ETS",
    "section": "Example: Corticosteroid drug sales (2/5)",
    "text": "Example: Corticosteroid drug sales (2/5)\n\nh02 |&gt;\n  model(ETS(Cost)) |&gt;\n  report()\n\nSeries: Cost \nModel: ETS(M,Ad,M) \n  Smoothing parameters:\n    alpha = 0.3071016 \n    beta  = 0.0001006793 \n    gamma = 0.0001007181 \n    phi   = 0.977528 \n\n  Initial states:\n     l[0]    b[0]      s[0]     s[-1]     s[-2]     s[-3]     s[-4]    s[-5]    s[-6]\n 417268.7 8205.82 0.8716807 0.8259747 0.7562808 0.7733338 0.6872373 1.283821 1.324616\n    s[-7]    s[-8]    s[-9]   s[-10]    s[-11]\n 1.180067 1.163601 1.104801 1.047963 0.9806235\n\n  sigma^2:  0.0046\n\n     AIC     AICc      BIC \n5515.212 5518.909 5574.938"
  },
  {
    "objectID": "slides/8-ets_o.html#example-corticosteroid-drug-sales-35",
    "href": "slides/8-ets_o.html#example-corticosteroid-drug-sales-35",
    "title": "Chapter 8 ETS",
    "section": "Example: Corticosteroid drug sales (3/5)",
    "text": "Example: Corticosteroid drug sales (3/5)\n\nh02 |&gt;\n  model(ETS(Cost ~ error(\"A\") + trend(\"A\") + season(\"A\"))) |&gt;\n  report()\n\nSeries: Cost \nModel: ETS(A,A,A) \n  Smoothing parameters:\n    alpha = 0.1702163 \n    beta  = 0.006310854 \n    gamma = 0.4545987 \n\n  Initial states:\n     l[0]     b[0]      s[0]     s[-1]     s[-2]     s[-3]     s[-4]    s[-5]    s[-6]\n 409705.9 9097.111 -99075.37 -136602.3 -191496.1 -174530.8 -241436.7 210643.8 244644.2\n    s[-7]    s[-8]    s[-9]  s[-10]    s[-11]\n 145368.2 130569.6 84457.69 39131.7 -11673.71\n\n  sigma^2:  3498869384\n\n     AIC     AICc      BIC \n5585.278 5588.568 5641.686"
  },
  {
    "objectID": "slides/8-ets_o.html#example-corticosteroid-drug-sales-45",
    "href": "slides/8-ets_o.html#example-corticosteroid-drug-sales-45",
    "title": "Chapter 8 ETS",
    "section": "Example: Corticosteroid drug sales (4/5)",
    "text": "Example: Corticosteroid drug sales (4/5)\n\nh02 |&gt;\n  model(ETS(Cost)) |&gt;\n  forecast() |&gt;\n  autoplot(h02)"
  },
  {
    "objectID": "slides/8-ets_o.html#example-corticosteroid-drug-sales-55",
    "href": "slides/8-ets_o.html#example-corticosteroid-drug-sales-55",
    "title": "Chapter 8 ETS",
    "section": "Example: Corticosteroid drug sales (5/5)",
    "text": "Example: Corticosteroid drug sales (5/5)\n\nh02 |&gt;\n  model(\n    auto = ETS(Cost),\n    AAA = ETS(Cost ~ error(\"A\") + trend(\"A\") + season(\"A\"))\n  ) |&gt;\n  accuracy()\n\n\n\n\n\n\nModel\nMAE\nRMSE\nMAPE\nMASE\nRMSSE\n\n\n\n\nauto\n38649.04\n51102.24\n4.988983\n0.6375806\n0.6891173\n\n\nAAA\n43378.40\n56784.23\n6.047574\n0.7155993\n0.7657394"
  },
  {
    "objectID": "slides/8-ets_o.html#your-turn-4",
    "href": "slides/8-ets_o.html#your-turn-4",
    "title": "Chapter 8 ETS",
    "section": "Your turn",
    "text": "Your turn\n\nUse ETS() on some of these series:\n\n\ntourism, gafa_stock, pelt\n\n\nDoes it always give good forecasts?\nFind an example where it does not work well. Can you figure out why?"
  },
  {
    "objectID": "slides/8-ets.html#setup",
    "href": "slides/8-ets.html#setup",
    "title": "Chapter 8 ETS",
    "section": "Setup",
    "text": "Setup\n\nlibrary(patchwork) #only used for notes\nlibrary(gganimate) # only used for notes\nlibrary(purrr)\nlibrary(rlang)\nlibrary(magick)\nlibrary(fpp3)"
  },
  {
    "objectID": "slides/8-ets.html#historical-perspective",
    "href": "slides/8-ets.html#historical-perspective",
    "title": "Chapter 8 ETS",
    "section": "Historical perspective",
    "text": "Historical perspective\n\nDeveloped in the 1950s and 1960s as methods (algorithms) to produce point forecasts.\nCombine a “level”, “trend” (slope) and “seasonal” component to describe a time series.\nThe rate of change of the components are controlled by “smoothing parameters”: \\(\\alpha\\), \\(\\beta\\) and \\(\\gamma\\) respectively.\nNeed to choose best values for the smoothing parameters (and initial states).\nEquivalent ETS state space models developed in the 1990s and 2000s."
  },
  {
    "objectID": "slides/8-ets.html#big-idea-control-the-rate-of-change-12",
    "href": "slides/8-ets.html#big-idea-control-the-rate-of-change-12",
    "title": "Chapter 8 ETS",
    "section": "Big idea: control the rate of change (1/2)",
    "text": "Big idea: control the rate of change (1/2)\n\\(\\alpha\\) controls the flexibility of the level (Level - the average value for a specific time period)\n\nIf \\(\\alpha = 0\\), the level never updates (mean)\nIf \\(\\alpha = 1\\), the level updates completely (naive)\n\n\n\\(\\beta\\) controls the flexibility of the trend\n\nIf \\(\\beta = 0\\), the trend is linear\nIf \\(\\beta = 1\\), the trend changes suddenly every observation"
  },
  {
    "objectID": "slides/8-ets.html#big-idea-control-the-rate-of-change-22",
    "href": "slides/8-ets.html#big-idea-control-the-rate-of-change-22",
    "title": "Chapter 8 ETS",
    "section": "Big idea: control the rate of change (2/2)",
    "text": "Big idea: control the rate of change (2/2)\n\\(\\gamma\\) controls the flexibility of the seasonality\n\nIf \\(\\gamma = 0\\), the seasonality is fixed (seasonal means)\nIf \\(\\gamma = 1\\), the seasonality updates completely (seasonal naive)"
  },
  {
    "objectID": "slides/8-ets.html#a-model-for-levels-trends-and-seasonalities",
    "href": "slides/8-ets.html#a-model-for-levels-trends-and-seasonalities",
    "title": "Chapter 8 ETS",
    "section": "A model for levels, trends, and seasonalities",
    "text": "A model for levels, trends, and seasonalities\nWe want a model that captures the level (\\(\\ell_t\\)), trend (\\(b_t\\)) and seasonality (\\(s_t\\)).\n\nHow do we combine these elements?\n\n\nAdditively? \\[\ny_t = \\ell_{t-1} + b_{t-1} + s_{t-m} + \\varepsilon_t\n\\]\n\n\nMultiplicatively? \\[\ny_t = \\ell_{t-1}b_{t-1}s_{t-m}(1 + \\varepsilon_t)\n\\]\n\n\nPerhaps a mix of both? \\[\ny_t = (\\ell_{t-1} + b_{t-1}) s_{t-m} + \\varepsilon_t\n\\]\n\n\nHow do the level, trend and seasonal components evolve over time?"
  },
  {
    "objectID": "slides/8-ets.html#ets-models",
    "href": "slides/8-ets.html#ets-models",
    "title": "Chapter 8 ETS",
    "section": "ETS models",
    "text": "ETS models\nGeneral notation\n\n\n\n\n\n\n\n\n\nGeneral notation\n\nE T S\nExponenTial Smoothing\n\n\n\n\\(\\nearrow\\)\n\\(\\uparrow\\)\n\\(\\nwarrow\\)\n\n\nError\n\nTrend\nSeason\n\n\n\n\nError: Additive (A) or multiplicative (M)\nTrend: None (N), additive (A), multiplicative (M), or damped (\\(A_d\\) or \\(M_d\\)).\nSeasonality: None (N), additive (A) or multiplicative (M)"
  },
  {
    "objectID": "slides/8-ets.html#simple-methods",
    "href": "slides/8-ets.html#simple-methods",
    "title": "Chapter 8 ETS",
    "section": "Simple methods",
    "text": "Simple methods\nTime series \\(y_1, y_2, \\dots, y_T\\).\nNaive (Random walk forecasts)\n\\[\\hat{y}_{T+h|T} = y_T\\]\n\nAverage forecasts\n\\[\n\\hat{y}_{T+h|T} = \\frac{1}{T} \\sum_{t=1}^T y_t\n\\]\n\nWant something in between these methods.\nMost recent data should have more weight.\n\n\n\nSimple exponential smoothing uses a weighted moving average with weights that decrease exponentially."
  },
  {
    "objectID": "slides/8-ets.html#simple-exponential-smoothing-1",
    "href": "slides/8-ets.html#simple-exponential-smoothing-1",
    "title": "Chapter 8 ETS",
    "section": "Simple Exponential Smoothing",
    "text": "Simple Exponential Smoothing\nForecast equation\n\\[\n\\hat{y}_{T+1|T} = \\alpha y_T + \\alpha(1-\\alpha) y_{T-1} + \\alpha(1-\\alpha)^2 y_{T-2} + \\cdots\n\\]\nwhere \\(0 \\le \\alpha \\le 1\\).\n\nWeights assigned to observations for:\n\n\n\n\n\n\n\n\n\n\nObservation\n\\(\\alpha = 0.2\\)\n\\(\\alpha = 0.4\\)\n\\(\\alpha = 0.6\\)\n\\(\\alpha = 0.8\\)\n\n\n\n\n\\(y_{T}\\)\n0.2\n0.4\n0.6\n0.8\n\n\n\\(y_{T-1}\\)\n0.16\n0.24\n0.24\n0.16\n\n\n\\(y_{T-2}\\)\n0.128\n0.144\n0.096\n0.032\n\n\n\\(y_{T-3}\\)\n0.1024\n0.0864\n0.0384\n0.0064\n\n\n\\(y_{T-4}\\)\n\\((0.2)(0.8)^4\\)\n\\((0.4)(0.6)^4\\)\n\\((0.6)(0.4)^4\\)\n\\((0.8)(0.2)^4\\)\n\n\n\\(y_{T-5}\\)\n\\((0.2)(0.8)^5\\)\n\\((0.4)(0.6)^5\\)\n\\((0.6)(0.4)^5\\)\n\\((0.8)(0.2)^5\\)"
  },
  {
    "objectID": "slides/8-ets.html#simple-exponential-smoothing-2",
    "href": "slides/8-ets.html#simple-exponential-smoothing-2",
    "title": "Chapter 8 ETS",
    "section": "Simple Exponential Smoothing",
    "text": "Simple Exponential Smoothing\n\nalgeria_economy &lt;- global_economy |&gt;\n  filter(Country == \"Algeria\")"
  },
  {
    "objectID": "slides/8-ets.html#simple-exponential-smoothing-3",
    "href": "slides/8-ets.html#simple-exponential-smoothing-3",
    "title": "Chapter 8 ETS",
    "section": "Simple Exponential Smoothing",
    "text": "Simple Exponential Smoothing\nComponent form\n\\[\\begin{align*}\n\\text{Forecast equation} && \\hat{y}_{t+h|t} &= \\ell_{t} \\\\\n\\text{Smoothing equation} && \\ell_{t} &= \\alpha y_{t} + (1 - \\alpha)\\ell_{t-1}\n\\end{align*}\\]\n\n\\(\\ell_t\\) is the level (or the smoothed value) of the series at time t.\n\\(\\hat{y}_{t+1|t} = \\alpha y_t + (1-\\alpha) \\hat{y}_{t|t-1}\\)\nThe process has to start somewhere, so we let the first fitted value at time 1 be denoted by \\(\\ell_0\\) (which we will have to estimate) . . ."
  },
  {
    "objectID": "slides/8-ets.html#simple-exponential-smoothing-4",
    "href": "slides/8-ets.html#simple-exponential-smoothing-4",
    "title": "Chapter 8 ETS",
    "section": "Simple Exponential Smoothing",
    "text": "Simple Exponential Smoothing\nIterate to get exponentially weighted moving average form.\nWeighted average form\n\\[\n\\hat{y}_{T+1|T} = \\sum_{j=0}^{T-1} \\alpha(1-\\alpha)^j y_{T-j} + (1-\\alpha)^T \\ell_{0}\n\\]"
  },
  {
    "objectID": "slides/8-ets.html#optimizing-smoothing-parameters",
    "href": "slides/8-ets.html#optimizing-smoothing-parameters",
    "title": "Chapter 8 ETS",
    "section": "Optimizing smoothing parameters",
    "text": "Optimizing smoothing parameters\n\nNeed to choose best values for \\(\\alpha\\) and \\(\\ell_0\\).\nSimilarly to regression, choose optimal parameters by minimizing SSE:\n\n\n\\[\n  \\text{SSE}=\\sum_{t=1}^T(y_t - \\hat{y}{t}{t-1})^2.\n\\]\n\nUnlike regression there is no closed form solution — use numerical optimization.\n\n\nFor Algerian Exports example:\n\n\\(\\hat\\alpha = 0.8400\\)\n\\(\\hat\\ell_0 = 39.54\\)"
  },
  {
    "objectID": "slides/8-ets.html#simple-exponential-smoothing-5",
    "href": "slides/8-ets.html#simple-exponential-smoothing-5",
    "title": "Chapter 8 ETS",
    "section": "Simple Exponential Smoothing",
    "text": "Simple Exponential Smoothing"
  },
  {
    "objectID": "slides/8-ets.html#models-and-methods",
    "href": "slides/8-ets.html#models-and-methods",
    "title": "Chapter 8 ETS",
    "section": "Models and methods",
    "text": "Models and methods\nMethods\n\nAlgorithms that return point forecasts.\n\n\nModels\n\nGenerate same point forecasts but can also generate forecast distributions.\nA stochastic (or random) data generating process that can generate an entire forecast distribution.\nAllow for “proper” model selection."
  },
  {
    "objectID": "slides/8-ets.html#etsann-ses-with-additive-errors",
    "href": "slides/8-ets.html#etsann-ses-with-additive-errors",
    "title": "Chapter 8 ETS",
    "section": "ETS(A,N,N): SES with additive errors",
    "text": "ETS(A,N,N): SES with additive errors\nComponent form\n\\[\\begin{align*}\n\\text{Forecast equation} && \\hat{y}_{t+h|t} &= \\ell_{t} \\\\\n\\text{Smoothing equation} && \\ell_{t} &= \\alpha y_{t} + (1 - \\alpha)\\ell_{t-1}\n\\end{align*}\\]\nForecast error: \\(e_t = y_t - \\hat{y}_{t|t-1} = y_t - \\ell_{t-1}\\).\nError correction form\n\\[\\begin{align*}\ny_t &= \\ell_{t-1} + e_t \\\\\n\\ell_{t} &= \\ell_{t-1} + \\alpha (y_t - \\ell_{t-1}) \\\\\n         &= \\ell_{t-1} + \\alpha e_t\n\\end{align*}\\]\nSpecify probability distribution for \\(e_t\\), we assume \\(e_t = \\varepsilon_t \\sim \\text{NID}(0, \\sigma^2)\\)."
  },
  {
    "objectID": "slides/8-ets.html#etsann-ses-with-additive-errors-1",
    "href": "slides/8-ets.html#etsann-ses-with-additive-errors-1",
    "title": "Chapter 8 ETS",
    "section": "ETS(A,N,N): SES with additive errors",
    "text": "ETS(A,N,N): SES with additive errors\n\\[\\begin{align*}\n\\text{Measurement equation} && y_t &= \\ell_{t-1} + \\varepsilon_t \\\\\n\\text{State equation} && \\ell_t &= \\ell_{t-1} + \\alpha \\varepsilon_t\n\\end{align*}\\]\nwhere \\(\\varepsilon_t \\sim \\text{NID}(0, \\sigma^2)\\).\n\n“Innovations” or “single source of error” because equations have the same error process, \\(\\varepsilon_t\\).\nMeasurement equation: relationship between observations and states.\nState equation(s): evolution of the state(s) through time."
  },
  {
    "objectID": "slides/8-ets.html#etsmnn-ses-with-multiplicative-errors",
    "href": "slides/8-ets.html#etsmnn-ses-with-multiplicative-errors",
    "title": "Chapter 8 ETS",
    "section": "ETS(M,N,N): SES with multiplicative errors",
    "text": "ETS(M,N,N): SES with multiplicative errors\n\nSpecify relative errors \\(\\varepsilon_t = \\frac{y_t - \\hat{y}_{t|t-1}}{\\hat{y}_{t|t-1}} \\sim \\text{NID}(0, \\sigma^2)\\)\nSubstituting \\(\\hat{y}_{t|t-1} = \\ell_{t-1}\\) gives:\n\n\\(y_t = \\ell_{t-1} + \\ell_{t-1} \\varepsilon_t\\)\n\\(e_t = y_t - \\hat{y}_{t|t-1} = \\ell_{t-1} \\varepsilon_t\\) . . ."
  },
  {
    "objectID": "slides/8-ets.html#etsmnn-ses-with-multiplicative-errors-1",
    "href": "slides/8-ets.html#etsmnn-ses-with-multiplicative-errors-1",
    "title": "Chapter 8 ETS",
    "section": "ETS(M,N,N): SES with multiplicative errors",
    "text": "ETS(M,N,N): SES with multiplicative errors\nMeasurement equation\n\\[\\begin{align*}\n\\text{Measurement equation} && y_t &= \\ell_{t-1} (1 + \\varepsilon_t) \\\\\n\\text{State equation} && \\ell_t &= \\ell_{t-1} (1 + \\alpha \\varepsilon_t)\n\\end{align*}\\]\n\nModels with additive and multiplicative errors with the same parameters generate the same point forecasts but different prediction intervals."
  },
  {
    "objectID": "slides/8-ets.html#etsann-specifying-the-model",
    "href": "slides/8-ets.html#etsann-specifying-the-model",
    "title": "Chapter 8 ETS",
    "section": "ETS(A,N,N): Specifying the model",
    "text": "ETS(A,N,N): Specifying the model\n\nETS(y ~ error(\"A\") + trend(\"N\") + season(\"N\"))\n\nBy default, an optimal value for \\(\\alpha\\) and \\(\\ell_0\\) is used.\n\\(\\alpha\\) can be chosen manually in trend().\n\ntrend(\"N\", alpha = 0.5)\ntrend(\"N\", alpha_range = c(0.2, 0.8))"
  },
  {
    "objectID": "slides/8-ets.html#example-algerian-exports-14",
    "href": "slides/8-ets.html#example-algerian-exports-14",
    "title": "Chapter 8 ETS",
    "section": "Example: Algerian Exports (1/4)",
    "text": "Example: Algerian Exports (1/4)\n\nalgeria_economy &lt;- global_economy |&gt;\n  filter(Country == \"Algeria\")\nfit &lt;- algeria_economy |&gt;\n  model(ANN = ETS(Exports ~ error(\"A\") + trend(\"N\") + season(\"N\")))\nreport(fit)\n\nSeries: Exports \nModel: ETS(A,N,N) \n  Smoothing parameters:\n    alpha = 0.8399875 \n\n  Initial states:\n   l[0]\n 39.539\n\n  sigma^2:  35.6301\n\n     AIC     AICc      BIC \n446.7154 447.1599 452.8968"
  },
  {
    "objectID": "slides/8-ets.html#example-algerian-exports-24",
    "href": "slides/8-ets.html#example-algerian-exports-24",
    "title": "Chapter 8 ETS",
    "section": "Example: Algerian Exports (2/4)",
    "text": "Example: Algerian Exports (2/4)\n\ncomponents(fit) |&gt; autoplot()"
  },
  {
    "objectID": "slides/8-ets.html#example-algerian-exports-34",
    "href": "slides/8-ets.html#example-algerian-exports-34",
    "title": "Chapter 8 ETS",
    "section": "Example: Algerian Exports (3/4)",
    "text": "Example: Algerian Exports (3/4)\n\ncomponents(fit) |&gt;\n  left_join(fitted(fit), by = c(\"Country\", \".model\", \"Year\"))\n\n# A dable: 59 x 7 [1Y]\n# Key:     Country, .model [1]\n# :        Exports = lag(level, 1) + remainder\n   Country .model  Year Exports level remainder .fitted\n   &lt;fct&gt;   &lt;chr&gt;  &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;\n 1 Algeria ANN     1959    NA    39.5    NA        NA  \n 2 Algeria ANN     1960    39.0  39.1    -0.496    39.5\n 3 Algeria ANN     1961    46.2  45.1     7.12     39.1\n 4 Algeria ANN     1962    19.8  23.8   -25.3      45.1\n 5 Algeria ANN     1963    24.7  24.6     0.841    23.8\n 6 Algeria ANN     1964    25.1  25.0     0.534    24.6\n 7 Algeria ANN     1965    22.6  23.0    -2.39     25.0\n 8 Algeria ANN     1966    26.0  25.5     3.00     23.0\n 9 Algeria ANN     1967    23.4  23.8    -2.07     25.5\n10 Algeria ANN     1968    23.1  23.2    -0.630    23.8\n# ℹ 49 more rows"
  },
  {
    "objectID": "slides/8-ets.html#example-algerian-exports-44",
    "href": "slides/8-ets.html#example-algerian-exports-44",
    "title": "Chapter 8 ETS",
    "section": "Example: Algerian Exports (4/4)",
    "text": "Example: Algerian Exports (4/4)\n\nfit |&gt;\n  forecast(h = 5) |&gt;\n  autoplot(algeria_economy) +\n  labs(y = \"% of GDP\", title = \"Exports: Algeria\")"
  },
  {
    "objectID": "slides/8-ets.html#holts-linear-trend",
    "href": "slides/8-ets.html#holts-linear-trend",
    "title": "Chapter 8 ETS",
    "section": "Holt’s linear trend",
    "text": "Holt’s linear trend\nComponent form\n\\[\\begin{align*}\n\\text{Forecast} && \\hat{y}_{t+h|t} &= \\ell_{t} + hb_{t} \\\\\n\\text{Level} && \\ell_{t} &= \\alpha y_{t} + (1 - \\alpha)(\\ell_{t-1} + b_{t-1}) \\\\\n\\text{Trend} && b_{t} &= \\beta^*(\\ell_{t} - \\ell_{t-1}) + (1 - \\beta^*)b_{t-1}\n\\end{align*}\\]\n\nTwo smoothing parameters \\(\\alpha\\) and \\(\\beta^*\\) (\\(0 \\le \\alpha, \\beta^* \\le 1\\)).\n\\(\\ell_t\\) level: weighted average between \\(y_t\\) and one-step ahead forecast for time \\(t\\), \\((\\ell_{t-1} + b_{t-1} = \\hat{y}_{t|t-1})\\)\n\\(b_t\\) slope: weighted average of \\((\\ell_{t} - \\ell_{t-1})\\) and \\(b_{t-1}\\), current and previous estimate of slope.\nChoose \\(\\alpha, \\beta^*, \\ell_0, b_0\\) to minimize SSE."
  },
  {
    "objectID": "slides/8-ets.html#etsaan",
    "href": "slides/8-ets.html#etsaan",
    "title": "Chapter 8 ETS",
    "section": "ETS(A,A,N)",
    "text": "ETS(A,A,N)\nHolt’s linear method with additive errors.\n\nAssume \\(\\varepsilon_t = y_t - \\ell_{t-1} - b_{t-1} \\sim \\text{NID}(0, \\sigma^2)\\).\nSubstituting into the error correction equations for Holt’s linear method:\n\n\n\\[\\begin{align*}\ny_t &= \\ell_{t-1} + b_{t-1} + \\varepsilon_t \\\\\n\\ell_t &= \\ell_{t-1} + b_{t-1} + \\alpha \\varepsilon_t \\\\\nb_t &= b_{t-1} + \\alpha \\beta^* \\varepsilon_t\n\\end{align*}\\]\n\nFor simplicity, set \\(\\beta = \\alpha \\beta^*\\)."
  },
  {
    "objectID": "slides/8-ets.html#exponential-smoothing-trendslope",
    "href": "slides/8-ets.html#exponential-smoothing-trendslope",
    "title": "Chapter 8 ETS",
    "section": "Exponential smoothing: trend/slope",
    "text": "Exponential smoothing: trend/slope"
  },
  {
    "objectID": "slides/8-ets.html#etsman",
    "href": "slides/8-ets.html#etsman",
    "title": "Chapter 8 ETS",
    "section": "ETS(M,A,N)",
    "text": "ETS(M,A,N)\nHolt’s linear method with multiplicative errors.\n\nAssume \\(\\varepsilon_t=\\frac{y_t-(\\ell_{t-1}+b_{t-1})}{(\\ell_{t-1}+b_{t-1})}\\)\nFollowing a similar approach as above, the innovations state space model underlying Holt’s linear method with multiplicative errors is specified as\n\n\n\\[\\begin{align*}\n    y_t&=(\\ell_{t-1}+b_{t-1})(1+\\varepsilon_t)\\\\\n    \\ell_t&=(\\ell_{t-1}+b_{t-1})(1+\\alpha \\varepsilon_t)\\\\\n    b_t&=b_{t-1}+\\beta(\\ell_{t-1}+b_{t-1}) \\varepsilon_t\n\\end{align*}\\]\nwhere again \\(\\beta=\\alpha \\beta^*\\) and \\(\\varepsilon_t \\sim \\text{NID}(0,\\sigma^2)\\)."
  },
  {
    "objectID": "slides/8-ets.html#etsaan-specifying-the-model",
    "href": "slides/8-ets.html#etsaan-specifying-the-model",
    "title": "Chapter 8 ETS",
    "section": "ETS(A,A,N): Specifying the model",
    "text": "ETS(A,A,N): Specifying the model\n\nETS(y ~ error(\"A\") + trend(\"A\") + season(\"N\"))\n\n\nBy default, optimal values for \\(\\beta\\) and \\(b_0\\) are used.\n\\(\\beta\\) can be chosen manually in trend().\n\ntrend(\"A\", beta = 0.004)\ntrend(\"A\", beta_range = c(0, 0.1))"
  },
  {
    "objectID": "slides/8-ets.html#example-australian-population-14",
    "href": "slides/8-ets.html#example-australian-population-14",
    "title": "Chapter 8 ETS",
    "section": "Example: Australian population (1/4)",
    "text": "Example: Australian population (1/4)\n\naus_economy &lt;- global_economy |&gt; filter(Code == \"AUS\") |&gt;\n  mutate(Pop = Population / 1e6)\nfit &lt;- aus_economy |&gt;\n  model(AAN = ETS(Pop ~ error(\"A\") + trend(\"A\") + season(\"N\")))\nreport(fit)\n\nSeries: Pop \nModel: ETS(A,A,N) \n  Smoothing parameters:\n    alpha = 0.9999 \n    beta  = 0.3266366 \n\n  Initial states:\n     l[0]      b[0]\n 10.05414 0.2224818\n\n  sigma^2:  0.0041\n\n      AIC      AICc       BIC \n-76.98569 -75.83184 -66.68347"
  },
  {
    "objectID": "slides/8-ets.html#example-australian-population-24",
    "href": "slides/8-ets.html#example-australian-population-24",
    "title": "Chapter 8 ETS",
    "section": "Example: Australian population (2/4)",
    "text": "Example: Australian population (2/4)\n\ncomponents(fit) |&gt; autoplot()"
  },
  {
    "objectID": "slides/8-ets.html#example-australian-population-34",
    "href": "slides/8-ets.html#example-australian-population-34",
    "title": "Chapter 8 ETS",
    "section": "Example: Australian population (3/4)",
    "text": "Example: Australian population (3/4)\n\ncomponents(fit) |&gt;\n  left_join(fitted(fit), by = c(\"Country\", \".model\", \"Year\"))\n\n# A dable: 59 x 8 [1Y]\n# Key:     Country, .model [1]\n# :        Pop = lag(level, 1) + lag(slope, 1) + remainder\n   Country   .model  Year   Pop level slope remainder .fitted\n   &lt;fct&gt;     &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;\n 1 Australia AAN     1959  NA    10.1 0.222 NA           NA  \n 2 Australia AAN     1960  10.3  10.3 0.222 -0.000145    10.3\n 3 Australia AAN     1961  10.5  10.5 0.217 -0.0159      10.5\n 4 Australia AAN     1962  10.7  10.7 0.231  0.0418      10.7\n 5 Australia AAN     1963  11.0  11.0 0.223 -0.0229      11.0\n 6 Australia AAN     1964  11.2  11.2 0.221 -0.00641     11.2\n 7 Australia AAN     1965  11.4  11.4 0.221 -0.000314    11.4\n 8 Australia AAN     1966  11.7  11.7 0.235  0.0418      11.6\n 9 Australia AAN     1967  11.8  11.8 0.206 -0.0869      11.9\n10 Australia AAN     1968  12.0  12.0 0.208  0.00350     12.0\n# ℹ 49 more rows"
  },
  {
    "objectID": "slides/8-ets.html#example-australian-population-44",
    "href": "slides/8-ets.html#example-australian-population-44",
    "title": "Chapter 8 ETS",
    "section": "Example: Australian population (4/4)",
    "text": "Example: Australian population (4/4)\n\nfit |&gt;\n  forecast(h = 10) |&gt;\n  autoplot(aus_economy) +\n  labs(y = \"Millions\", title = \"Population: Australia\")"
  },
  {
    "objectID": "slides/8-ets.html#damped-trend-method",
    "href": "slides/8-ets.html#damped-trend-method",
    "title": "Chapter 8 ETS",
    "section": "Damped trend method",
    "text": "Damped trend method\nComponent form\n\\[\\begin{align*}\n\\hat{y}_{t+h|t} &= \\ell_{t} + (\\phi + \\phi^2 + \\dots + \\phi^{h})b_{t} \\\\\n\\ell_{t} &= \\alpha y_{t} + (1 - \\alpha)(\\ell_{t-1} + \\phi b_{t-1}) \\\\\nb_{t} &= \\beta^*(\\ell_{t} - \\ell_{t-1}) + (1 - \\beta^*)\\phi b_{t-1}\n\\end{align*}\\]\n\nDamping parameter \\(0&lt;\\phi&lt;1\\).\nIf \\(\\phi=1\\), identical to Holt’s linear trend.\nAs \\(h\\rightarrow\\infty\\), \\(\\hat{y}{T+h}{T}\\rightarrow \\ell_T+\\phi b_T/(1-\\phi)\\).\nShort-run forecasts trended, long-run forecasts constant."
  },
  {
    "objectID": "slides/8-ets.html#your-turn",
    "href": "slides/8-ets.html#your-turn",
    "title": "Chapter 8 ETS",
    "section": "Your turn",
    "text": "Your turn\nWrite down the model for ETS(A,\\(A_d\\),N)"
  },
  {
    "objectID": "slides/8-ets.html#example-australian-population-ct.-13",
    "href": "slides/8-ets.html#example-australian-population-ct.-13",
    "title": "Chapter 8 ETS",
    "section": "Example: Australian population ct. (1/3)",
    "text": "Example: Australian population ct. (1/3)\n\naus_economy |&gt;\n  model(holt = ETS(Pop ~ error(\"A\") + trend(\"Ad\") + season(\"N\"))) |&gt;\n  forecast(h = 20) |&gt;\n  autoplot(aus_economy)"
  },
  {
    "objectID": "slides/8-ets.html#example-australian-population-ct.-23",
    "href": "slides/8-ets.html#example-australian-population-ct.-23",
    "title": "Chapter 8 ETS",
    "section": "Example: Australian population ct. (2/3)",
    "text": "Example: Australian population ct. (2/3)\n\nfit &lt;- aus_economy |&gt;\n  filter(Year &lt;= 2010) |&gt;\n  model(\n    ses = ETS(Pop ~ error(\"A\") + trend(\"N\") + season(\"N\")),\n    holt = ETS(Pop ~ error(\"A\") + trend(\"A\") + season(\"N\")),\n    damped = ETS(Pop ~ error(\"A\") + trend(\"Ad\") + season(\"N\"))\n  )\n\n\ntidy(fit)\naccuracy(fit)"
  },
  {
    "objectID": "slides/8-ets.html#example-australian-population-ct.-33",
    "href": "slides/8-ets.html#example-australian-population-ct.-33",
    "title": "Chapter 8 ETS",
    "section": "Example: Australian population ct. (3/3)",
    "text": "Example: Australian population ct. (3/3)\n\n\n\n\n\nterm\nSES\nLinear trend\nDamped trend\n\n\n\n\n\\(\\alpha\\)\n1.00\n1.00\n1.00\n\n\n\\(\\beta^*\\)\n\n0.30\n0.40\n\n\n\\(\\phi\\)\n\n\n0.98\n\n\nNA\n\n0.22\n0.25\n\n\nNA\n10.28\n10.05\n10.04\n\n\nTraining RMSE\n0.24\n0.06\n0.07\n\n\nTest RMSE\n1.63\n0.15\n0.21\n\n\nTest MASE\n6.18\n0.55\n0.75\n\n\nTest MAPE\n6.09\n0.55\n0.74\n\n\nTest MAE\n1.45\n0.13\n0.18"
  },
  {
    "objectID": "slides/8-ets.html#your-turn-1",
    "href": "slides/8-ets.html#your-turn-1",
    "title": "Chapter 8 ETS",
    "section": "Your turn",
    "text": "Your turn\nprices contains the price of a dozen eggs in the United States from 1900–1993\n\nUse SES and Holt’s method (with and without damping) to forecast “future” data.\n\n\n\n\n\n\n\nTip\n\n\nUse h=100 so you can clearly see the differences between the options when plotting the forecasts.\n\n\n\n\nWhich method gives the best training RMSE?\nAre these RMSE values comparable?\nDo the residuals from the best fitting method look like white noise?"
  },
  {
    "objectID": "slides/8-ets.html#holt-winters-additive-method",
    "href": "slides/8-ets.html#holt-winters-additive-method",
    "title": "Chapter 8 ETS",
    "section": "Holt-Winters additive method",
    "text": "Holt-Winters additive method\nHolt and Winters extended Holt’s method to capture seasonality.\nComponent form\n\\[\\begin{align*}\n\\hat{y}_{t+h|t} &= \\ell_{t} + hb_{t} + s_{t+h-m(k+1)} \\\\\n\\ell_{t} &= \\alpha(y_{t} - s_{t-m}) + (1 - \\alpha)(\\ell_{t-1} + b_{t-1}) \\\\\nb_{t} &= \\beta^*(\\ell_{t} - \\ell_{t-1}) + (1 - \\beta^*)b_{t-1} \\\\\ns_{t} &= \\gamma (y_{t} - \\ell_{t-1} - b_{t-1}) + (1 - \\gamma)s_{t-m}\n\\end{align*}\\]\n\n\\(k=\\) integer part of \\((h-1)/m\\). Ensures estimates from the final year are used for forecasting.\nParameters:  \\(0\\le \\alpha\\le 1\\),  \\(0\\le \\beta^*\\le 1\\),  \\(0\\le \\gamma\\le 1-\\alpha\\)  and \\(m=\\) period of seasonality (e.g. \\(m=4\\) for quarterly data)."
  },
  {
    "objectID": "slides/8-ets.html#holt-winters-additive-method-1",
    "href": "slides/8-ets.html#holt-winters-additive-method-1",
    "title": "Chapter 8 ETS",
    "section": "Holt-Winters additive method",
    "text": "Holt-Winters additive method\n\nSeasonal component is usually expressed as \\(s_{t} = \\gamma^* (y_{t}-\\ell_{t})+ (1-\\gamma^*)s_{t-m}.\\)\nSubstitute in for \\(\\ell_t\\): \\(s_{t} = \\gamma^*(1-\\alpha) (y_{t}-\\ell_{t-1}-b_{t-1})+ [1-\\gamma^*(1-\\alpha)]s_{t-m}\\)\nWe set \\(\\gamma=\\gamma^*(1-\\alpha)\\).\nThe usual parameter restriction is \\(0\\le\\gamma^*\\le1\\), which translates to \\(0\\le\\gamma\\le(1-\\alpha)\\)."
  },
  {
    "objectID": "slides/8-ets.html#exponential-smoothing-seasonality",
    "href": "slides/8-ets.html#exponential-smoothing-seasonality",
    "title": "Chapter 8 ETS",
    "section": "Exponential smoothing: seasonality",
    "text": "Exponential smoothing: seasonality"
  },
  {
    "objectID": "slides/8-ets.html#etsaaa",
    "href": "slides/8-ets.html#etsaaa",
    "title": "Chapter 8 ETS",
    "section": "ETS(A,A,A)",
    "text": "ETS(A,A,A)\nHolt-Winters additive method with additive errors.\n\\[\\begin{array}{ll}\n\\text{Forecast equation} & \\hat{y}_{t+h|t} = \\ell_{t} + hb_{t} + s_{t+h-m(k+1)} \\\\\n\\text{Observation equation} & y_t = \\ell_{t-1} + b_{t-1} + s_{t-m} + \\varepsilon_t \\\\\n\\text{State equations} & \\ell_t = \\ell_{t-1} + b_{t-1} + \\alpha \\varepsilon_t \\\\\n& b_t = b_{t-1} + \\beta \\varepsilon_t \\\\\n& s_t = s_{t-m} + \\gamma \\varepsilon_t\n\\end{array}\\]\n\nForecast errors: \\(\\varepsilon_{t} = y_t - \\hat{y}_{t|t-1}\\)\n\\(k\\) is integer part of \\((h-1)/m\\)."
  },
  {
    "objectID": "slides/8-ets.html#your-turn-2",
    "href": "slides/8-ets.html#your-turn-2",
    "title": "Chapter 8 ETS",
    "section": "Your turn",
    "text": "Your turn\nWrite down the model for ETS(A,N,A)"
  },
  {
    "objectID": "slides/8-ets.html#holt-winters-multiplicative-method",
    "href": "slides/8-ets.html#holt-winters-multiplicative-method",
    "title": "Chapter 8 ETS",
    "section": "Holt-Winters multiplicative method",
    "text": "Holt-Winters multiplicative method\nSeasonal variations change in proportion to the level of the series.\nComponent form\n\\[\\begin{align*}\n\\hat{y}_{t+h|t} &= (\\ell_{t} + hb_{t})s_{t+h-m(k+1)} \\\\\n\\ell_{t} &= \\alpha \\frac{y_{t}}{s_{t-m}} + (1 - \\alpha)(\\ell_{t-1} + b_{t-1}) \\\\\nb_{t} &= \\beta^*(\\ell_{t} - \\ell_{t-1}) + (1 - \\beta^*)b_{t-1} \\\\\ns_{t} &= \\gamma \\frac{y_{t}}{(\\ell_{t-1} + b_{t-1})} + (1 - \\gamma)s_{t-m}\n\\end{align*}\\]\n\n\\(k\\) is integer part of \\((h-1)/m\\).\nAdditive method: \\(s_t\\) in absolute terms — within each year \\(\\sum_i s_i \\approx 0\\).\nMultiplicative method: \\(s_t\\) in relative terms — within each year \\(\\sum_i s_i \\approx m\\)."
  },
  {
    "objectID": "slides/8-ets.html#etsmam",
    "href": "slides/8-ets.html#etsmam",
    "title": "Chapter 8 ETS",
    "section": "ETS(M,A,M)",
    "text": "ETS(M,A,M)\nHolt-Winters multiplicative method with multiplicative errors.\n\\[\\begin{align*}\n\\text{Forecast equation} && \\hat{y}_{t+h|t} &= (\\ell_{t} + hb_{t}) s_{t+h-m(k+1)} \\\\\n\\text{Observation equation} && y_t &= (\\ell_{t-1} + b_{t-1})s_{t-m}(1 + \\varepsilon_t) \\\\\n\\text{State equations} && \\ell_t &= (\\ell_{t-1} + b_{t-1})(1 + \\alpha \\varepsilon_t) \\\\\n&& b_t &= b_{t-1} + \\beta(\\ell_{t-1} + b_{t-1}) \\varepsilon_t \\\\\n&& s_t &= s_{t-m}(1 + \\gamma \\varepsilon_t)\n\\end{align*}\\]\n\nForecast errors: \\(\\varepsilon_{t} = (y_t - \\hat{y}_{t|t-1})/\\hat{y}_{t|t-1}\\)\n\\(k\\) is integer part of \\((h-1)/m\\)."
  },
  {
    "objectID": "slides/8-ets.html#example-australian-holiday-tourism-12",
    "href": "slides/8-ets.html#example-australian-holiday-tourism-12",
    "title": "Chapter 8 ETS",
    "section": "Example: Australian holiday tourism (1/2)",
    "text": "Example: Australian holiday tourism (1/2)\n\naus_holidays &lt;- tourism |&gt;\n  filter(Purpose == \"Holiday\") |&gt;\n  summarise(Trips = sum(Trips))\nfit &lt;- aus_holidays |&gt;\n  model(\n    additive = ETS(Trips ~ error(\"A\") + trend(\"A\") + season(\"A\")),\n    multiplicative = ETS(Trips ~ error(\"M\") + trend(\"A\") + season(\"M\"))\n  )\nfc &lt;- fit |&gt; forecast()"
  },
  {
    "objectID": "slides/8-ets.html#example-australian-holiday-tourism-22",
    "href": "slides/8-ets.html#example-australian-holiday-tourism-22",
    "title": "Chapter 8 ETS",
    "section": "Example: Australian holiday tourism (2/2)",
    "text": "Example: Australian holiday tourism (2/2)\n\nfc |&gt;\n  autoplot(aus_holidays, level = NULL) +\n  labs(y = \"Thousands\", title = \"Overnight trips\")"
  },
  {
    "objectID": "slides/8-ets.html#estimated-components-12",
    "href": "slides/8-ets.html#estimated-components-12",
    "title": "Chapter 8 ETS",
    "section": "Estimated components (1/2)",
    "text": "Estimated components (1/2)\n\ncomponents(fit)\n\n# A dable: 168 x 7 [1Q]\n# Key:     .model [2]\n# :        Trips = lag(level, 1) + lag(slope, 1) + lag(season, 4) + remainder\n   .model   Quarter  Trips level slope season remainder\n   &lt;chr&gt;      &lt;qtr&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;     &lt;dbl&gt;\n 1 additive 1997 Q1    NA    NA   NA    1512.      NA  \n 2 additive 1997 Q2    NA    NA   NA    -290.      NA  \n 3 additive 1997 Q3    NA    NA   NA    -684.      NA  \n 4 additive 1997 Q4    NA  9899. -37.4  -538.      NA  \n 5 additive 1998 Q1 11806. 9964. -24.5  1512.     433. \n 6 additive 1998 Q2  9276. 9851. -35.6  -290.    -374. \n 7 additive 1998 Q3  8642. 9700. -50.2  -684.    -489. \n 8 additive 1998 Q4  9300. 9694. -44.6  -538.     188. \n 9 additive 1999 Q1 11172. 9652. -44.3  1512.      10.7\n10 additive 1999 Q2  9608. 9676. -35.6  -290.     290. \n# ℹ 158 more rows"
  },
  {
    "objectID": "slides/8-ets.html#estimated-components-22",
    "href": "slides/8-ets.html#estimated-components-22",
    "title": "Chapter 8 ETS",
    "section": "Estimated components (2/2)",
    "text": "Estimated components (2/2)\n\n\nFigure 1"
  },
  {
    "objectID": "slides/8-ets.html#holt-winters-damped-method",
    "href": "slides/8-ets.html#holt-winters-damped-method",
    "title": "Chapter 8 ETS",
    "section": "Holt-Winters damped method",
    "text": "Holt-Winters damped method\nOften the single most accurate forecasting method for seasonal data:\n\\[\\begin{align*}\n\\hat{y}_{t+h|t} &= [\\ell_{t} + (\\phi + \\phi^2 + \\dots + \\phi^{h})b_{t}]s_{t+h-m(k+1)} \\\\\n\\ell_{t} &= \\alpha \\left(\\frac{y_{t}}{s_{t-m}}\\right) + (1 - \\alpha)(\\ell_{t-1} + \\phi b_{t-1}) \\\\\nb_{t} &= \\beta^*(\\ell_{t} - \\ell_{t-1}) + (1 - \\beta^*)\\phi b_{t-1} \\\\\ns_{t} &= \\gamma \\left(\\frac{y_{t}}{(\\ell_{t-1} + \\phi b_{t-1})}\\right) + (1 - \\gamma)s_{t-m}\n\\end{align*}\\]"
  },
  {
    "objectID": "slides/8-ets.html#your-turn-3",
    "href": "slides/8-ets.html#your-turn-3",
    "title": "Chapter 8 ETS",
    "section": "Your turn",
    "text": "Your turn\nApply Holt-Winters’ multiplicative method to the Gas data from aus_production.\n\nWhy is multiplicative seasonality necessary here?\nExperiment with making the trend damped.\nCheck that the residuals from the best method look like white noise."
  },
  {
    "objectID": "slides/8-ets.html#holt-winters-with-daily-data",
    "href": "slides/8-ets.html#holt-winters-with-daily-data",
    "title": "Chapter 8 ETS",
    "section": "Holt-Winters with daily data",
    "text": "Holt-Winters with daily data\n\nsth_cross_ped &lt;- pedestrian |&gt;\n  filter(\n    Date &gt;= \"2016-07-01\",\n    Sensor == \"Southern Cross Station\"\n  ) |&gt;\n  index_by(Date) |&gt;\n  summarise(Count = sum(Count) / 1000)\nsth_cross_ped |&gt;\n  filter(Date &lt;= \"2016-07-31\") |&gt;\n  model(\n    hw = ETS(Count ~ error(\"M\") + trend(\"Ad\") + season(\"M\"))\n  ) |&gt;\n  forecast(h = \"2 weeks\") |&gt;\n  autoplot(sth_cross_ped |&gt; filter(Date &lt;= \"2016-08-14\")) +\n  labs(\n    title = \"Daily traffic: Southern Cross\",\n    y = \"Pedestrians ('000)\"\n  )"
  },
  {
    "objectID": "slides/8-ets.html#holt-winters-with-daily-data-1",
    "href": "slides/8-ets.html#holt-winters-with-daily-data-1",
    "title": "Chapter 8 ETS",
    "section": "Holt-Winters with daily data",
    "text": "Holt-Winters with daily data"
  },
  {
    "objectID": "slides/8-ets.html#exponential-smoothing-methods",
    "href": "slides/8-ets.html#exponential-smoothing-methods",
    "title": "Chapter 8 ETS",
    "section": "Exponential smoothing methods",
    "text": "Exponential smoothing methods\n\n\n\n\n\n\n\n\n\nTrend Component\nSeasonal\nComponent\n\n\n\n\n\n\nN (None)\nA (Additive)\nM (Multiplicative)\n\n\nN (None)\n(N,N)\n(N,A)\n(N,M)\n\n\nA (Additive)\n(A,N)\n(A,A)\n(A,M)\n\n\n\\(A_d\\) (Additive damped)\n(\\(A_d\\),N)\n(\\(A_d\\),A)\n(\\(A_d\\),M)"
  },
  {
    "objectID": "slides/8-ets.html#exponential-smoothing-methods-1",
    "href": "slides/8-ets.html#exponential-smoothing-methods-1",
    "title": "Chapter 8 ETS",
    "section": "Exponential smoothing methods",
    "text": "Exponential smoothing methods\n\n\n\nMethod\nDescription\n\n\n\n\n(N,N)\nSimple exponential smoothing\n\n\n(A,N)\nHolt’s linear method\n\n\n(\\(A_d\\),N)\nAdditive damped trend method\n\n\n(A,A)\nAdditive Holt-Winters’ method\n\n\n(A,M)\nMultiplicative Holt-Winters’ method\n\n\n(\\(A_d\\),M)\nDamped multiplicative Holt-Winters’ method"
  },
  {
    "objectID": "slides/8-ets.html#ets-models-1",
    "href": "slides/8-ets.html#ets-models-1",
    "title": "Chapter 8 ETS",
    "section": "ETS models",
    "text": "ETS models\nAdditive Error\n\n\n\n\n\n\n\n\n\nTrend Component\nSeasonal\nComponent\n\n\n\n\n\n\nN (None)\nA (Additive)\nM (Multiplicative)\n\n\nN (None)\nA,N,N\nA,N,A\nA,N,M\n\n\nA (Additive)\nA,A,N\nA,A,A\nA,A,M\n\n\n\\(A_d\\) (Additive damped)\nA,\\(A_d\\),N\nA,\\(A_d\\),A\nA,\\(A_d\\),M\n\n\n\n\nMultiplicative Error\n\n\n\n\n\n\n\n\n\nTrend Component\nSeasonal\nComponent\n\n\n\n\n\n\nN (None)\nA (Additive)\nM (Multiplicative)\n\n\nN (None)\nM,N,N\nM,N,A\nM,N,M\n\n\nA (Additive)\nM,A,N\nM,A,A\nM,A,M\n\n\n\\(A_d\\) (Additive damped)\nM,\\(A_d\\),N\nM,\\(A_d\\),A\nM,\\(A_d\\),M"
  },
  {
    "objectID": "slides/8-ets.html#additive-error-models",
    "href": "slides/8-ets.html#additive-error-models",
    "title": "Chapter 8 ETS",
    "section": "Additive error models",
    "text": "Additive error models"
  },
  {
    "objectID": "slides/8-ets.html#multiplicative-error-models",
    "href": "slides/8-ets.html#multiplicative-error-models",
    "title": "Chapter 8 ETS",
    "section": "Multiplicative error models",
    "text": "Multiplicative error models"
  },
  {
    "objectID": "slides/8-ets.html#estimating-ets-models",
    "href": "slides/8-ets.html#estimating-ets-models",
    "title": "Chapter 8 ETS",
    "section": "Estimating ETS models",
    "text": "Estimating ETS models\n\nSmoothing parameters \\(\\alpha\\), \\(\\beta\\), \\(\\gamma\\) and \\(\\phi\\), and the initial states \\(\\ell_0\\), \\(b_0\\), \\(s_0,s_{-1},\\dots,s_{-m+1}\\) are estimated by maximizing the “likelihood” = the probability of the data arising from the specified model.\nFor models with additive errors equivalent to minimizing SSE.\nFor models with multiplicative errors, not equivalent to minimizing SSE."
  },
  {
    "objectID": "slides/8-ets.html#innovations-state-space-models-1",
    "href": "slides/8-ets.html#innovations-state-space-models-1",
    "title": "Chapter 8 ETS",
    "section": "Innovations state space models",
    "text": "Innovations state space models\nEstimation\n\\[L^*(\\theta,\\textbf{x}_0) = T\\log\\!\\left(\\sum_{t=1}^T \\varepsilon^2_t\\!\\right) + 2\\sum_{t=1}^T \\log|k(\\textbf{x}_{t-1})|\\]\n\\[= -2\\log(\\text{Likelihood}) + \\text{constant}\\]\n\nEstimate parameters \\(\\theta = (\\alpha,\\beta,\\gamma,\\phi)\\) and initial states \\(\\textbf{x}_0 = (\\ell_0,b_0,s_0,s_{-1},\\dots,s_{-m+1})\\) by minimizing \\(L^*\\)."
  },
  {
    "objectID": "slides/8-ets.html#parameter-restrictions",
    "href": "slides/8-ets.html#parameter-restrictions",
    "title": "Chapter 8 ETS",
    "section": "Parameter restrictions",
    "text": "Parameter restrictions\nUsual region\n\nTraditional restrictions in the methods \\(0&lt; \\alpha,\\beta^*,\\gamma^*,\\phi&lt;1\\)(equations interpreted as weighted averages).\nIn models we set \\(\\beta=\\alpha\\beta^*\\) and \\(\\gamma=(1-\\alpha)\\gamma^*\\).\nTherefore \\(0&lt; \\alpha &lt;1\\),    \\(0 &lt; \\beta &lt; \\alpha\\)    and \\(0&lt; \\gamma &lt; 1-\\alpha\\).\n\\(0.8&lt;\\phi&lt;0.98\\) — to prevent numerical difficulties.\n\n\nAdmissible region\n\nTo prevent observations in the distant past having a continuing effect on current forecasts.\nUsually (but not always) less restrictive than traditional region.\nFor example for ETS(A,N,N): traditional* \\(0&lt; \\alpha &lt;1\\) while admissible \\(0&lt; \\alpha &lt;2\\)."
  },
  {
    "objectID": "slides/8-ets.html#model-selection",
    "href": "slides/8-ets.html#model-selection",
    "title": "Chapter 8 ETS",
    "section": "Model selection",
    "text": "Model selection\nAkaike’s Information Criterion\n\\[AIC = -2\\log(\\text{L}) + 2k\\]\nwhere \\(L\\) is the likelihood and \\(k\\) is the number of parameters initial states estimated in the model.\n\nCorrected AIC\n\\[\\text{AIC}_{\\text{c}} = \\text{AIC} + \\frac{2k(k+1)}{T-k-1}\\]\nwhich is the AIC corrected (for small sample bias).\n\n\nBayesian Information Criterion\n\\[\\text{BIC} = \\text{AIC} + k[\\log(T)-2].\\]"
  },
  {
    "objectID": "slides/8-ets.html#automatic-forecasting",
    "href": "slides/8-ets.html#automatic-forecasting",
    "title": "Chapter 8 ETS",
    "section": "Automatic forecasting",
    "text": "Automatic forecasting\nFrom Hyndman et al. (IJF, 2002):\n\nApply each model that is appropriate to the data. Optimize parameters and initial values using MLE (or some other criterion).\nSelect best method using AICc:\nProduce forecasts using best method.\nObtain forecast intervals using underlying state space model.\n\n\n\n\n\n\n\n\nNote\n\n\nMethod performed very well in M3 competition."
  },
  {
    "objectID": "slides/8-ets.html#example-national-populations-12",
    "href": "slides/8-ets.html#example-national-populations-12",
    "title": "Chapter 8 ETS",
    "section": "Example: National populations (1/2)",
    "text": "Example: National populations (1/2)\n\nfit &lt;- global_economy |&gt;\n  mutate(Pop = Population / 1e6) |&gt;\n  model(ets = ETS(Pop))\nfit\n\n# A mable: 263 x 2\n# Key:     Country [263]\n   Country                      ets\n   &lt;fct&gt;                    &lt;model&gt;\n 1 Afghanistan         &lt;ETS(A,A,N)&gt;\n 2 Albania             &lt;ETS(M,A,N)&gt;\n 3 Algeria             &lt;ETS(M,A,N)&gt;\n 4 American Samoa      &lt;ETS(M,A,N)&gt;\n 5 Andorra             &lt;ETS(M,A,N)&gt;\n 6 Angola              &lt;ETS(M,A,N)&gt;\n 7 Antigua and Barbuda &lt;ETS(M,A,N)&gt;\n 8 Arab World          &lt;ETS(M,A,N)&gt;\n 9 Argentina           &lt;ETS(A,A,N)&gt;\n10 Armenia             &lt;ETS(M,A,N)&gt;\n# ℹ 253 more rows"
  },
  {
    "objectID": "slides/8-ets.html#example-national-populations-22",
    "href": "slides/8-ets.html#example-national-populations-22",
    "title": "Chapter 8 ETS",
    "section": "Example: National populations (2/2)",
    "text": "Example: National populations (2/2)\n\nfit |&gt;\n  forecast(h = 5)\n\n# A fable: 1,315 x 5 [1Y]\n# Key:     Country, .model [263]\n   Country  .model  Year             Pop\n   &lt;fct&gt;    &lt;chr&gt;  &lt;dbl&gt;          &lt;dist&gt;\n 1 Afghani… ets     2018    N(36, 0.012)\n 2 Afghani… ets     2019    N(37, 0.059)\n 3 Afghani… ets     2020     N(38, 0.16)\n 4 Afghani… ets     2021     N(39, 0.35)\n 5 Afghani… ets     2022     N(40, 0.64)\n 6 Albania  ets     2018 N(2.9, 0.00012)\n 7 Albania  ets     2019   N(2.9, 6e-04)\n 8 Albania  ets     2020  N(2.9, 0.0017)\n 9 Albania  ets     2021  N(2.9, 0.0036)\n10 Albania  ets     2022  N(2.9, 0.0066)\n# ℹ 1,305 more rows\n# ℹ 1 more variable: .mean &lt;dbl&gt;"
  },
  {
    "objectID": "slides/8-ets.html#example-australian-holiday-tourism-19",
    "href": "slides/8-ets.html#example-australian-holiday-tourism-19",
    "title": "Chapter 8 ETS",
    "section": "Example: Australian holiday tourism (1/9)",
    "text": "Example: Australian holiday tourism (1/9)\n\nholidays &lt;- tourism |&gt;\n  filter(Purpose == \"Holiday\")\nfit &lt;- holidays |&gt; model(ets = ETS(Trips))\nfit\n\n# A mable: 76 x 4\n# Key:     Region, State, Purpose [76]\n   Region                     State              Purpose          ets\n   &lt;chr&gt;                      &lt;chr&gt;              &lt;chr&gt;        &lt;model&gt;\n 1 Adelaide                   South Australia    Holiday &lt;ETS(A,N,A)&gt;\n 2 Adelaide Hills             South Australia    Holiday &lt;ETS(A,A,N)&gt;\n 3 Alice Springs              Northern Territory Holiday &lt;ETS(M,N,A)&gt;\n 4 Australia's Coral Coast    Western Australia  Holiday &lt;ETS(M,N,A)&gt;\n 5 Australia's Golden Outback Western Australia  Holiday &lt;ETS(M,N,M)&gt;\n 6 Australia's North West     Western Australia  Holiday &lt;ETS(A,N,A)&gt;\n 7 Australia's South West     Western Australia  Holiday &lt;ETS(M,N,M)&gt;\n 8 Ballarat                   Victoria           Holiday &lt;ETS(M,N,A)&gt;\n 9 Barkly                     Northern Territory Holiday &lt;ETS(A,N,A)&gt;\n10 Barossa                    South Australia    Holiday &lt;ETS(A,N,N)&gt;\n# ℹ 66 more rows"
  },
  {
    "objectID": "slides/8-ets.html#example-australian-holiday-tourism-29",
    "href": "slides/8-ets.html#example-australian-holiday-tourism-29",
    "title": "Chapter 8 ETS",
    "section": "Example: Australian holiday tourism (2/9)",
    "text": "Example: Australian holiday tourism (2/9)\n\nfit |&gt;\n  filter(Region == \"Snowy Mountains\") |&gt;\n  report()\n\nSeries: Trips \nModel: ETS(M,N,A) \n  Smoothing parameters:\n    alpha = 0.1571013 \n    gamma = 0.0001000991 \n\n  Initial states:\n     l[0]      s[0]    s[-1]     s[-2]     s[-3]\n 141.6782 -60.95904 130.8567 -42.23776 -27.65986\n\n  sigma^2:  0.0388\n\n     AIC     AICc      BIC \n852.0452 853.6008 868.7194"
  },
  {
    "objectID": "slides/8-ets.html#example-australian-holiday-tourism-39",
    "href": "slides/8-ets.html#example-australian-holiday-tourism-39",
    "title": "Chapter 8 ETS",
    "section": "Example: Australian holiday tourism (3/9)",
    "text": "Example: Australian holiday tourism (3/9)\n\nfit |&gt;\n  filter(Region == \"Snowy Mountains\") |&gt;\n  components(fit)\n\n# A dable: 84 x 9 [1Q]\n# Key:     Region, State, Purpose, .model [1]\n# :        Trips = (lag(level, 1) + lag(season, 4)) * (1 + remainder)\n   Region          State           Purpose .model Quarter Trips level season remainder\n   &lt;chr&gt;           &lt;chr&gt;           &lt;chr&gt;   &lt;chr&gt;    &lt;qtr&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;     &lt;dbl&gt;\n 1 Snowy Mountains New South Wales Holiday ets    1997 Q1  NA     NA   -27.7   NA     \n 2 Snowy Mountains New South Wales Holiday ets    1997 Q2  NA     NA   -42.2   NA     \n 3 Snowy Mountains New South Wales Holiday ets    1997 Q3  NA     NA   131.    NA     \n 4 Snowy Mountains New South Wales Holiday ets    1997 Q4  NA    142.  -61.0   NA     \n 5 Snowy Mountains New South Wales Holiday ets    1998 Q1 101.   140.  -27.7   -0.113 \n 6 Snowy Mountains New South Wales Holiday ets    1998 Q2 112.   142.  -42.2    0.154 \n 7 Snowy Mountains New South Wales Holiday ets    1998 Q3 310.   148.  131.     0.137 \n 8 Snowy Mountains New South Wales Holiday ets    1998 Q4  89.8  148.  -61.0    0.0335\n 9 Snowy Mountains New South Wales Holiday ets    1999 Q1 112.   147.  -27.7   -0.0687\n10 Snowy Mountains New South Wales Holiday ets    1999 Q2 103.   147.  -42.2   -0.0199\n# ℹ 74 more rows"
  },
  {
    "objectID": "slides/8-ets.html#example-australian-holiday-tourism-49",
    "href": "slides/8-ets.html#example-australian-holiday-tourism-49",
    "title": "Chapter 8 ETS",
    "section": "Example: Australian holiday tourism (4/9)",
    "text": "Example: Australian holiday tourism (4/9)\n\nfit |&gt;\n  filter(Region == \"Snowy Mountains\") |&gt;\n  components(fit) |&gt;\n  autoplot()"
  },
  {
    "objectID": "slides/8-ets.html#example-australian-holiday-tourism-59",
    "href": "slides/8-ets.html#example-australian-holiday-tourism-59",
    "title": "Chapter 8 ETS",
    "section": "Example: Australian holiday tourism (5/9)",
    "text": "Example: Australian holiday tourism (5/9)\n\nfit |&gt; forecast()\n\n# A fable: 608 x 7 [1Q]\n# Key:     Region, State, Purpose, .model [76]\n   Region         State           Purpose .model Quarter\n   &lt;chr&gt;          &lt;chr&gt;           &lt;chr&gt;   &lt;chr&gt;    &lt;qtr&gt;\n 1 Adelaide       South Australia Holiday ets    2018 Q1\n 2 Adelaide       South Australia Holiday ets    2018 Q2\n 3 Adelaide       South Australia Holiday ets    2018 Q3\n 4 Adelaide       South Australia Holiday ets    2018 Q4\n 5 Adelaide       South Australia Holiday ets    2019 Q1\n 6 Adelaide       South Australia Holiday ets    2019 Q2\n 7 Adelaide       South Australia Holiday ets    2019 Q3\n 8 Adelaide       South Australia Holiday ets    2019 Q4\n 9 Adelaide Hills South Australia Holiday ets    2018 Q1\n10 Adelaide Hills South Australia Holiday ets    2018 Q2\n# ℹ 598 more rows\n# ℹ 2 more variables: Trips &lt;dist&gt;, .mean &lt;dbl&gt;"
  },
  {
    "objectID": "slides/8-ets.html#example-australian-holiday-tourism-69",
    "href": "slides/8-ets.html#example-australian-holiday-tourism-69",
    "title": "Chapter 8 ETS",
    "section": "Example: Australian holiday tourism (6/9)",
    "text": "Example: Australian holiday tourism (6/9)\n\nfit |&gt; forecast() |&gt;\n  filter(Region == \"Snowy Mountains\") |&gt;\n  autoplot(holidays) +\n  labs(y = \"Thousands\", title = \"Overnight trips\")"
  },
  {
    "objectID": "slides/8-ets.html#residuals",
    "href": "slides/8-ets.html#residuals",
    "title": "Chapter 8 ETS",
    "section": "Residuals",
    "text": "Residuals\nResponse residuals \\[\\hat{e}_t = y_t - \\hat{y}_{t|t-1}\\]\n\nInnovation residuals Additive error model: \\[\\hat\\varepsilon_t = y_t - \\hat{y}_{t|t-1}\\]\nMultiplicative error model: \\[\\hat\\varepsilon_t = \\frac{y_t - \\hat{y}_{t|t-1}}{\\hat{y}_{t|t-1}}\\]"
  },
  {
    "objectID": "slides/8-ets.html#example-australian-holiday-tourism-79",
    "href": "slides/8-ets.html#example-australian-holiday-tourism-79",
    "title": "Chapter 8 ETS",
    "section": "Example: Australian holiday tourism (7/9)",
    "text": "Example: Australian holiday tourism (7/9)\n\naus_holidays &lt;- tourism |&gt;\n  filter(Purpose == \"Holiday\") |&gt;\n  summarise(Trips = sum(Trips))\nfit &lt;- aus_holidays |&gt;\n  model(ets = ETS(Trips)) |&gt;\n  report()\n\nSeries: Trips \nModel: ETS(M,N,M) \n  Smoothing parameters:\n    alpha = 0.3578226 \n    gamma = 0.0009685565 \n\n  Initial states:\n     l[0]      s[0]     s[-1]    s[-2]    s[-3]\n 9666.501 0.9430367 0.9268433 0.968352 1.161768\n\n  sigma^2:  0.0022\n\n     AIC     AICc      BIC \n1331.372 1332.928 1348.046"
  },
  {
    "objectID": "slides/8-ets.html#example-australian-holiday-tourism-89",
    "href": "slides/8-ets.html#example-australian-holiday-tourism-89",
    "title": "Chapter 8 ETS",
    "section": "Example: Australian holiday tourism (8/9)",
    "text": "Example: Australian holiday tourism (8/9)\n\nCodePlot\n\n\n\nresiduals(fit)\nresiduals(fit, type = \"response\")\n\n\nbind_rows(\n  residuals(fit) |&gt; mutate(Type = \"Innovation residuals\") |&gt; as_tibble(),\n  residuals(fit, type = \"response\") |&gt; \n    mutate(Type = \"Response residuals\") |&gt; \n    as_tibble()) |&gt;\n  ggplot(aes(x = Quarter, y = .resid)) +\n  geom_line() +\n  facet_grid(Type ~ ., scales = \"free_y\") +\n  labs(y = \"\")"
  },
  {
    "objectID": "slides/8-ets.html#example-australian-holiday-tourism-99",
    "href": "slides/8-ets.html#example-australian-holiday-tourism-99",
    "title": "Chapter 8 ETS",
    "section": "Example: Australian holiday tourism (9/9)",
    "text": "Example: Australian holiday tourism (9/9)\n\nfit |&gt;\n  augment()\n\n# A tsibble: 80 x 6 [1Q]\n# Key:       .model [1]\n   .model Quarter  Trips .fitted .resid   .innov\n   &lt;chr&gt;    &lt;qtr&gt;  &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt;\n 1 ets    1998 Q1 11806.  11230.  576.   0.0513 \n 2 ets    1998 Q2  9276.   9532. -257.  -0.0269 \n 3 ets    1998 Q3  8642.   9036. -393.  -0.0435 \n 4 ets    1998 Q4  9300.   9050.  249.   0.0275 \n 5 ets    1999 Q1 11172.  11260.  -88.0 -0.00781\n 6 ets    1999 Q2  9608.   9358.  249.   0.0266 \n 7 ets    1999 Q3  8914.   9042. -129.  -0.0142 \n 8 ets    1999 Q4  9026.   9154. -129.  -0.0140 \n 9 ets    2000 Q1 11071.  11221. -150.  -0.0134 \n10 ets    2000 Q2  9196.   9308. -111.  -0.0120 \n# ℹ 70 more rows\n\n\n\nInnovation residuals (.innov) are given by \\(\\hat{\\varepsilon}_t\\) while regular residuals (.resid) are \\(y_t - \\hat{y}_{t-1}\\). They are different when the model has multiplicative errors."
  },
  {
    "objectID": "slides/8-ets.html#some-unstable-models",
    "href": "slides/8-ets.html#some-unstable-models",
    "title": "Chapter 8 ETS",
    "section": "Some unstable models",
    "text": "Some unstable models\n\nSome of the combinations of (Error, Trend, Seasonal) can lead to numerical difficulties; see equations with division by a state.\nThese are: ETS(A,N,M), ETS(A,A,M), ETS(A,\\(A_d\\),M).\nModels with multiplicative errors are useful for strictly positive data, but are not numerically stable with data containing zeros or negative values. In that case only the six fully additive models will be applied."
  },
  {
    "objectID": "slides/8-ets.html#exponential-smoothing-models",
    "href": "slides/8-ets.html#exponential-smoothing-models",
    "title": "Chapter 8 ETS",
    "section": "Exponential smoothing models",
    "text": "Exponential smoothing models\nAdditive Error\n\n\n\n\n\n\n\n\n\nTrend\nN (None)\nA (Additive)\nM (Multiplicative)\n\n\n\n\nN (None)\nA,N,N\nA,N,A\nA,N,M\n\n\nA (Additive)\nA,A,N\nA,A,A\nA,A,M\n\n\n\\(A_d\\) (Additive damped)\nA,\\(A_d\\),N\nA,\\(A_d\\),A\nA,\\(A_d\\),M\n\n\n\nMultiplicative Error\n\n\n\n\n\n\n\n\n\nTrend\nN (None)\nA (Additive)\nM (Multiplicative)\n\n\n\n\nN (None)\nM,N,N\nM,N,A\nM,N,M\n\n\nA (Additive)\nM,A,N\nM,A,A\nM,A,M\n\n\n\\(A_d\\) (Additive damped)\nM,\\(A_d\\),N\nM,\\(A_d\\),A\nM,\\(A_d\\),M"
  },
  {
    "objectID": "slides/8-ets.html#forecasting-with-ets-models",
    "href": "slides/8-ets.html#forecasting-with-ets-models",
    "title": "Chapter 8 ETS",
    "section": "Forecasting with ETS models",
    "text": "Forecasting with ETS models\nTraditional point forecasts: iterate the equations for \\(t=T+1,T+2,\\dots,T+h\\) and set all \\(\\varepsilon_t=0\\) for \\(t&gt;T\\).\n\nNot the same as \\(\\text{E}(y_{t+h} | \\textbf{x}_t)\\) unless seasonality is additive.\nfable uses \\(\\text{E}(y_{t+h} | \\textbf{x}_t)\\).\nPoint forecasts for ETS(A,*,*) are identical to ETS(M,*,*) if the parameters are the same."
  },
  {
    "objectID": "slides/8-ets.html#forecasting-with-ets-models-1",
    "href": "slides/8-ets.html#forecasting-with-ets-models-1",
    "title": "Chapter 8 ETS",
    "section": "Forecasting with ETS models",
    "text": "Forecasting with ETS models\nPrediction intervals: can only be generated using the models.\n\nThe prediction intervals will differ between models with additive and multiplicative errors.\nExact formulae for some models.\nMore general to simulate future sample paths, conditional on the last estimate of the states, and to obtain prediction intervals from the percentiles of these simulated future paths."
  },
  {
    "objectID": "slides/8-ets.html#prediction-intervals",
    "href": "slides/8-ets.html#prediction-intervals",
    "title": "Chapter 8 ETS",
    "section": "Prediction intervals",
    "text": "Prediction intervals\nPI for most ETS models: \\(\\hat{y}_{T+h|T} \\pm c \\sigma_h\\), where \\(c\\) depends on coverage probability and \\(\\sigma_h\\) is forecast standard deviation.\nWe can see them in the book HERE."
  },
  {
    "objectID": "slides/8-ets.html#example-corticosteroid-drug-sales-15",
    "href": "slides/8-ets.html#example-corticosteroid-drug-sales-15",
    "title": "Chapter 8 ETS",
    "section": "Example: Corticosteroid drug sales (1/5)",
    "text": "Example: Corticosteroid drug sales (1/5)\n\nh02 &lt;- PBS |&gt;\n  filter(ATC2 == \"H02\") |&gt;\n  summarise(Cost = sum(Cost))\nh02 |&gt; autoplot(Cost)"
  },
  {
    "objectID": "slides/8-ets.html#example-corticosteroid-drug-sales-25",
    "href": "slides/8-ets.html#example-corticosteroid-drug-sales-25",
    "title": "Chapter 8 ETS",
    "section": "Example: Corticosteroid drug sales (2/5)",
    "text": "Example: Corticosteroid drug sales (2/5)\n\nh02 |&gt;\n  model(ETS(Cost)) |&gt;\n  report()\n\nSeries: Cost \nModel: ETS(M,Ad,M) \n  Smoothing parameters:\n    alpha = 0.3071016 \n    beta  = 0.0001006793 \n    gamma = 0.0001007181 \n    phi   = 0.977528 \n\n  Initial states:\n     l[0]    b[0]      s[0]     s[-1]     s[-2]     s[-3]     s[-4]    s[-5]    s[-6]\n 417268.7 8205.82 0.8716807 0.8259747 0.7562808 0.7733338 0.6872373 1.283821 1.324616\n    s[-7]    s[-8]    s[-9]   s[-10]    s[-11]\n 1.180067 1.163601 1.104801 1.047963 0.9806235\n\n  sigma^2:  0.0046\n\n     AIC     AICc      BIC \n5515.212 5518.909 5574.938"
  },
  {
    "objectID": "slides/8-ets.html#example-corticosteroid-drug-sales-35",
    "href": "slides/8-ets.html#example-corticosteroid-drug-sales-35",
    "title": "Chapter 8 ETS",
    "section": "Example: Corticosteroid drug sales (3/5)",
    "text": "Example: Corticosteroid drug sales (3/5)\n\nh02 |&gt;\n  model(ETS(Cost ~ error(\"A\") + trend(\"A\") + season(\"A\"))) |&gt;\n  report()\n\nSeries: Cost \nModel: ETS(A,A,A) \n  Smoothing parameters:\n    alpha = 0.1702163 \n    beta  = 0.006310854 \n    gamma = 0.4545987 \n\n  Initial states:\n     l[0]     b[0]      s[0]     s[-1]     s[-2]     s[-3]     s[-4]    s[-5]    s[-6]\n 409705.9 9097.111 -99075.37 -136602.3 -191496.1 -174530.8 -241436.7 210643.8 244644.2\n    s[-7]    s[-8]    s[-9]  s[-10]    s[-11]\n 145368.2 130569.6 84457.69 39131.7 -11673.71\n\n  sigma^2:  3498869384\n\n     AIC     AICc      BIC \n5585.278 5588.568 5641.686"
  },
  {
    "objectID": "slides/8-ets.html#example-corticosteroid-drug-sales-45",
    "href": "slides/8-ets.html#example-corticosteroid-drug-sales-45",
    "title": "Chapter 8 ETS",
    "section": "Example: Corticosteroid drug sales (4/5)",
    "text": "Example: Corticosteroid drug sales (4/5)\n\nh02 |&gt;\n  model(ETS(Cost)) |&gt;\n  forecast() |&gt;\n  autoplot(h02)"
  },
  {
    "objectID": "slides/8-ets.html#example-corticosteroid-drug-sales-55",
    "href": "slides/8-ets.html#example-corticosteroid-drug-sales-55",
    "title": "Chapter 8 ETS",
    "section": "Example: Corticosteroid drug sales (5/5)",
    "text": "Example: Corticosteroid drug sales (5/5)\n\nh02 |&gt;\n  model(\n    auto = ETS(Cost),\n    AAA = ETS(Cost ~ error(\"A\") + trend(\"A\") + season(\"A\"))\n  ) |&gt;\n  accuracy()\n\n\n\n\n\n\nModel\nMAE\nRMSE\nMAPE\nMASE\nRMSSE\n\n\n\n\nauto\n38649.04\n51102.24\n4.988983\n0.6375806\n0.6891173\n\n\nAAA\n43378.40\n56784.23\n6.047574\n0.7155993\n0.7657394"
  },
  {
    "objectID": "slides/8-ets.html#your-turn-4",
    "href": "slides/8-ets.html#your-turn-4",
    "title": "Chapter 8 ETS",
    "section": "Your turn",
    "text": "Your turn\n\nUse ETS() on some of these series:\n\n\ntourism, gafa_stock, pelt\n\n\nDoes it always give good forecasts?\nFind an example where it does not work well. Can you figure out why?"
  }
]